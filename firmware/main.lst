   1               		.file	"main.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__ = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.Ltext0:
  12               		.cfi_sections	.debug_frame
  13               	.global	EVENT_USB_Device_ConfigurationChanged
  15               	EVENT_USB_Device_ConfigurationChanged:
  16               	.LFB57:
  17               		.file 1 "Framework.h"
   1:Framework.h   **** #pragma once
   2:Framework.h   **** #define F_CPU 32000000UL
   3:Framework.h   **** 
   4:Framework.h   **** // includes
   5:Framework.h   **** #include <avr/interrupt.h>
   6:Framework.h   **** #include <util/delay.h>
   7:Framework.h   **** #include "Descriptors.h"
   8:Framework.h   **** #include "usb/usb.h"
   9:Framework.h   **** #include "usb/usb_pipe.h"
  10:Framework.h   **** #include <avr/eeprom.h>
  11:Framework.h   **** #include <avr/io.h>
  12:Framework.h   **** 
  13:Framework.h   **** USB_PIPE(ep_in, 0x81 | USB_EP_PP, USB_EP_TYPE_BULK_gc, 64, 8, PIPE_ENABLE_FLUSH);
  14:Framework.h   **** 
  15:Framework.h   **** bool timeout_or_sampling_no_longer_enabled = 0;
  16:Framework.h   **** 
  17:Framework.h   **** // Queue a byte to be sent over the bulk EP. Blocks if the buffer is full
  18:Framework.h   **** static inline void send_byte(uint8_t byte){
  19:Framework.h   ****     // this should never actually block if your buffer is big enough
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
  21:Framework.h   **** 	usb_pipe_write_byte(&ep_in, byte);
  22:Framework.h   **** }
  23:Framework.h   **** 
  24:Framework.h   **** // Sends a break to end the USB read and flushes the USB pipe
  25:Framework.h   **** static inline void break_and_flush(){
  26:Framework.h   ****     usb_pipe_flush(&ep_in);
  27:Framework.h   ****     USB.INTFLAGSBSET = USB_TRNIF_bm;
  28:Framework.h   ****     while (!usb_pipe_can_write(&ep_in)){
  29:Framework.h   ****         if (timeout_or_sampling_no_longer_enabled){
  30:Framework.h   ****             usb_pipe_reset(&ep_in);
  31:Framework.h   ****             return;
  32:Framework.h   ****         }
  33:Framework.h   ****     }
  34:Framework.h   **** } 
  35:Framework.h   **** 
  36:Framework.h   **** void EVENT_USB_Device_ConfigurationChanged(uint8_t config){
  18               		.loc 1 36 0
  19               		.cfi_startproc
  20               	.LVL0:
  21               	/* prologue: function */
  22               	/* frame size = 0 */
  23               	/* stack size = 0 */
  24               	.L__stack_usage = 0
  25               	.LBB388:
  26               	.LBB389:
  27               		.file 2 "usb/usb_pipe.h"
   1:usb/usb_pipe.h **** #include "pipe.h"
   2:usb/usb_pipe.h **** #include "usb.h"
   3:usb/usb_pipe.h **** 
   4:usb/usb_pipe.h **** #include <util/atomic.h>
   5:usb/usb_pipe.h **** #ifndef PIPE_ATOMIC
   6:usb/usb_pipe.h **** #define PIPE_ATOMIC ATOMIC_RESTORESTATE
   7:usb/usb_pipe.h **** #endif 
   8:usb/usb_pipe.h **** 
   9:usb/usb_pipe.h **** typedef struct USB_Pipe_data{
  10:usb/usb_pipe.h **** 	bool bank;
  11:usb/usb_pipe.h **** 	uint8_t flush;
  12:usb/usb_pipe.h **** 	uint16_t packet_offset; // Index into current packet for byte mode
  13:usb/usb_pipe.h **** } USB_Pipe_data;
  14:usb/usb_pipe.h **** 
  15:usb/usb_pipe.h **** // Immutable part, constant-folded at compile time
  16:usb/usb_pipe.h **** typedef struct USB_Pipe{
  17:usb/usb_pipe.h **** 	uint8_t ep;
  18:usb/usb_pipe.h **** 	uint8_t type;
  19:usb/usb_pipe.h **** 	USB_Pipe_data* data;
  20:usb/usb_pipe.h **** 	const Pipe* pipe;
  21:usb/usb_pipe.h **** 	uint8_t features;
  22:usb/usb_pipe.h **** } USB_Pipe;
  23:usb/usb_pipe.h **** 
  24:usb/usb_pipe.h **** #define PIPE_ENABLE_FLUSH (1<<0)
  25:usb/usb_pipe.h **** 
  26:usb/usb_pipe.h **** #define USB_PIPE(NAME, EPNO, TYPE, PACKET_SIZE, BUFFER_PACKETS, FEATURES) \
  27:usb/usb_pipe.h **** 	PIPE(NAME##_pipe, (BUFFER_PACKETS), (PACKET_SIZE),               \
  28:usb/usb_pipe.h **** 		((EPNO)&USB_EP_IN)?0:2,                      \
  29:usb/usb_pipe.h **** 		((EPNO)&USB_EP_IN)?2:0                       \
  30:usb/usb_pipe.h **** 	);                                               \
  31:usb/usb_pipe.h **** 	USB_Pipe_data NAME##_data = {      \
  32:usb/usb_pipe.h **** 		.bank = 0,                   \
  33:usb/usb_pipe.h **** 		.flush = 0,                    \
  34:usb/usb_pipe.h **** 	};                                 \
  35:usb/usb_pipe.h **** 	const static USB_Pipe NAME = {     \
  36:usb/usb_pipe.h **** 		.ep = (EPNO),                  \
  37:usb/usb_pipe.h **** 		.type = (TYPE),                \
  38:usb/usb_pipe.h **** 		.data = &(NAME##_data),        \
  39:usb/usb_pipe.h **** 		.pipe = &(NAME##_pipe),        \
  40:usb/usb_pipe.h **** 		.features = (FEATURES),        \
  41:usb/usb_pipe.h **** 	};                                 \
  42:usb/usb_pipe.h **** 
  43:usb/usb_pipe.h **** static inline void usb_pipe_init(const USB_Pipe* p){
  44:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
  28               		.loc 2 44 0
  29 0000 2FB7      		in r18,__SREG__
  30               	.LVL1:
  31               	.LBB390:
  32               	.LBB391:
  33               		.file 3 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h"
   1:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** /* Copyright (c) 2007 Dean Camera
   2:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****    All rights reserved.
   3:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
   4:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****    Redistribution and use in source and binary forms, with or without
   5:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****    modification, are permitted provided that the following conditions are met:
   6:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
   7:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****    * Redistributions of source code must retain the above copyright
   8:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****      notice, this list of conditions and the following disclaimer.
   9:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  10:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****    * Redistributions in binary form must reproduce the above copyright
  11:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****      notice, this list of conditions and the following disclaimer in
  12:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****      the documentation and/or other materials provided with the
  13:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****      distribution.
  14:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  15:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****    * Neither the name of the copyright holders nor the names of
  16:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****      contributors may be used to endorse or promote products derived
  17:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****      from this software without specific prior written permission.
  18:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  19:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  20:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  21:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  22:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  23:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  24:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  25:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  26:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  27:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  28:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  29:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****   POSSIBILITY OF SUCH DAMAGE.
  30:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** */
  31:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  32:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** /* $Id: atomic.h 2158 2010-06-10 15:48:28Z joerg_wunsch $ */
  33:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  34:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** #ifndef _UTIL_ATOMIC_H_
  35:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** #define _UTIL_ATOMIC_H_ 1
  36:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  37:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** #include <avr/io.h>
  38:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** #include <avr/interrupt.h>
  39:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  40:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** #if !defined(__DOXYGEN__)
  41:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** /* Internal helper functions. */
  42:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** static __inline__ uint8_t __iSeiRetVal(void)
  43:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** {
  44:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     sei();
  45:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     return 1;
  46:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** }
  47:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  48:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** static __inline__ uint8_t __iCliRetVal(void)
  49:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** {
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
  34               		.loc 3 50 0
  35               	/* #APP */
  36               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
  37 0002 F894      		cli
  38               	 ;  0 "" 2
  39               	.LVL2:
  40               	/* #NOAPP */
  41               	.LBE391:
  42               	.LBE390:
  43               	.LBB392:
  44               	.LBB393:
  45               		.file 4 "usb/pipe.h"
   1:usb/pipe.h    **** // Ring buffer that takes heavy advantage of constant folding
   2:usb/pipe.h    **** #pragma once
   3:usb/pipe.h    **** 
   4:usb/pipe.h    **** #include "Common.h"
   5:usb/pipe.h    **** 
   6:usb/pipe.h    **** // Mutable part, becomes an actual struct
   7:usb/pipe.h    **** typedef struct Pipe_data{
   8:usb/pipe.h    **** 	uint8_t* read_ptr;
   9:usb/pipe.h    **** 	uint8_t* write_ptr;
  10:usb/pipe.h    **** 	int8_t count; // available slots
  11:usb/pipe.h    **** } Pipe_data;
  12:usb/pipe.h    **** 
  13:usb/pipe.h    **** // Immutable part, constant-folded at compile time
  14:usb/pipe.h    **** typedef struct Pipe{
  15:usb/pipe.h    **** 	Pipe_data* data;
  16:usb/pipe.h    **** 	uint8_t* buffer;
  17:usb/pipe.h    **** 	uint8_t  slots;         // Number of slots in the buffer
  18:usb/pipe.h    **** 	uint8_t reserve_read;  // Slots to prevent reading so they are available to writer
  19:usb/pipe.h    **** 	uint8_t reserve_write; // Slots to prevent writing so they are available to reader
  20:usb/pipe.h    **** 	uint16_t size;          // Size of a buffer slot in bytes
  21:usb/pipe.h    **** } Pipe;
  22:usb/pipe.h    **** 
  23:usb/pipe.h    **** #define PIPE_H(NAME, SLOTS, SIZE, RESERVE_READ, RESERVE_WRITE)       \
  24:usb/pipe.h    **** 	extern Pipe_data NAME##_data;         \
  25:usb/pipe.h    **** 	extern uint8_t NAME##_buffer[(SLOTS)*(SIZE)]; \
  26:usb/pipe.h    **** 	const static Pipe NAME = {            \
  27:usb/pipe.h    **** 		.data = &(NAME##_data),           \
  28:usb/pipe.h    **** 		.buffer = &((NAME##_buffer)[0]),  \
  29:usb/pipe.h    **** 		.slots = (SLOTS),                 \
  30:usb/pipe.h    **** 		.size = (SIZE),                   \
  31:usb/pipe.h    **** 		.reserve_read = (RESERVE_READ),   \
  32:usb/pipe.h    **** 		.reserve_write = (RESERVE_WRITE), \
  33:usb/pipe.h    **** 	};
  34:usb/pipe.h    **** 
  35:usb/pipe.h    **** 
  36:usb/pipe.h    **** #define PIPE_C(NAME, SLOTS, SIZE)                   \
  37:usb/pipe.h    **** 	uint8_t NAME##_buffer[(SLOTS)*(SIZE)];           \
  38:usb/pipe.h    **** 	Pipe_data NAME##_data = {                \
  39:usb/pipe.h    **** 		.count = 0,                          \
  40:usb/pipe.h    **** 		.read_ptr = &((NAME##_buffer)[0]),                       \
  41:usb/pipe.h    **** 		.write_ptr = &((NAME##_buffer)[0]),                      \
  42:usb/pipe.h    **** 	};
  43:usb/pipe.h    **** 
  44:usb/pipe.h    **** #define PIPE(NAME, SLOTS, SIZE, RESERVE_READ, RESERVE_WRITE) \
  45:usb/pipe.h    **** 	PIPE_H(NAME, SLOTS, SIZE, RESERVE_READ, RESERVE_WRITE)   \
  46:usb/pipe.h    **** 	PIPE_C(NAME, SLOTS, SIZE)
  47:usb/pipe.h    **** 
  48:usb/pipe.h    **** // Number of slots available to read
  49:usb/pipe.h    **** static inline int8_t pipe_can_read(const Pipe* pipe) ATTR_ALWAYS_INLINE;
  50:usb/pipe.h    **** static inline int8_t pipe_can_read(const Pipe* pipe){
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
  52:usb/pipe.h    **** }
  53:usb/pipe.h    **** 
  54:usb/pipe.h    **** // Number of slots available to write
  55:usb/pipe.h    **** static inline int8_t pipe_can_write(const Pipe* pipe) ATTR_ALWAYS_INLINE;
  56:usb/pipe.h    **** static inline int8_t pipe_can_write(const Pipe* pipe){
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
  58:usb/pipe.h    **** }
  59:usb/pipe.h    **** 
  60:usb/pipe.h    **** static inline uint8_t* pipe_read_ptr(const Pipe* pipe) ATTR_ALWAYS_INLINE;
  61:usb/pipe.h    **** static inline uint8_t* pipe_read_ptr(const Pipe* pipe){
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
  63:usb/pipe.h    **** }
  64:usb/pipe.h    **** 
  65:usb/pipe.h    **** static inline uint8_t* pipe_write_ptr(const Pipe* pipe) ATTR_ALWAYS_INLINE;
  66:usb/pipe.h    **** static inline uint8_t* pipe_write_ptr(const Pipe* pipe){
  67:usb/pipe.h    **** 	return pipe->data->write_ptr;
  68:usb/pipe.h    **** }
  69:usb/pipe.h    **** 
  70:usb/pipe.h    **** static inline void pipe_done_read(const Pipe* pipe) ATTR_ALWAYS_INLINE;
  71:usb/pipe.h    **** static inline void pipe_done_read(const Pipe* pipe){
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
  74:usb/pipe.h    **** 	// Assumes buffer_size % slot_size == 0 and all accesses aligned
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
  77:usb/pipe.h    **** }
  78:usb/pipe.h    **** 
  79:usb/pipe.h    **** static inline void pipe_done_write(const Pipe* pipe) ATTR_ALWAYS_INLINE;
  80:usb/pipe.h    **** static inline void pipe_done_write(const Pipe* pipe){
  81:usb/pipe.h    **** 	pipe->data->count += 1;
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
  83:usb/pipe.h    **** 	// Assumes buffer_size % slot_size == 0 and all accesses aligned
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
  86:usb/pipe.h    **** }
  87:usb/pipe.h    **** 
  88:usb/pipe.h    **** static inline void pipe_reset(const Pipe* pipe) ATTR_ALWAYS_INLINE;
  89:usb/pipe.h    **** static inline void pipe_reset(const Pipe* pipe){
  90:usb/pipe.h    **** 	pipe->data->count = 0;
  46               		.loc 4 90 0
  47 0004 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
  91:usb/pipe.h    **** 	pipe->data->read_ptr = pipe->data->write_ptr = pipe->buffer;
  48               		.loc 4 91 0
  49 0008 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
  50 000a 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
  51               	.LVL3:
  52 000c 8093 0000 		sts ep_in_pipe_data+2,r24
  53 0010 9093 0000 		sts ep_in_pipe_data+2+1,r25
  54 0014 8093 0000 		sts ep_in_pipe_data,r24
  55 0018 9093 0000 		sts ep_in_pipe_data+1,r25
  56               	.LVL4:
  57               	.LBE393:
  58               	.LBE392:
  59               	.LBB394:
  60               	.LBB395:
  61               	.LBB396:
  62               		.file 5 "usb/usb.h"
   1:usb/usb.h     **** // Minimal USB Stack for ATxmega32a4u and related
   2:usb/usb.h     **** // http://nonolithlabs.com
   3:usb/usb.h     **** // (C) 2011 Kevin Mehall (Nonolith Labs) <km@kevinmehall.net>
   4:usb/usb.h     **** //
   5:usb/usb.h     **** // Heavily borrows from LUFA
   6:usb/usb.h     **** // Copyright 2011  Dean Camera (dean [at] fourwalledcubicle [dot] com)
   7:usb/usb.h     **** //
   8:usb/usb.h     **** // Licensed under the terms of the GNU GPLv3+
   9:usb/usb.h     **** 
  10:usb/usb.h     **** #pragma once
  11:usb/usb.h     **** 
  12:usb/usb.h     **** #include <avr/io.h>
  13:usb/usb.h     **** 
  14:usb/usb.h     **** #define CPU_TO_LE16(x) x
  15:usb/usb.h     **** 
  16:usb/usb.h     **** struct USB_Request_Header;
  17:usb/usb.h     **** typedef struct USB_Request_Header USB_Requst_Header_t;
  18:usb/usb.h     **** 
  19:usb/usb.h     **** #include "StdDescriptors.h"
  20:usb/usb.h     **** #include "StdRequestType.h"
  21:usb/usb.h     **** #include "Events.h"
  22:usb/usb.h     **** 
  23:usb/usb.h     **** #ifndef USB_MAXEP
  24:usb/usb.h     **** 	#define USB_MAXEP 1
  25:usb/usb.h     **** #endif
  26:usb/usb.h     **** 
  27:usb/usb.h     **** #ifndef USB_EP0SIZE
  28:usb/usb.h     **** 	#define EP0SIZE 64
  29:usb/usb.h     **** #endif
  30:usb/usb.h     **** 
  31:usb/usb.h     **** typedef union USB_EP_pair{
  32:usb/usb.h     **** 	union{
  33:usb/usb.h     **** 		struct{
  34:usb/usb.h     **** 			USB_EP_t out;
  35:usb/usb.h     **** 			USB_EP_t in;
  36:usb/usb.h     **** 		};
  37:usb/usb.h     **** 		USB_EP_t ep[2];
  38:usb/usb.h     **** 	};
  39:usb/usb.h     **** } ATTR_PACKED USB_EP_pair_t;
  40:usb/usb.h     **** 
  41:usb/usb.h     **** extern uint8_t ep0_buf_in[USB_EP0SIZE];
  42:usb/usb.h     **** extern uint8_t ep0_buf_out[USB_EP0SIZE];
  43:usb/usb.h     **** extern USB_EP_pair_t endpoints[USB_MAXEP+1];
  44:usb/usb.h     **** 
  45:usb/usb.h     **** /** String descriptor index for the device's unique serial number string descriptor within the devi
  46:usb/usb.h     ****  *  This unique serial number is used by the host to associate resources to the device (such as dri
  47:usb/usb.h     ****  *  number allocations) to a device regardless of the port it is plugged in to on the host. Some mi
  48:usb/usb.h     ****  *  a unique serial number internally, and setting the device descriptors serial number string inde
  49:usb/usb.h     ****  *  will cause it to use the internal serial number.
  50:usb/usb.h     ****  *
  51:usb/usb.h     ****  *  On unsupported devices, this will evaluate to \ref NO_DESCRIPTOR and so will force the host to 
  52:usb/usb.h     ****  *  number for the device.
  53:usb/usb.h     ****  */
  54:usb/usb.h     **** #define USE_INTERNAL_SERIAL            0xDC
  55:usb/usb.h     **** 
  56:usb/usb.h     **** /** Length of the device's unique internal serial number, in bits, if present on the selected micro
  57:usb/usb.h     ****  *  model.
  58:usb/usb.h     ****  */
  59:usb/usb.h     **** #define INTERNAL_SERIAL_LENGTH_BITS    (8 * (1 + (offsetof(NVM_PROD_SIGNATURES_t, COORDY1) - offset
  60:usb/usb.h     **** 
  61:usb/usb.h     **** /** Start address of the internal serial number, in the appropriate address space, if present on th
  62:usb/usb.h     ****  *  model.
  63:usb/usb.h     ****  */
  64:usb/usb.h     **** #define INTERNAL_SERIAL_START_ADDRESS  offsetof(NVM_PROD_SIGNATURES_t, LOTNUM0)
  65:usb/usb.h     **** 
  66:usb/usb.h     **** /* Enums: */
  67:usb/usb.h     **** 	/** Enum for the various states of the USB Device state machine. Only some states are
  68:usb/usb.h     **** 	 *  implemented in the LUFA library - other states are left to the user to implement.
  69:usb/usb.h     **** 	 *
  70:usb/usb.h     **** 	 *  For information on each possible USB device state, refer to the USB 2.0 specification.
  71:usb/usb.h     **** 	 *
  72:usb/usb.h     **** 	 *  \see \ref USB_DeviceState, which stores the current device state machine state.
  73:usb/usb.h     **** 	 */
  74:usb/usb.h     **** 	enum USB_Device_States_t
  75:usb/usb.h     **** 	{
  76:usb/usb.h     **** 		DEVICE_STATE_Unattached                   = 0, /**< Internally implemented by the library. This s
  77:usb/usb.h     **** 		                                                *   that the device is not currently connected to
  78:usb/usb.h     **** 		                                                */
  79:usb/usb.h     **** 		DEVICE_STATE_Powered                      = 1, /**< Internally implemented by the library. This s
  80:usb/usb.h     **** 		                                                *   that the device is connected to a host, but e
  81:usb/usb.h     **** 		                                                *   yet begun.
  82:usb/usb.h     **** 		                                                */
  83:usb/usb.h     **** 		DEVICE_STATE_Default                      = 2, /**< Internally implemented by the library. This s
  84:usb/usb.h     **** 		                                                *   that the device's USB bus has been reset by t
  85:usb/usb.h     **** 		                                                *   now waiting for the host to begin the enumera
  86:usb/usb.h     **** 		                                                */
  87:usb/usb.h     **** 		DEVICE_STATE_Addressed                    = 3, /**< Internally implemented by the library. This s
  88:usb/usb.h     **** 		                                                *   that the device has been addressed by the USB
  89:usb/usb.h     **** 		                                                *   yet configured.
  90:usb/usb.h     **** 		                                                */
  91:usb/usb.h     **** 		DEVICE_STATE_Configured                   = 4, /**< May be implemented by the user project. This 
  92:usb/usb.h     **** 		                                                *   that the device has been enumerated by the ho
  93:usb/usb.h     **** 		                                                *   for USB communications to begin.
  94:usb/usb.h     **** 		                                                */
  95:usb/usb.h     **** 		DEVICE_STATE_Suspended                    = 5, /**< May be implemented by the user project. This 
  96:usb/usb.h     **** 		                                                *   that the USB bus has been suspended by the ho
  97:usb/usb.h     **** 		                                                *   should power down to a minimal power level un
  98:usb/usb.h     **** 		                                                *   resumed.
  99:usb/usb.h     **** 		                                                */
 100:usb/usb.h     **** 	};
 101:usb/usb.h     **** 
 102:usb/usb.h     **** #define USB_EP_size_to_gc(x)  ((x <= 8   )?USB_EP_BUFSIZE_8_gc:\
 103:usb/usb.h     ****                                (x <= 16  )?USB_EP_BUFSIZE_16_gc:\
 104:usb/usb.h     ****                                (x <= 32  )?USB_EP_BUFSIZE_32_gc:\
 105:usb/usb.h     ****                                (x <= 64  )?USB_EP_BUFSIZE_64_gc:\
 106:usb/usb.h     ****                                (x <= 128 )?USB_EP_BUFSIZE_128_gc:\
 107:usb/usb.h     ****                                (x <= 256 )?USB_EP_BUFSIZE_256_gc:\
 108:usb/usb.h     ****                                (x <= 512 )?USB_EP_BUFSIZE_512_gc:\
 109:usb/usb.h     ****                                            USB_EP_BUFSIZE_1023_gc)
 110:usb/usb.h     **** 
 111:usb/usb.h     **** #define USB_EP_IN 0x80
 112:usb/usb.h     **** 
 113:usb/usb.h     **** // Flag in the endpoint address to indicate that the endpoint should use
 114:usb/usb.h     **** // PingPong (double buffer) mode. This is not actually part of the endpoint
 115:usb/usb.h     **** // address as seen by the host. If PP is enabled, this flag needs to be part
 116:usb/usb.h     **** // of the address passed to all USB_EP_* functions.
 117:usb/usb.h     **** #define USB_EP_PP 0x40
 118:usb/usb.h     **** 	
 119:usb/usb.h     **** extern volatile uint8_t USB_DeviceState;
 120:usb/usb.h     **** extern volatile uint8_t USB_Device_ConfigurationNumber;
 121:usb/usb.h     **** 
 122:usb/usb.h     **** /** Configure the XMEGA's clock for use with USB.  */
 123:usb/usb.h     **** void USB_ConfigureClock(void);
 124:usb/usb.h     **** 
 125:usb/usb.h     **** /** Initialize USB functionality */
 126:usb/usb.h     **** void USB_Init(void);
 127:usb/usb.h     **** void USB_ResetInterface(void);
 128:usb/usb.h     **** 
 129:usb/usb.h     **** #define _USB_EP(epaddr) \
 130:usb/usb.h     **** 	USB_EP_pair_t* pair = &endpoints[(epaddr & 0x3F)]; \
 131:usb/usb.h     **** 	USB_EP_t* e __attribute__ ((unused)) = &pair->ep[!!(epaddr&0x80)]; \
 132:usb/usb.h     **** 	
 133:usb/usb.h     **** #define _USB_EP_OTHER(epaddr) \
 134:usb/usb.h     **** 	USB_EP_t* other = &pair->ep[!(epaddr&0x80)]
 135:usb/usb.h     **** 	
 136:usb/usb.h     **** #define _USB_EP_BANK(epaddr, bank) \
 137:usb/usb.h     **** 	USB_EP_t* b = &pair->ep[!!(epaddr&0x80) != bank]
 138:usb/usb.h     **** 
 139:usb/usb.h     **** inline void USB_ep_init(uint8_t ep, uint8_t type, uint16_t bufsize) ATTR_ALWAYS_INLINE;
 140:usb/usb.h     **** inline void USB_ep_init(uint8_t ep, uint8_t type, uint16_t bufsize){
 141:usb/usb.h     **** 	_USB_EP(ep);
 142:usb/usb.h     **** 	if (ep & USB_EP_PP){
 143:usb/usb.h     **** 		_USB_EP_OTHER(ep);
 144:usb/usb.h     **** 		e->STATUS = USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm;
  63               		.loc 5 144 0
  64 001c 80E0      		ldi r24,lo8(endpoints+24)
  65 001e 90E0      		ldi r25,hi8(endpoints+24)
  66 0020 36E0      		ldi r19,lo8(6)
  67 0022 3093 0000 		sts endpoints+24,r19
 145:usb/usb.h     **** 		e->CTRL = type | USB_EP_size_to_gc(bufsize) | USB_EP_PINGPONG_bm;
  68               		.loc 5 145 0
  69 0026 33E9      		ldi r19,lo8(-109)
  70 0028 3093 0000 		sts endpoints+25,r19
 146:usb/usb.h     **** 		other->CTRL = 0;
  71               		.loc 5 146 0
  72 002c FC01      		movw r30,r24
  73 002e 3797      		sbiw r30,7
  74 0030 1082      		st Z,__zero_reg__
 147:usb/usb.h     **** 		other->STATUS = USB_EP_BUSNACK0_bm;
  75               		.loc 5 147 0
  76 0032 0897      		sbiw r24,8
  77 0034 32E0      		ldi r19,lo8(2)
  78 0036 FC01      		movw r30,r24
  79 0038 3083      		st Z,r19
  80               	.LBE396:
  81               	.LBE395:
  82               	.LBE394:
  45:usb/usb_pipe.h **** 		pipe_reset(p->pipe);
  46:usb/usb_pipe.h **** 		USB_ep_init(p->ep, p->type, p->pipe->size);
  47:usb/usb_pipe.h **** 		p->data->bank = 0;
  83               		.loc 2 47 0
  84 003a 1092 0000 		sts ep_in_data,__zero_reg__
  48:usb/usb_pipe.h **** 		p->data->flush = 0;
  85               		.loc 2 48 0
  86 003e 1092 0000 		sts ep_in_data+1,__zero_reg__
  49:usb/usb_pipe.h **** 		p->data->packet_offset = 0;
  87               		.loc 2 49 0
  88 0042 1092 0000 		sts ep_in_data+2,__zero_reg__
  89 0046 1092 0000 		sts ep_in_data+2+1,__zero_reg__
  90               	.LVL5:
  91               	.LBB397:
  92               	.LBB398:
  51:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     return 1;
  52:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** }
  53:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  54:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** static __inline__ void __iSeiParam(const uint8_t *__s)
  55:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** {
  56:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     sei();
  57:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     __asm__ volatile ("" ::: "memory");
  58:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     (void)__s;
  59:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** }
  60:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  61:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** static __inline__ void __iCliParam(const uint8_t *__s)
  62:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** {
  63:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
  64:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     __asm__ volatile ("" ::: "memory");
  65:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     (void)__s;
  66:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** }
  67:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** 
  68:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** static __inline__ void __iRestore(const  uint8_t *__s)
  69:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h **** {
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
  93               		.loc 3 70 0
  94 004a 2FBF      		out __SREG__,r18
  71:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     __asm__ volatile ("" ::: "memory");
  95               		.loc 3 71 0
  96               	/* epilogue start */
  97               	.LBE398:
  98               	.LBE397:
  99               	.LBE389:
 100               	.LBE388:
  37:Framework.h   **** 	usb_pipe_init(&ep_in);
  38:Framework.h   **** }
 101               		.loc 1 38 0
 102 004c 0895      		ret
 103               		.cfi_endproc
 104               	.LFE57:
 106               	.global	__vector_125
 108               	__vector_125:
 109               	.LFB58:
  39:Framework.h   **** 
  40:Framework.h   **** ISR(USB_BUSEVENT_vect){
 110               		.loc 1 40 0
 111               		.cfi_startproc
 112 004e 1F92      		push r1
 113               	.LCFI0:
 114               		.cfi_def_cfa_offset 3
 115               		.cfi_offset 1, -2
 116 0050 0F92      		push r0
 117               	.LCFI1:
 118               		.cfi_def_cfa_offset 4
 119               		.cfi_offset 0, -3
 120 0052 0FB6      		in r0,__SREG__
 121 0054 0F92      		push r0
 122 0056 1124      		clr __zero_reg__
 123 0058 2F93      		push r18
 124               	.LCFI2:
 125               		.cfi_def_cfa_offset 5
 126               		.cfi_offset 18, -4
 127 005a 3F93      		push r19
 128               	.LCFI3:
 129               		.cfi_def_cfa_offset 6
 130               		.cfi_offset 19, -5
 131 005c 4F93      		push r20
 132               	.LCFI4:
 133               		.cfi_def_cfa_offset 7
 134               		.cfi_offset 20, -6
 135 005e 5F93      		push r21
 136               	.LCFI5:
 137               		.cfi_def_cfa_offset 8
 138               		.cfi_offset 21, -7
 139 0060 6F93      		push r22
 140               	.LCFI6:
 141               		.cfi_def_cfa_offset 9
 142               		.cfi_offset 22, -8
 143 0062 7F93      		push r23
 144               	.LCFI7:
 145               		.cfi_def_cfa_offset 10
 146               		.cfi_offset 23, -9
 147 0064 8F93      		push r24
 148               	.LCFI8:
 149               		.cfi_def_cfa_offset 11
 150               		.cfi_offset 24, -10
 151 0066 9F93      		push r25
 152               	.LCFI9:
 153               		.cfi_def_cfa_offset 12
 154               		.cfi_offset 25, -11
 155 0068 AF93      		push r26
 156               	.LCFI10:
 157               		.cfi_def_cfa_offset 13
 158               		.cfi_offset 26, -12
 159 006a BF93      		push r27
 160               	.LCFI11:
 161               		.cfi_def_cfa_offset 14
 162               		.cfi_offset 27, -13
 163 006c EF93      		push r30
 164               	.LCFI12:
 165               		.cfi_def_cfa_offset 15
 166               		.cfi_offset 30, -14
 167 006e FF93      		push r31
 168               	.LCFI13:
 169               		.cfi_def_cfa_offset 16
 170               		.cfi_offset 31, -15
 171               	/* prologue: Signal */
 172               	/* frame size = 0 */
 173               	/* stack size = 15 */
 174               	.L__stack_usage = 15
  41:Framework.h   **** 	if (USB.INTFLAGSACLR & USB_SOFIF_bm){
 175               		.loc 1 41 0
 176 0070 E0EC      		ldi r30,lo8(1216)
 177 0072 F4E0      		ldi r31,hi8(1216)
 178 0074 8091 CA04 		lds r24,1226
 179 0078 87FD      		sbrc r24,7
 180 007a 00C0      		rjmp .L8
  42:Framework.h   **** 		USB.INTFLAGSACLR = USB_SOFIF_bm;
  43:Framework.h   **** 	}else if (USB.INTFLAGSACLR & (USB_CRCIF_bm | USB_UNFIF_bm | USB_OVFIF_bm)){
 181               		.loc 1 43 0
 182 007c 8091 CA04 		lds r24,1226
 183 0080 8E70      		andi r24,lo8(14)
 184 0082 01F4      		brne .L9
  44:Framework.h   **** 		USB.INTFLAGSACLR = (USB_CRCIF_bm | USB_UNFIF_bm | USB_OVFIF_bm);
  45:Framework.h   **** 	}else if (USB.INTFLAGSACLR & USB_STALLIF_bm){
 185               		.loc 1 45 0
 186 0084 8091 CA04 		lds r24,1226
 187 0088 80FD      		sbrc r24,0
 188 008a 00C0      		rjmp .L10
  46:Framework.h   **** 		USB.INTFLAGSACLR = USB_STALLIF_bm;
  47:Framework.h   **** 	}else{
  48:Framework.h   **** 		USB.INTFLAGSACLR = USB_SUSPENDIF_bm | USB_RESUMEIF_bm | USB_RSTIF_bm;
 189               		.loc 1 48 0
 190 008c 80E7      		ldi r24,lo8(112)
 191 008e 8287      		std Z+10,r24
 192               	.LBB399:
 193               	.LBB400:
 148:usb/usb.h     **** 	}else{
 149:usb/usb.h     **** 		e->STATUS = USB_EP_BUSNACK0_bm;
 150:usb/usb.h     **** 		e->CTRL = type | USB_EP_size_to_gc(bufsize);
 151:usb/usb.h     **** 	}
 152:usb/usb.h     **** }
 153:usb/usb.h     **** 
 154:usb/usb.h     **** inline void USB_ep_cancel(uint8_t ep) ATTR_ALWAYS_INLINE;
 155:usb/usb.h     **** inline void USB_ep_cancel(uint8_t ep){
 156:usb/usb.h     **** 	_USB_EP(ep);
 157:usb/usb.h     **** 	if (ep & USB_EP_PP){
 158:usb/usb.h     **** 		LASR16(&e->STATUS, USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 159:usb/usb.h     **** 		LACR16(&e->STATUS, USB_EP_BANK_bm);
 160:usb/usb.h     **** 	}else{
 161:usb/usb.h     **** 		LASR16(&e->STATUS, USB_EP_BUSNACK0_bm);
 162:usb/usb.h     **** 	}
 163:usb/usb.h     **** }
 164:usb/usb.h     **** 
 165:usb/usb.h     **** inline void USB_ep_start_bank(uint8_t ep, uint8_t bank, uint8_t* addr, uint16_t size){
 166:usb/usb.h     **** 	_USB_EP(ep);
 167:usb/usb.h     **** 	_USB_EP_BANK(ep, bank);
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 170:usb/usb.h     **** 	
 171:usb/usb.h     **** 	//TODO: the OVF, STALL, and TRNCOMPL flags are in b->STATUS. Clear them if anyone cares.
 172:usb/usb.h     **** 
 173:usb/usb.h     **** 	if (bank==0){
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 175:usb/usb.h     **** 	}else{
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 177:usb/usb.h     **** 	}
 178:usb/usb.h     **** }
 179:usb/usb.h     **** 
 180:usb/usb.h     **** inline void USB_ep_out_start(uint8_t ep, uint8_t* addr) ATTR_ALWAYS_INLINE;
 181:usb/usb.h     **** inline void USB_ep_out_start(uint8_t ep, uint8_t* addr){
 182:usb/usb.h     **** 	USB_ep_start_bank(ep, 0, addr, 0);
 183:usb/usb.h     **** }
 184:usb/usb.h     **** 
 185:usb/usb.h     **** inline void USB_ep_in_start(uint8_t ep, uint8_t* addr, uint16_t size) ATTR_ALWAYS_INLINE;
 186:usb/usb.h     **** inline void USB_ep_in_start(uint8_t ep, uint8_t* addr, uint16_t size){
 187:usb/usb.h     **** 	USB_ep_start_bank(ep, 0, addr, size);
 188:usb/usb.h     **** }
 189:usb/usb.h     **** 
 190:usb/usb.h     **** inline bool USB_ep_done_bank(uint8_t ep, uint8_t bank){
 191:usb/usb.h     **** 	_USB_EP(ep);
 192:usb/usb.h     **** 	return e->STATUS & (bank?USB_EP_TRNCOMPL1_bm:USB_EP_TRNCOMPL0_bm);
 193:usb/usb.h     **** }
 194:usb/usb.h     **** 
 195:usb/usb.h     **** inline bool USB_ep_done(uint8_t ep) ATTR_ALWAYS_INLINE;
 196:usb/usb.h     **** inline bool USB_ep_done(uint8_t ep){
 197:usb/usb.h     **** 	_USB_EP(ep);
 198:usb/usb.h     **** 	if (ep & USB_EP_PP){
 199:usb/usb.h     **** 		return e->STATUS & (USB_EP_TRNCOMPL0_bm|USB_EP_TRNCOMPL1_bm);
 200:usb/usb.h     **** 	}else{
 201:usb/usb.h     **** 		// Because for ep0, TRNCOMPL1 is SETUP
 202:usb/usb.h     **** 		return e->STATUS & USB_EP_TRNCOMPL0_bm;
 203:usb/usb.h     **** 	}
 204:usb/usb.h     **** }
 205:usb/usb.h     **** 
 206:usb/usb.h     **** inline void USB_ep_clear_done(uint8_t ep) ATTR_ALWAYS_INLINE;
 207:usb/usb.h     **** inline void USB_ep_clear_done(uint8_t ep){
 208:usb/usb.h     **** 	_USB_EP(ep);
 209:usb/usb.h     **** 	if (ep & USB_EP_PP){
 210:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_TRNCOMPL0_bm|USB_EP_TRNCOMPL1_bm);
 211:usb/usb.h     **** 	}else{
 212:usb/usb.h     **** 		// Because for ep0, TRNCOMPL1 is SETUP
 213:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_TRNCOMPL0_bm);
 214:usb/usb.h     **** 	}
 215:usb/usb.h     **** }
 216:usb/usb.h     **** 
 217:usb/usb.h     **** inline bool USB_ep_ready(uint8_t ep) ATTR_ALWAYS_INLINE;
 218:usb/usb.h     **** inline bool USB_ep_ready(uint8_t ep){
 219:usb/usb.h     **** 	_USB_EP(ep);
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 221:usb/usb.h     **** }
 222:usb/usb.h     **** 
 223:usb/usb.h     **** inline bool USB_ep_empty(uint8_t ep) ATTR_ALWAYS_INLINE;
 224:usb/usb.h     **** inline bool USB_ep_empty(uint8_t ep){
 225:usb/usb.h     **** 	_USB_EP(ep);
 226:usb/usb.h     **** 	if (ep & USB_EP_PP){
 227:usb/usb.h     **** 		const uint8_t mask = (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 229:usb/usb.h     **** 	}else{
 230:usb/usb.h     **** 		return e->STATUS & USB_EP_BUSNACK0_bm;
 231:usb/usb.h     **** 	}
 232:usb/usb.h     **** }
 233:usb/usb.h     **** 
 234:usb/usb.h     **** inline uint16_t USB_ep_count_bank(uint8_t ep, uint8_t bank) ATTR_ALWAYS_INLINE;
 235:usb/usb.h     **** inline uint16_t USB_ep_count_bank(uint8_t ep, uint8_t bank){
 236:usb/usb.h     **** 	_USB_EP(ep);
 237:usb/usb.h     **** 	_USB_EP_BANK(ep, bank);
 238:usb/usb.h     **** 	return b->CNT;
 239:usb/usb.h     **** }
 240:usb/usb.h     **** 
 241:usb/usb.h     **** inline uint16_t USB_ep_count(uint8_t ep) ATTR_ALWAYS_INLINE;
 242:usb/usb.h     **** inline uint16_t USB_ep_count(uint8_t ep){
 243:usb/usb.h     **** 	return USB_ep_count_bank(ep, 0);
 244:usb/usb.h     **** }
 245:usb/usb.h     **** 
 246:usb/usb.h     **** inline void USB_ep0_send(uint8_t size){
 247:usb/usb.h     **** 	USB_ep_in_start(0x80, ep0_buf_in, size);
 248:usb/usb.h     **** }
 249:usb/usb.h     **** void USB_ep0_send_progmem(const uint8_t* addr, uint16_t size);
 250:usb/usb.h     **** 
 251:usb/usb.h     **** inline void USB_ep_wait(uint8_t ep) ATTR_ALWAYS_INLINE;
 252:usb/usb.h     **** inline void USB_ep_wait(uint8_t ep){
 253:usb/usb.h     **** 	while (!USB_ep_done(ep)){};
 254:usb/usb.h     **** }
 255:usb/usb.h     **** 
 256:usb/usb.h     **** /// Select a certain bank of an endpoint for the next transfer
 257:usb/usb.h     **** inline void USB_ep_set_bank(uint8_t ep, uint8_t bank) ATTR_ALWAYS_INLINE;
 258:usb/usb.h     **** inline void USB_ep_set_bank(uint8_t ep, uint8_t bank){
 259:usb/usb.h     **** 	_USB_EP(ep);
 260:usb/usb.h     **** 	if (bank){
 261:usb/usb.h     **** 		LASR16(&(e->STATUS), USB_EP_BANK_bm);
 262:usb/usb.h     **** 	}else{
 263:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BANK_bm);
 264:usb/usb.h     **** 	}
 265:usb/usb.h     **** }
 266:usb/usb.h     **** 
 267:usb/usb.h     **** /// Get the bank 0/1 which will handle the next request on this endpoint
 268:usb/usb.h     **** inline uint8_t USB_ep_get_bank(uint8_t ep) ATTR_ALWAYS_INLINE;
 269:usb/usb.h     **** inline uint8_t USB_ep_get_bank(uint8_t ep){
 270:usb/usb.h     **** 	_USB_EP(ep);
 271:usb/usb.h     **** 	return !!(e->STATUS & USB_EP_BANK_bm);
 272:usb/usb.h     **** }
 273:usb/usb.h     **** 
 274:usb/usb.h     **** 
 275:usb/usb.h     **** // Enable the OUT stage on the default control pipe. This happens automatically
 276:usb/usb.h     **** // upon the return of HandleSetup, but use this function if it needs to happen
 277:usb/usb.h     **** // before returning (e.g. with USB_ep_wait()).
 278:usb/usb.h     **** inline void USB_ep0_enableOut(void) ATTR_ALWAYS_INLINE;
 279:usb/usb.h     **** inline void USB_ep0_enableOut(void){
 280:usb/usb.h     **** 	LACR16(&endpoints[0].out.STATUS, USB_EP_SETUP_bm | USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm | USB_
 281:usb/usb.h     **** }
 282:usb/usb.h     **** 
 283:usb/usb.h     **** bool USB_HandleSetup(void);
 284:usb/usb.h     **** 
 285:usb/usb.h     **** uint16_t CALLBACK_USB_GetDescriptor(const uint16_t wValue,
 286:usb/usb.h     ****                                     const uint8_t wIndex,
 287:usb/usb.h     ****                                     const void** const DescriptorAddress);
 288:usb/usb.h     **** 
 289:usb/usb.h     **** /** Detaches the device from the USB bus. This has the effect of removing the device from any
 290:usb/usb.h     ****  *  attached host, ceasing USB communications. If no host is present, this prevents any host from
 291:usb/usb.h     ****  *  enumerating the device once attached until \ref USB_Attach() is called.
 292:usb/usb.h     ****  */
 293:usb/usb.h     **** static inline void USB_Detach(void) ATTR_ALWAYS_INLINE;
 294:usb/usb.h     **** static inline void USB_Detach(void)
 295:usb/usb.h     **** {
 296:usb/usb.h     **** 	USB.CTRLB &= ~USB_ATTACH_bm;
 297:usb/usb.h     **** }
 298:usb/usb.h     **** 
 299:usb/usb.h     **** /** Attaches the device to the USB bus. This announces the device's presence to any attached
 300:usb/usb.h     ****  *  USB host, starting the enumeration process. If no host is present, attaching the device
 301:usb/usb.h     ****  *  will allow for enumeration once a host is connected to the device.
 302:usb/usb.h     ****  */
 303:usb/usb.h     **** static inline void USB_Attach(void) ATTR_ALWAYS_INLINE;
 304:usb/usb.h     **** static inline void USB_Attach(void)
 305:usb/usb.h     **** {
 306:usb/usb.h     **** 	USB.CTRLB |= USB_ATTACH_bm;
 307:usb/usb.h     **** }
 308:usb/usb.h     **** 
 309:usb/usb.h     **** inline void USB_Evt_Task(void) ATTR_ALWAYS_INLINE;
 310:usb/usb.h     **** inline void USB_Evt_Task(void){
 311:usb/usb.h     **** 	if (USB.STATUS & USB_BUSRST_bm){
 194               		.loc 5 311 0
 195 0090 8091 C204 		lds r24,1218
 196 0094 80FF      		sbrs r24,0
 197 0096 00C0      		rjmp .L2
 312:usb/usb.h     **** 		USB.STATUS &= ~USB_BUSRST_bm;
 198               		.loc 5 312 0
 199 0098 8091 C204 		lds r24,1218
 200 009c 8E7F      		andi r24,lo8(-2)
 201 009e 8283      		std Z+2,r24
 313:usb/usb.h     **** 		USB_Init();
 202               		.loc 5 313 0
 203 00a0 0E94 0000 		call USB_Init
 204 00a4 00C0      		rjmp .L2
 205               	.L9:
 206               	.LBE400:
 207               	.LBE399:
  44:Framework.h   **** 		USB.INTFLAGSACLR = (USB_CRCIF_bm | USB_UNFIF_bm | USB_OVFIF_bm);
 208               		.loc 1 44 0
 209 00a6 8EE0      		ldi r24,lo8(14)
 210 00a8 8287      		std Z+10,r24
 211               	.L2:
 212               	/* epilogue start */
  49:Framework.h   **** 		USB_Evt_Task();
  50:Framework.h   **** 	}
  51:Framework.h   **** }
 213               		.loc 1 51 0
 214 00aa FF91      		pop r31
 215 00ac EF91      		pop r30
 216 00ae BF91      		pop r27
 217 00b0 AF91      		pop r26
 218 00b2 9F91      		pop r25
 219 00b4 8F91      		pop r24
 220 00b6 7F91      		pop r23
 221 00b8 6F91      		pop r22
 222 00ba 5F91      		pop r21
 223 00bc 4F91      		pop r20
 224 00be 3F91      		pop r19
 225 00c0 2F91      		pop r18
 226 00c2 0F90      		pop r0
 227 00c4 0FBE      		out __SREG__,r0
 228 00c6 0F90      		pop r0
 229 00c8 1F90      		pop r1
 230 00ca 1895      		reti
 231               	.L10:
  46:Framework.h   **** 		USB.INTFLAGSACLR = USB_STALLIF_bm;
 232               		.loc 1 46 0
 233 00cc 81E0      		ldi r24,lo8(1)
 234 00ce 8287      		std Z+10,r24
 235 00d0 00C0      		rjmp .L2
 236               	.L8:
  42:Framework.h   **** 		USB.INTFLAGSACLR = USB_SOFIF_bm;
 237               		.loc 1 42 0
 238 00d2 80E8      		ldi r24,lo8(-128)
 239 00d4 8287      		std Z+10,r24
 240 00d6 00C0      		rjmp .L2
 241               		.cfi_endproc
 242               	.LFE58:
 244               	.global	__vector_126
 246               	__vector_126:
 247               	.LFB59:
  52:Framework.h   **** 
  53:Framework.h   **** ISR(USB_TRNCOMPL_vect){
 248               		.loc 1 53 0
 249               		.cfi_startproc
 250 00d8 1F92      		push r1
 251               	.LCFI14:
 252               		.cfi_def_cfa_offset 3
 253               		.cfi_offset 1, -2
 254 00da 0F92      		push r0
 255               	.LCFI15:
 256               		.cfi_def_cfa_offset 4
 257               		.cfi_offset 0, -3
 258 00dc 0FB6      		in r0,__SREG__
 259 00de 0F92      		push r0
 260 00e0 1124      		clr __zero_reg__
 261 00e2 0F93      		push r16
 262               	.LCFI16:
 263               		.cfi_def_cfa_offset 5
 264               		.cfi_offset 16, -4
 265 00e4 2F93      		push r18
 266               	.LCFI17:
 267               		.cfi_def_cfa_offset 6
 268               		.cfi_offset 18, -5
 269 00e6 3F93      		push r19
 270               	.LCFI18:
 271               		.cfi_def_cfa_offset 7
 272               		.cfi_offset 19, -6
 273 00e8 4F93      		push r20
 274               	.LCFI19:
 275               		.cfi_def_cfa_offset 8
 276               		.cfi_offset 20, -7
 277 00ea 5F93      		push r21
 278               	.LCFI20:
 279               		.cfi_def_cfa_offset 9
 280               		.cfi_offset 21, -8
 281 00ec 6F93      		push r22
 282               	.LCFI21:
 283               		.cfi_def_cfa_offset 10
 284               		.cfi_offset 22, -9
 285 00ee 7F93      		push r23
 286               	.LCFI22:
 287               		.cfi_def_cfa_offset 11
 288               		.cfi_offset 23, -10
 289 00f0 8F93      		push r24
 290               	.LCFI23:
 291               		.cfi_def_cfa_offset 12
 292               		.cfi_offset 24, -11
 293 00f2 9F93      		push r25
 294               	.LCFI24:
 295               		.cfi_def_cfa_offset 13
 296               		.cfi_offset 25, -12
 297 00f4 AF93      		push r26
 298               	.LCFI25:
 299               		.cfi_def_cfa_offset 14
 300               		.cfi_offset 26, -13
 301 00f6 BF93      		push r27
 302               	.LCFI26:
 303               		.cfi_def_cfa_offset 15
 304               		.cfi_offset 27, -14
 305 00f8 EF93      		push r30
 306               	.LCFI27:
 307               		.cfi_def_cfa_offset 16
 308               		.cfi_offset 30, -15
 309 00fa FF93      		push r31
 310               	.LCFI28:
 311               		.cfi_def_cfa_offset 17
 312               		.cfi_offset 31, -16
 313               	/* prologue: Signal */
 314               	/* frame size = 0 */
 315               	/* stack size = 16 */
 316               	.L__stack_usage = 16
  54:Framework.h   **** 	USB.FIFOWP = 0;
 317               		.loc 1 54 0
 318 00fc E0EC      		ldi r30,lo8(1216)
 319 00fe F4E0      		ldi r31,hi8(1216)
 320 0100 1482      		std Z+4,__zero_reg__
  55:Framework.h   **** 	USB.INTFLAGSBCLR = USB_SETUPIF_bm | USB_TRNIF_bm;
 321               		.loc 1 55 0
 322 0102 83E0      		ldi r24,lo8(3)
 323 0104 8487      		std Z+12,r24
 324               	.LVL6:
 325               	.LBB457:
 326               	.LBB458:
 327               	.LBB459:
  50:usb/usb_pipe.h **** 	}
  51:usb/usb_pipe.h **** }
  52:usb/usb_pipe.h **** 
  53:usb/usb_pipe.h **** static inline void usb_pipe_reset(const USB_Pipe* p){
  54:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
  55:usb/usb_pipe.h **** 		pipe_reset(p->pipe);
  56:usb/usb_pipe.h **** 		USB_ep_cancel(p->ep);
  57:usb/usb_pipe.h **** 		p->data->flush = 0;
  58:usb/usb_pipe.h **** 		p->data->packet_offset = 0;
  59:usb/usb_pipe.h **** 		p->data->bank = 0;
  60:usb/usb_pipe.h **** 	}
  61:usb/usb_pipe.h **** }
  62:usb/usb_pipe.h **** 
  63:usb/usb_pipe.h **** static inline void _usb_pipe_ep_start(const USB_Pipe* p, uint8_t* data, uint16_t size) ATTR_ALWAYS_
  64:usb/usb_pipe.h **** static inline void _usb_pipe_ep_start(const USB_Pipe* p, uint8_t* data, uint16_t size){
  65:usb/usb_pipe.h **** 	bool bank = 0;
  66:usb/usb_pipe.h **** 
  67:usb/usb_pipe.h **** 	if (p->ep & USB_EP_PP){
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
  70:usb/usb_pipe.h **** 	}
  71:usb/usb_pipe.h **** 
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
  73:usb/usb_pipe.h **** 		USB_ep_start_bank(p->ep, 0, data, size);
  74:usb/usb_pipe.h **** 	}else{
  75:usb/usb_pipe.h **** 		USB_ep_start_bank(p->ep, 1, data, size);
  76:usb/usb_pipe.h **** 	}
  77:usb/usb_pipe.h **** }
  78:usb/usb_pipe.h **** 
  79:usb/usb_pipe.h **** static inline void usb_pipe_handle(const USB_Pipe* p){
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 328               		.loc 2 80 0
 329 0106 2FB7      		in r18,__SREG__
 330               	.LVL7:
 331               	.LBB460:
 332               	.LBB461:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 333               		.loc 3 50 0
 334               	/* #APP */
 335               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 336 0108 F894      		cli
 337               	 ;  0 "" 2
 338               	.LVL8:
 339               	/* #NOAPP */
 340               	.LBE461:
 341               	.LBE460:
 342               	.LBB462:
 343               	.LBB463:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 344               		.loc 5 220 0
 345 010a 8091 0000 		lds r24,endpoints+24
 346 010e 8670      		andi r24,lo8(6)
 347               	.LBE463:
 348               	.LBE462:
  81:usb/usb_pipe.h **** 		if (p->ep & USB_EP_IN){
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 349               		.loc 2 82 0
 350 0110 01F4      		brne .L26
 351               	.LVL9:
 352               	.L12:
 353               	.LBB464:
 354               	.LBB465:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 355               		.loc 3 70 0
 356 0112 2FBF      		out __SREG__,r18
 357               		.loc 3 71 0
 358               	.LBE465:
 359               	.LBE464:
 360               	.LBE459:
 361               	.LBE458:
 362               	.LBE457:
 363               	.LBB503:
 364               	.LBB504:
 314:usb/usb.h     **** 	}
 315:usb/usb.h     **** }
 316:usb/usb.h     **** 
 317:usb/usb.h     **** inline void USB_Task(void) ATTR_ALWAYS_INLINE;
 318:usb/usb.h     **** inline void USB_Task(void){
 319:usb/usb.h     **** 	// Read once to prevent race condition where SETUP packet is interpreted as OUT
 320:usb/usb.h     **** 	uint8_t status = endpoints[0].out.STATUS;
 365               		.loc 5 320 0
 366 0114 8091 0000 		lds r24,endpoints
 367               	.LVL10:
 321:usb/usb.h     **** 
 322:usb/usb.h     **** 	if (status & USB_EP_SETUP_bm){
 368               		.loc 5 322 0
 369 0118 84FD      		sbrc r24,4
 370 011a 00C0      		rjmp .L27
 371               	.L21:
 323:usb/usb.h     **** 		if (!USB_HandleSetup()){
 324:usb/usb.h     **** 			endpoints[0].out.CTRL |= USB_EP_STALL_bm;
 325:usb/usb.h     **** 			endpoints[0].in.CTRL |= USB_EP_STALL_bm; 
 326:usb/usb.h     **** 		}
 327:usb/usb.h     **** 		USB_ep0_enableOut();
 328:usb/usb.h     **** 	}else if(status & USB_EP_TRNCOMPL0_bm){
 372               		.loc 5 328 0
 373 011c 85FD      		sbrc r24,5
 374 011e 00C0      		rjmp .L28
 375               	.LVL11:
 376               	.L11:
 377               	/* epilogue start */
 378               	.LBE504:
 379               	.LBE503:
  56:Framework.h   **** 	usb_pipe_handle(&ep_in);
  57:Framework.h   **** 	USB_Task();
  58:Framework.h   **** }
 380               		.loc 1 58 0
 381 0120 FF91      		pop r31
 382 0122 EF91      		pop r30
 383 0124 BF91      		pop r27
 384 0126 AF91      		pop r26
 385 0128 9F91      		pop r25
 386 012a 8F91      		pop r24
 387 012c 7F91      		pop r23
 388 012e 6F91      		pop r22
 389 0130 5F91      		pop r21
 390 0132 4F91      		pop r20
 391 0134 3F91      		pop r19
 392 0136 2F91      		pop r18
 393 0138 0F91      		pop r16
 394 013a 0F90      		pop r0
 395 013c 0FBE      		out __SREG__,r0
 396 013e 0F90      		pop r0
 397 0140 1F90      		pop r1
 398 0142 1895      		reti
 399               	.LVL12:
 400               	.L26:
 401               	.LBB513:
 402               	.LBB500:
 403               	.LBB497:
 404               	.LBB467:
 405               	.LBB468:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 406               		.loc 4 51 0
 407 0144 3091 0000 		lds r19,ep_in_pipe_data+4
 408               	.LBE468:
 409               	.LBE467:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 410               		.loc 2 83 0
 411 0148 1316      		cp __zero_reg__,r19
 412 014a 04F0      		brlt .+2
 413 014c 00C0      		rjmp .L13
 414               	.LBB469:
 415               	.LBB470:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 416               		.loc 4 62 0
 417 014e 8091 0000 		lds r24,ep_in_pipe_data
 418 0152 9091 0000 		lds r25,ep_in_pipe_data+1
 419               	.LVL13:
 420               	.LBE470:
 421               	.LBE469:
 422               	.LBB471:
 423               	.LBB472:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 424               		.loc 2 68 0
 425 0156 4091 0000 		lds r20,ep_in_data
 426               	.LVL14:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 427               		.loc 2 69 0
 428 015a 51E0      		ldi r21,lo8(1)
 429 015c 4130      		cpi r20,lo8(1)
 430 015e 01F4      		brne .+2
 431 0160 00C0      		rjmp .L29
 432 0162 5093 0000 		sts ep_in_data,r21
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 433               		.loc 2 72 0
 434 0166 4423      		tst r20
 435 0168 01F4      		brne .+2
 436 016a 00C0      		rjmp .L30
 437               	.L15:
 438               	.LVL15:
 439               	.LBB473:
 440               	.LBB474:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 441               		.loc 5 168 0
 442 016c 8093 0000 		sts endpoints+20,r24
 443 0170 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 444               		.loc 5 169 0
 445 0174 40E4      		ldi r20,lo8(64)
 446 0176 50E0      		ldi r21,hi8(64)
 447 0178 4093 0000 		sts endpoints+18,r20
 448 017c 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 449               		.loc 5 176 0
 450 0180 E0E0      		ldi r30,lo8(endpoints+24)
 451 0182 F0E0      		ldi r31,hi8(endpoints+24)
 452               	/* #APP */
 453               	 ;  176 "usb/usb.h" 1
 454 0184 04E1      		ldi r16, 20
 455 0186 0693      		.dc.w 0x9306
 456               		
 457               	 ;  0 "" 2
 458               	.LVL16:
 459               	/* #NOAPP */
 460               	.L16:
 461               	.LBE474:
 462               	.LBE473:
 463               	.LBE472:
 464               	.LBE471:
 465               	.LBB478:
 466               	.LBB479:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 467               		.loc 4 72 0
 468 0188 3150      		subi r19,lo8(-(-1))
 469 018a 3093 0000 		sts ep_in_pipe_data+4,r19
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 470               		.loc 4 73 0
 471 018e 805C      		subi r24,lo8(-(64))
 472 0190 9F4F      		sbci r25,hi8(-(64))
 473 0192 8093 0000 		sts ep_in_pipe_data,r24
 474 0196 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 475               		.loc 4 75 0
 476 019a 30E0      		ldi r19,hi8(ep_in_pipe_buffer+512)
 477 019c 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 478 019e 9307      		cpc r25,r19
 479 01a0 01F0      		breq .+2
 480 01a2 00C0      		rjmp .L12
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 481               		.loc 4 76 0
 482 01a4 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 483 01a6 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 484 01a8 8093 0000 		sts ep_in_pipe_data,r24
 485 01ac 9093 0000 		sts ep_in_pipe_data+1,r25
 486               	.LBE479:
 487               	.LBE478:
 488               	.LBB480:
 489               	.LBB466:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 490               		.loc 3 70 0
 491 01b0 2FBF      		out __SREG__,r18
 492               		.loc 3 71 0
 493               	.LBE466:
 494               	.LBE480:
 495               	.LBE497:
 496               	.LBE500:
 497               	.LBE513:
 498               	.LBB514:
 499               	.LBB511:
 320:usb/usb.h     **** 	uint8_t status = endpoints[0].out.STATUS;
 500               		.loc 5 320 0
 501 01b2 8091 0000 		lds r24,endpoints
 502               	.LVL17:
 322:usb/usb.h     **** 	if (status & USB_EP_SETUP_bm){
 503               		.loc 5 322 0
 504 01b6 84FF      		sbrs r24,4
 505 01b8 00C0      		rjmp .L21
 506               	.LVL18:
 507               	.L27:
 323:usb/usb.h     **** 		if (!USB_HandleSetup()){
 508               		.loc 5 323 0
 509 01ba 0E94 0000 		call USB_HandleSetup
 510               	.LVL19:
 511 01be 8823      		tst r24
 512 01c0 01F4      		brne .L24
 324:usb/usb.h     **** 			endpoints[0].out.CTRL |= USB_EP_STALL_bm;
 513               		.loc 5 324 0
 514 01c2 8091 0000 		lds r24,endpoints+1
 515 01c6 8460      		ori r24,lo8(4)
 516 01c8 8093 0000 		sts endpoints+1,r24
 325:usb/usb.h     **** 			endpoints[0].in.CTRL |= USB_EP_STALL_bm; 
 517               		.loc 5 325 0
 518 01cc 8091 0000 		lds r24,endpoints+9
 519 01d0 8460      		ori r24,lo8(4)
 520 01d2 8093 0000 		sts endpoints+9,r24
 521               	.L24:
 522               	.LBB505:
 523               	.LBB506:
 280:usb/usb.h     **** 	LACR16(&endpoints[0].out.STATUS, USB_EP_SETUP_bm | USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm | USB_
 524               		.loc 5 280 0
 525 01d6 E0E0      		ldi r30,lo8(endpoints)
 526 01d8 F0E0      		ldi r31,hi8(endpoints)
 527               	/* #APP */
 528               	 ;  280 "usb/usb.h" 1
 529 01da 02E7      		ldi r16, 114
 530 01dc 0693      		.dc.w 0x9306
 531               		
 532               	 ;  0 "" 2
 533               	/* #NOAPP */
 534 01de 00C0      		rjmp .L11
 535               	.LVL20:
 536               	.L29:
 537               	.LBE506:
 538               	.LBE505:
 539               	.LBE511:
 540               	.LBE514:
 541               	.LBB515:
 542               	.LBB501:
 543               	.LBB498:
 544               	.LBB481:
 545               	.LBB477:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 546               		.loc 2 69 0
 547 01e0 50E0      		ldi r21,lo8(0)
 548 01e2 5093 0000 		sts ep_in_data,r21
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 549               		.loc 2 72 0
 550 01e6 4423      		tst r20
 551 01e8 01F0      		breq .+2
 552 01ea 00C0      		rjmp .L15
 553               	.L30:
 554               	.LVL21:
 555               	.LBB475:
 556               	.LBB476:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 557               		.loc 5 168 0
 558 01ec 8093 0000 		sts endpoints+28,r24
 559 01f0 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 560               		.loc 5 169 0
 561 01f4 40E4      		ldi r20,lo8(64)
 562 01f6 50E0      		ldi r21,hi8(64)
 563               	.LVL22:
 564 01f8 4093 0000 		sts endpoints+26,r20
 565 01fc 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 566               		.loc 5 174 0
 567 0200 E0E0      		ldi r30,lo8(endpoints+24)
 568 0202 F0E0      		ldi r31,hi8(endpoints+24)
 569               	.LVL23:
 570               	/* #APP */
 571               	 ;  174 "usb/usb.h" 1
 572 0204 02E2      		ldi r16, 34
 573 0206 0693      		.dc.w 0x9306
 574               		
 575               	 ;  0 "" 2
 576               	/* #NOAPP */
 577 0208 00C0      		rjmp .L16
 578               	.LVL24:
 579               	.L28:
 580               	.LBE476:
 581               	.LBE475:
 582               	.LBE477:
 583               	.LBE481:
 584               	.LBE498:
 585               	.LBE501:
 586               	.LBE515:
 587               	.LBB516:
 588               	.LBB512:
 329:usb/usb.h     **** 		EVENT_USB_Device_ControlOUT((uint8_t *) ep0_buf_out, endpoints[0].out.CNT);
 589               		.loc 5 329 0
 590 020a 4091 0000 		lds r20,endpoints+2
 591 020e 5091 0000 		lds r21,endpoints+2+1
 592               	.LVL25:
 593               	.LBB508:
 594               	.LBB509:
 595               		.file 6 "main.c"
   1:main.c        **** #include "Framework.h"
   2:main.c        **** #include <avr/io.h>
   3:main.c        **** #include <inttypes.h>
   4:main.c        **** #include <stdio.h> 
   5:main.c        **** #include <stdlib.h>
   6:main.c        **** #include <util/delay.h>
   7:main.c        **** #include <string.h> 
   8:main.c        **** #include <math.h>
   9:main.c        **** #include "concat/concat.h"
  10:main.c        **** #include "nmea/nmea.h"
  11:main.c        **** #include "uart/uart.h"
  12:main.c        **** #include "gps/gps.h"
  13:main.c        **** #include "gprs/gprs.h"
  14:main.c        **** #include "sms/sms.h"
  15:main.c        **** 
  16:main.c        **** //sample nmea strings for testing parser
  17:main.c        **** char* twilio_number = "+13042493059";
  18:main.c        **** char *message;
  19:main.c        **** bool updating = false;
  20:main.c        **** 
  21:main.c        **** int main(void){
  22:main.c        **** 
  23:main.c        ****   //usb configuration
  24:main.c        **** 	USB_ConfigureClock();
  25:main.c        **** 	USB_Init();
  26:main.c        **** 	USB.INTCTRLA = USB_BUSEVIE_bm | USB_INTLVL_MED_gc;
  27:main.c        **** 	USB.INTCTRLB = USB_TRNIE_bm | USB_SETUPIE_bm;
  28:main.c        **** 	PMIC.CTRL = PMIC_LOLVLEN_bm | PMIC_MEDLVLEN_bm;
  29:main.c        **** 	sei();
  30:main.c        **** 
  31:main.c        ****   //uart init code -- change condition to true when we're ready to communicate with the gps
  32:main.c        **** 	if (true) {
  33:main.c        **** 		gps_init();
  34:main.c        **** 	}
  35:main.c        **** 
  36:main.c        ****   if (false) {
  37:main.c        ****     gprs_init();
  38:main.c        ****   }
  39:main.c        **** 
  40:main.c        ****   //call break and flush to make sure the buffer is cleared
  41:main.c        **** 	break_and_flush();
  42:main.c        **** 
  43:main.c        ****   // parse nmea string and send result over usb
  44:main.c        ****   // char* text_message = parse_nmea();
  45:main.c        **** 
  46:main.c        ****   // char* phonenumber = "+15402095219";
  47:main.c        ****   // send_message(phonenumber, text_message, &USARTD0);
  48:main.c        ****   // send_message(twilio_number, text_message, &USARTD0);
  49:main.c        ****   gps_receive();
  50:main.c        ****   power_off_gps();
  51:main.c        ****   // SimpleReceive(&USARTD0);
  52:main.c        **** 
  53:main.c        **** 	for (;;){
  54:main.c        ****     //heart of the firmware logic goes here
  55:main.c        **** 	}
  56:main.c        **** }
  57:main.c        **** 
  58:main.c        **** #define stringify(s) #s
  59:main.c        **** 
  60:main.c        **** const char PROGMEM hwversion[] = stringify(HW_VERSION);
  61:main.c        **** const char PROGMEM fwversion[] = stringify(FW_VERSION);
  62:main.c        **** 
  63:main.c        **** uint8_t usb_cmd = 0;
  64:main.c        **** uint8_t cmd_data = 0;
  65:main.c        **** 
  66:main.c        **** // void send_usb_data(char *message) {
  67:main.c        **** // 	for (uint8_t = 0; i < 64; i++) ep0_buf_in[i] = 0;
  68:main.c        **** // 	int l = strlen(message);
  69:main.c        **** // 	for (int i=0; i<l; i++) {
  70:main.c        **** // 		ep0_buf_in[i] = message[i];
  71:main.c        **** // 	}
  72:main.c        **** // }
  73:main.c        **** 
  74:main.c        **** /** Event handler for the library USB Control Request reception event. */
  75:main.c        **** bool EVENT_USB_Device_ControlRequest(USB_Request_Header_t* req){
  76:main.c        **** 	// zero out ep0_buf_in
  77:main.c        **** 	for (uint8_t i = 0; i < 64; i++) ep0_buf_in[i] = 0;
  78:main.c        **** 	usb_cmd = 0;
  79:main.c        **** 	if ((req->bmRequestType & CONTROL_REQTYPE_TYPE) == REQTYPE_VENDOR){
  80:main.c        **** 		switch(req->bRequest){
  81:main.c        **** 			case 0x00: // Info
  82:main.c        **** 				if (req->wIndex == 0){
  83:main.c        **** 					USB_ep0_send_progmem((uint8_t*)hwversion, sizeof(hwversion));
  84:main.c        **** 				}else if (req->wIndex == 1){
  85:main.c        **** 					USB_ep0_send_progmem((uint8_t*)fwversion, sizeof(fwversion));
  86:main.c        **** 				}
  87:main.c        **** 				return true;
  88:main.c        **** 			case 0x02:
  89:main.c        **** 				{
  90:main.c        **** 					int l = strlen(message);
  91:main.c        **** 					for (uint8_t i=0; i<64; i++) {
  92:main.c        **** 						ep0_buf_in[i] = message[i];
  93:main.c        **** 					}
  94:main.c        **** 					USB_ep0_send(l);
  95:main.c        **** 					return true;
  96:main.c        **** 				}
  97:main.c        **** 			case 0x08:
  98:main.c        **** 				* ((uint8_t *) req->wIndex) = req->wValue;
  99:main.c        **** 				USB_ep0_send(0);
 100:main.c        **** 				return true;
 101:main.c        **** 			case 0x09:
 102:main.c        **** 				ep0_buf_in[0] = * ((uint8_t *) req->wIndex);
 103:main.c        **** 				USB_ep0_send(1);
 104:main.c        **** 				return true;
 105:main.c        **** 			case 0x16:
 106:main.c        **** 				* ((uint16_t *) req->wIndex) = req->wValue;
 107:main.c        **** 				USB_ep0_send(0);
 108:main.c        **** 				return true;
 109:main.c        **** 			case 0x17:{
 110:main.c        **** 				uint16_t *addr;
 111:main.c        **** 				addr = (uint16_t *) req->wIndex;
 112:main.c        **** 				ep0_buf_in[0] = *addr & 0xFF;
 113:main.c        **** 				ep0_buf_in[1] = *addr >> 8;
 114:main.c        **** 				USB_ep0_send(2);}
 115:main.c        **** 				return true;
 116:main.c        **** 			// read EEPROM	
 117:main.c        **** 			case 0xE0: 
 118:main.c        **** 				eeprom_read_block(ep0_buf_in, (void*)(req->wIndex*64), 64);
 119:main.c        **** 				USB_ep0_send(64);
 120:main.c        **** 				return true;
 121:main.c        **** 
 122:main.c        **** 			// write EEPROM	
 123:main.c        **** 			case 0xE1: 
 124:main.c        **** 				usb_cmd = req->bRequest;
 125:main.c        **** 				cmd_data = req->wIndex;
 126:main.c        **** 				USB_ep0_send(0);
 127:main.c        **** 				return true; // Wait for OUT data (expecting an OUT transfer)
 128:main.c        **** 
 129:main.c        **** 			// disconnect from USB, jump to bootloader	
 130:main.c        **** 			case 0xBB: 
 131:main.c        **** 				USB_enter_bootloader();
 132:main.c        **** 				return true;
 133:main.c        **** 		}
 134:main.c        **** 	}
 135:main.c        **** 	return false;
 136:main.c        **** }
 137:main.c        **** 
 138:main.c        **** void EVENT_USB_Device_ControlOUT(uint8_t* buf, uint8_t count){
 139:main.c        **** 	switch (usb_cmd){
 596               		.loc 6 139 0
 597 0212 8091 0000 		lds r24,usb_cmd
 598               	.LVL26:
 599 0216 813E      		cpi r24,lo8(-31)
 600 0218 01F4      		brne .L24
 140:main.c        **** 		case 0xE1: // Write EEPROM
 141:main.c        **** 			eeprom_update_block(buf, (void*)(cmd_data*64), count);
 601               		.loc 6 141 0
 602 021a 6091 0000 		lds r22,cmd_data
 603 021e 70E0      		ldi r23,lo8(0)
 604 0220 0024      		clr __tmp_reg__
 605 0222 7695      		lsr r23
 606 0224 6795      		ror r22
 607 0226 0794      		ror __tmp_reg__
 608 0228 7695      		lsr r23
 609 022a 6795      		ror r22
 610 022c 0794      		ror __tmp_reg__
 611 022e 762F      		mov r23,r22
 612 0230 602D      		mov r22,__tmp_reg__
 613 0232 80E0      		ldi r24,lo8(ep0_buf_out)
 614 0234 90E0      		ldi r25,hi8(ep0_buf_out)
 615 0236 50E0      		ldi r21,lo8(0)
 616 0238 0E94 0000 		call __eeupd_block_x32a4u
 617               	.LVL27:
 618               	.LBE509:
 619               	.LBE508:
 620               	.LBB510:
 621               	.LBB507:
 280:usb/usb.h     **** 	LACR16(&endpoints[0].out.STATUS, USB_EP_SETUP_bm | USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm | USB_
 622               		.loc 5 280 0
 623 023c E0E0      		ldi r30,lo8(endpoints)
 624 023e F0E0      		ldi r31,hi8(endpoints)
 625               	/* #APP */
 626               	 ;  280 "usb/usb.h" 1
 627 0240 02E7      		ldi r16, 114
 628 0242 0693      		.dc.w 0x9306
 629               		
 630               	 ;  0 "" 2
 631               	/* #NOAPP */
 632 0244 00C0      		rjmp .L11
 633               	.LVL28:
 634               	.L13:
 635               	.LBE507:
 636               	.LBE510:
 637               	.LBE512:
 638               	.LBE516:
 639               	.LBB517:
 640               	.LBB502:
 641               	.LBB499:
  84:usb/usb_pipe.h **** 					_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->pipe->size);
  85:usb/usb_pipe.h **** 					pipe_done_read(p->pipe);
  86:usb/usb_pipe.h **** 				}else if (p->features & PIPE_ENABLE_FLUSH){
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 642               		.loc 2 87 0
 643 0246 8091 0000 		lds r24,ep_in_data+1
 644 024a 8130      		cpi r24,lo8(1)
 645 024c 01F0      		breq .L31
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
  89:usb/usb_pipe.h **** 						// Send short packet
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 646               		.loc 2 91 0
 647 024e 8230      		cpi r24,lo8(2)
 648 0250 01F0      		breq .+2
 649 0252 00C0      		rjmp .L12
 650               	.LVL29:
 651               	.LBB482:
 652               	.LBB483:
 653               	.LBB484:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 654               		.loc 5 228 0
 655 0254 8091 0000 		lds r24,endpoints+24
 656 0258 8670      		andi r24,lo8(6)
 657               	.LBE484:
 658               	.LBE483:
 659               	.LBE482:
 660               		.loc 2 91 0
 661 025a 8630      		cpi r24,lo8(6)
 662 025c 01F0      		breq .+2
 663 025e 00C0      		rjmp .L12
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 664               		.loc 2 92 0
 665 0260 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 666               		.loc 2 93 0
 667 0264 1092 0000 		sts ep_in_data+2,__zero_reg__
 668 0268 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 669               	.LBB485:
 670               	.LBB486:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 671               		.loc 4 90 0
 672 026c 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 673               		.loc 4 91 0
 674 0270 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 675 0272 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 676 0274 8093 0000 		sts ep_in_pipe_data+2,r24
 677 0278 9093 0000 		sts ep_in_pipe_data+2+1,r25
 678 027c 8093 0000 		sts ep_in_pipe_data,r24
 679 0280 9093 0000 		sts ep_in_pipe_data+1,r25
 680               	.LVL30:
 681 0284 00C0      		rjmp .L12
 682               	.LVL31:
 683               	.L31:
 684               	.LBE486:
 685               	.LBE485:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 686               		.loc 2 88 0
 687 0286 82E0      		ldi r24,lo8(2)
 688 0288 8093 0000 		sts ep_in_data+1,r24
 689               	.LBB487:
 690               	.LBB488:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 691               		.loc 4 62 0
 692 028c 7091 0000 		lds r23,ep_in_pipe_data
 693 0290 6091 0000 		lds r22,ep_in_pipe_data+1
 694               	.LBE488:
 695               	.LBE487:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 696               		.loc 2 90 0
 697 0294 8091 0000 		lds r24,ep_in_data+2
 698 0298 9091 0000 		lds r25,ep_in_data+2+1
 699               	.LVL32:
 700               	.LBB489:
 701               	.LBB490:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 702               		.loc 2 68 0
 703 029c 3091 0000 		lds r19,ep_in_data
 704               	.LVL33:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 705               		.loc 2 69 0
 706 02a0 41E0      		ldi r20,lo8(1)
 707 02a2 3130      		cpi r19,lo8(1)
 708 02a4 01F0      		breq .L32
 709               	.L19:
 710 02a6 4093 0000 		sts ep_in_data,r20
 711               	.LBB491:
 712               	.LBB492:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 713               		.loc 5 168 0
 714 02aa 472F      		mov r20,r23
 715 02ac 562F      		mov r21,r22
 716               	.LBE492:
 717               	.LBE491:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 718               		.loc 2 72 0
 719 02ae 3323      		tst r19
 720 02b0 01F4      		brne .L20
 721               	.LVL34:
 722               	.LBB494:
 723               	.LBB493:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 724               		.loc 5 168 0
 725 02b2 4093 0000 		sts endpoints+28,r20
 726 02b6 5093 0000 		sts endpoints+28+1,r21
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 727               		.loc 5 169 0
 728 02ba 8093 0000 		sts endpoints+26,r24
 729 02be 9093 0000 		sts endpoints+26+1,r25
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 730               		.loc 5 174 0
 731 02c2 E0E0      		ldi r30,lo8(endpoints+24)
 732 02c4 F0E0      		ldi r31,hi8(endpoints+24)
 733               	.LVL35:
 734               	/* #APP */
 735               	 ;  174 "usb/usb.h" 1
 736 02c6 02E2      		ldi r16, 34
 737 02c8 0693      		.dc.w 0x9306
 738               		
 739               	 ;  0 "" 2
 740               	/* #NOAPP */
 741 02ca 00C0      		rjmp .L12
 742               	.LVL36:
 743               	.L20:
 744               	.LBE493:
 745               	.LBE494:
 746               	.LBB495:
 747               	.LBB496:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 748               		.loc 5 168 0
 749 02cc 4093 0000 		sts endpoints+20,r20
 750 02d0 5093 0000 		sts endpoints+20+1,r21
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 751               		.loc 5 169 0
 752 02d4 8093 0000 		sts endpoints+18,r24
 753 02d8 9093 0000 		sts endpoints+18+1,r25
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 754               		.loc 5 176 0
 755 02dc E0E0      		ldi r30,lo8(endpoints+24)
 756 02de F0E0      		ldi r31,hi8(endpoints+24)
 757               	/* #APP */
 758               	 ;  176 "usb/usb.h" 1
 759 02e0 04E1      		ldi r16, 20
 760 02e2 0693      		.dc.w 0x9306
 761               		
 762               	 ;  0 "" 2
 763               	/* #NOAPP */
 764 02e4 00C0      		rjmp .L12
 765               	.LVL37:
 766               	.L32:
 767               	.LBE496:
 768               	.LBE495:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 769               		.loc 2 69 0
 770 02e6 40E0      		ldi r20,lo8(0)
 771 02e8 00C0      		rjmp .L19
 772               	.LBE490:
 773               	.LBE489:
 774               	.LBE499:
 775               	.LBE502:
 776               	.LBE517:
 777               		.cfi_endproc
 778               	.LFE59:
 780               	.global	send_string
 782               	send_string:
 783               	.LFB61:
 784               		.file 7 "concat/concat.h"
   1:concat/concat.h **** void send_string(char* s);
   2:concat/concat.h **** char* concat(char*, char*);
   3:concat/concat.h **** 
   4:concat/concat.h **** void send_string(char* s) {
 785               		.loc 7 4 0
 786               		.cfi_startproc
 787               	.LVL38:
 788 02ea AF92      		push r10
 789               	.LCFI29:
 790               		.cfi_def_cfa_offset 3
 791               		.cfi_offset 10, -2
 792 02ec BF92      		push r11
 793               	.LCFI30:
 794               		.cfi_def_cfa_offset 4
 795               		.cfi_offset 11, -3
 796 02ee CF92      		push r12
 797               	.LCFI31:
 798               		.cfi_def_cfa_offset 5
 799               		.cfi_offset 12, -4
 800 02f0 DF92      		push r13
 801               	.LCFI32:
 802               		.cfi_def_cfa_offset 6
 803               		.cfi_offset 13, -5
 804 02f2 EF92      		push r14
 805               	.LCFI33:
 806               		.cfi_def_cfa_offset 7
 807               		.cfi_offset 14, -6
 808 02f4 FF92      		push r15
 809               	.LCFI34:
 810               		.cfi_def_cfa_offset 8
 811               		.cfi_offset 15, -7
 812 02f6 0F93      		push r16
 813               	.LCFI35:
 814               		.cfi_def_cfa_offset 9
 815               		.cfi_offset 16, -8
 816 02f8 1F93      		push r17
 817               	.LCFI36:
 818               		.cfi_def_cfa_offset 10
 819               		.cfi_offset 17, -9
 820 02fa CF93      		push r28
 821               	.LCFI37:
 822               		.cfi_def_cfa_offset 11
 823               		.cfi_offset 28, -10
 824 02fc DF93      		push r29
 825               	.LCFI38:
 826               		.cfi_def_cfa_offset 12
 827               		.cfi_offset 29, -11
 828               	/* prologue: function */
 829               	/* frame size = 0 */
 830               	/* stack size = 10 */
 831               	.L__stack_usage = 10
   5:concat/concat.h ****   while (*s != '\0' && s != NULL) {  
 832               		.loc 7 5 0
 833 02fe FC01      		movw r30,r24
 834 0300 2081      		ld r18,Z
 835 0302 2223      		tst r18
 836 0304 01F4      		brne .+2
 837 0306 00C0      		rjmp .L34
 838 0308 0097      		sbiw r24,0
 839 030a 01F4      		brne .+2
 840 030c 00C0      		rjmp .L34
   4:concat/concat.h **** void send_string(char* s) {
 841               		.loc 7 4 0
 842 030e 6C01      		movw r12,r24
 843 0310 0894      		sec
 844 0312 C11C      		adc r12,__zero_reg__
 845 0314 D11C      		adc r13,__zero_reg__
 846               	.LBB683:
 847               	.LBB684:
 848               	.LBB685:
 849               	.LBB686:
 850               	.LBB687:
 851               	.LBB688:
 852               	.LBB689:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 853               		.loc 4 57 0
 854 0316 46E0      		ldi r20,lo8(6)
 855               	.LBE689:
 856               	.LBE688:
 857               	.LBE687:
 858               	.LBE686:
 859               	.LBE685:
 860               	.LBB702:
 861               	.LBB703:
 862               	.LBB704:
 863               	.LBB705:
 864               	.LBB706:
 865               	.LBB707:
 866               	.LBB708:
 867               	.LBB709:
 868               	.LBB710:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 869               		.loc 5 220 0
 870 0318 60E0      		ldi r22,lo8(endpoints+24)
 871 031a 70E0      		ldi r23,hi8(endpoints+24)
 872               	.LBE710:
 873               	.LBE709:
 874               	.LBB712:
 875               	.LBB713:
 876               		.loc 4 91 0
 877 031c 30E0      		ldi r19,lo8(ep_in_pipe_buffer)
 878 031e A32E      		mov r10,r19
 879 0320 30E0      		ldi r19,hi8(ep_in_pipe_buffer)
 880 0322 B32E      		mov r11,r19
 881               	.LBE713:
 882               	.LBE712:
 883               	.LBB716:
 884               	.LBB717:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 885               		.loc 2 69 0
 886 0324 C1E0      		ldi r28,lo8(1)
 887 0326 D0E0      		ldi r29,hi8(1)
 888               	.LBE717:
 889               	.LBE716:
 890               	.LBB726:
 891               	.LBB727:
 892               	.LBB728:
 893               	.LBB729:
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 894               		.loc 5 169 0
 895 0328 50E4      		ldi r21,lo8(64)
 896 032a E52E      		mov r14,r21
 897 032c F12C      		mov r15,__zero_reg__
 898               	.LVL39:
 899               	.L72:
 900               	.LBE729:
 901               	.LBE728:
 902               	.LBE727:
 903               	.LBE726:
 904               	.LBE708:
 905               	.LBE707:
 906               	.LBE706:
 907               	.LBE705:
 908               	.LBE704:
 909               	.LBE703:
 910               	.LBE702:
 911               	.LBB782:
 912               	.LBB700:
 913               	.LBB698:
  94:usb/usb_pipe.h **** 						pipe_reset(p->pipe);
  95:usb/usb_pipe.h **** 					}
  96:usb/usb_pipe.h **** 				}
  97:usb/usb_pipe.h **** 			}
  98:usb/usb_pipe.h **** 		}else{
  99:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep) && pipe_can_write(p->pipe) >= 1){
 100:usb/usb_pipe.h **** 				_usb_pipe_ep_start(p, pipe_write_ptr(p->pipe), p->pipe->size);
 101:usb/usb_pipe.h **** 				pipe_done_write(p->pipe);
 102:usb/usb_pipe.h **** 			}
 103:usb/usb_pipe.h **** 		}
 104:usb/usb_pipe.h **** 	}
 105:usb/usb_pipe.h **** }
 106:usb/usb_pipe.h **** 
 107:usb/usb_pipe.h **** static inline void usb_pipe_flush(const USB_Pipe* p) ATTR_ALWAYS_INLINE;
 108:usb/usb_pipe.h **** static inline void usb_pipe_flush(const USB_Pipe* p){
 109:usb/usb_pipe.h **** 	GCC_ASSERT(p->features&PIPE_ENABLE_FLUSH && p->ep&USB_EP_IN);
 110:usb/usb_pipe.h **** 	p->data->flush = 1;
 111:usb/usb_pipe.h **** 	usb_pipe_handle(p);
 112:usb/usb_pipe.h **** }
 113:usb/usb_pipe.h **** 
 114:usb/usb_pipe.h **** static inline bool usb_pipe_flush_done(const USB_Pipe* p) ATTR_ALWAYS_INLINE;
 115:usb/usb_pipe.h **** static inline bool usb_pipe_flush_done(const USB_Pipe* p){
 116:usb/usb_pipe.h **** 	GCC_ASSERT(p->features&PIPE_ENABLE_FLUSH);
 117:usb/usb_pipe.h **** 	return p->data->flush;
 118:usb/usb_pipe.h **** }
 119:usb/usb_pipe.h **** 
 120:usb/usb_pipe.h **** static inline bool usb_pipe_can_write(const USB_Pipe* p) ATTR_ALWAYS_INLINE;
 121:usb/usb_pipe.h **** static inline bool usb_pipe_can_write(const USB_Pipe* p){
 122:usb/usb_pipe.h **** 	bool r;
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 914               		.loc 2 123 0
 915 032e 9FB7      		in r25,__SREG__
 916               	.LVL40:
 917               	.LBB691:
 918               	.LBB692:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 919               		.loc 3 50 0
 920               	/* #APP */
 921               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 922 0330 F894      		cli
 923               	 ;  0 "" 2
 924               	.LVL41:
 925               	/* #NOAPP */
 926               	.LBE692:
 927               	.LBE691:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 928               		.loc 2 124 0
 929 0332 8091 0000 		lds r24,ep_in_data+1
 930 0336 8823      		tst r24
 931 0338 01F0      		breq .L74
 932               	.L64:
 125:usb/usb_pipe.h **** 			r = false;
 933               		.loc 2 125 0
 934 033a 80E0      		ldi r24,lo8(0)
 935               	.L35:
 936               	.LBB694:
 937               	.LBB695:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 938               		.loc 3 70 0
 939 033c 9FBF      		out __SREG__,r25
 940               		.loc 3 71 0
 941               	.LBE695:
 942               	.LBE694:
 943               	.LBE698:
 944               	.LBE700:
 945               	.LBE782:
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
 946               		.loc 1 20 0
 947 033e 8823      		tst r24
 948 0340 01F0      		breq .L72
 949               	.LVL42:
 950               	.LBB783:
 951               	.LBB784:
 126:usb/usb_pipe.h **** 		}else{
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 128:usb/usb_pipe.h **** 		}
 129:usb/usb_pipe.h **** 	}
 130:usb/usb_pipe.h **** 	return r;
 131:usb/usb_pipe.h **** }
 132:usb/usb_pipe.h **** 
 133:usb/usb_pipe.h **** static inline uint8_t* usb_pipe_write_ptr(const USB_Pipe* p){
 134:usb/usb_pipe.h **** 	return pipe_write_ptr(p->pipe);
 135:usb/usb_pipe.h **** }
 136:usb/usb_pipe.h **** 
 137:usb/usb_pipe.h **** static inline void usb_pipe_done_write(const USB_Pipe* p){
 138:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 139:usb/usb_pipe.h **** 		pipe_done_write(p->pipe);
 140:usb/usb_pipe.h **** 	}
 141:usb/usb_pipe.h **** }
 142:usb/usb_pipe.h **** 
 143:usb/usb_pipe.h **** static inline bool usb_pipe_can_read(const USB_Pipe* p) ATTR_ALWAYS_INLINE;
 144:usb/usb_pipe.h **** static inline bool usb_pipe_can_read(const USB_Pipe* p){
 145:usb/usb_pipe.h **** 	bool r;
 146:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 147:usb/usb_pipe.h **** 		r = pipe_can_read(p->pipe) > 0;
 148:usb/usb_pipe.h **** 	}
 149:usb/usb_pipe.h **** 	return r;
 150:usb/usb_pipe.h **** }
 151:usb/usb_pipe.h **** 
 152:usb/usb_pipe.h **** static inline uint8_t* usb_pipe_read_ptr(const USB_Pipe* p){
 153:usb/usb_pipe.h **** 	return pipe_read_ptr(p->pipe);
 154:usb/usb_pipe.h **** }
 155:usb/usb_pipe.h **** 
 156:usb/usb_pipe.h **** static inline void usb_pipe_done_read(const USB_Pipe* p){
 157:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 158:usb/usb_pipe.h **** 		pipe_done_read(p->pipe);
 159:usb/usb_pipe.h **** 	}
 160:usb/usb_pipe.h **** }
 161:usb/usb_pipe.h **** 
 162:usb/usb_pipe.h **** static inline uint8_t usb_pipe_read_byte(const USB_Pipe* p){
 163:usb/usb_pipe.h **** 	uint8_t r = p->pipe->data->read_ptr[p->data->packet_offset++];
 164:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 165:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 166:usb/usb_pipe.h **** 			p->data->packet_offset = 0;
 167:usb/usb_pipe.h **** 			pipe_done_read(p->pipe);
 168:usb/usb_pipe.h **** 			usb_pipe_handle(p);
 169:usb/usb_pipe.h **** 		}
 170:usb/usb_pipe.h **** 	}
 171:usb/usb_pipe.h **** 	return r;
 172:usb/usb_pipe.h **** }
 173:usb/usb_pipe.h **** 
 174:usb/usb_pipe.h **** static inline void usb_pipe_write_byte(const USB_Pipe* p, uint8_t v){
 175:usb/usb_pipe.h **** 	p->pipe->data->write_ptr[p->data->packet_offset++] = v;
 952               		.loc 2 175 0
 953 0342 8091 0000 		lds r24,ep_in_data+2
 954 0346 9091 0000 		lds r25,ep_in_data+2+1
 955 034a E091 0000 		lds r30,ep_in_pipe_data+2
 956 034e F091 0000 		lds r31,ep_in_pipe_data+2+1
 957 0352 E80F      		add r30,r24
 958 0354 F91F      		adc r31,r25
 959 0356 2083      		st Z,r18
 960 0358 0196      		adiw r24,1
 961 035a 8093 0000 		sts ep_in_data+2,r24
 962 035e 9093 0000 		sts ep_in_data+2+1,r25
 176:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 963               		.loc 2 176 0
 964 0362 8034      		cpi r24,64
 965 0364 9105      		cpc r25,__zero_reg__
 966 0366 01F0      		breq .L75
 967               	.LBE784:
 968               	.LBE783:
 969               	.LBE684:
 970               	.LBE683:
 971               		.loc 7 5 0
 972 0368 F601      		movw r30,r12
 973 036a 2191      		ld r18,Z+
 974               	.LVL43:
 975 036c 2223      		tst r18
 976 036e 01F4      		brne .+2
 977 0370 00C0      		rjmp .L34
 978               	.LVL44:
 979               	.L77:
 980               		.loc 7 5 0 is_stmt 0 discriminator 2
 981 0372 C114      		cp r12,__zero_reg__
 982 0374 D104      		cpc r13,__zero_reg__
 983 0376 01F4      		brne .+2
 984 0378 00C0      		rjmp .L34
 985               		.loc 7 5 0
 986 037a 6F01      		movw r12,r30
 987               	.LBB792:
 988               	.LBB789:
 989               	.LBB785:
 990               	.LBB701:
 991               	.LBB699:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 992               		.loc 2 123 0 is_stmt 1
 993 037c 9FB7      		in r25,__SREG__
 994               	.LVL45:
 995               	.LBB696:
 996               	.LBB693:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 997               		.loc 3 50 0
 998               	/* #APP */
 999               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 1000 037e F894      		cli
 1001               	 ;  0 "" 2
 1002               	/* #NOAPP */
 1003               	.LBE693:
 1004               	.LBE696:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 1005               		.loc 2 124 0
 1006 0380 8091 0000 		lds r24,ep_in_data+1
 1007 0384 8823      		tst r24
 1008 0386 01F4      		brne .L64
 1009               	.LVL46:
 1010               	.L74:
 1011               	.LBB697:
 1012               	.LBB690:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 1013               		.loc 4 57 0
 1014 0388 8091 0000 		lds r24,ep_in_pipe_data+4
 1015 038c 342F      		mov r19,r20
 1016 038e 381B      		sub r19,r24
 1017               	.LBE690:
 1018               	.LBE697:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 1019               		.loc 2 127 0
 1020 0390 81E0      		ldi r24,lo8(1)
 1021 0392 1316      		cp __zero_reg__,r19
 1022 0394 04F0      		brlt .L35
 1023 0396 00C0      		rjmp .L64
 1024               	.LVL47:
 1025               	.L75:
 1026               	.LBE699:
 1027               	.LBE701:
 1028               	.LBE785:
 1029               	.LBB786:
 1030               	.LBB779:
 1031               	.LBB776:
 1032               	.LBB773:
 177:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 1033               		.loc 2 177 0
 1034 0398 BFB7      		in r27,__SREG__
 1035               	.LVL48:
 1036               	.LBB764:
 1037               	.LBB765:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 1038               		.loc 3 50 0
 1039               	/* #APP */
 1040               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 1041 039a F894      		cli
 1042               	 ;  0 "" 2
 1043               	.LVL49:
 1044               	/* #NOAPP */
 1045               	.LBE765:
 1046               	.LBE764:
 178:usb/usb_pipe.h **** 			p->data->packet_offset = 0;
 1047               		.loc 2 178 0
 1048 039c 1092 0000 		sts ep_in_data+2,__zero_reg__
 1049 03a0 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 1050               	.LVL50:
 1051               	.LBB766:
 1052               	.LBB767:
  81:usb/pipe.h    **** 	pipe->data->count += 1;
 1053               		.loc 4 81 0
 1054 03a4 8091 0000 		lds r24,ep_in_pipe_data+4
 1055 03a8 8F5F      		subi r24,lo8(-(1))
 1056 03aa 8093 0000 		sts ep_in_pipe_data+4,r24
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
 1057               		.loc 4 82 0
 1058 03ae 8091 0000 		lds r24,ep_in_pipe_data+2
 1059 03b2 9091 0000 		lds r25,ep_in_pipe_data+2+1
 1060 03b6 805C      		subi r24,lo8(-(64))
 1061 03b8 9F4F      		sbci r25,hi8(-(64))
 1062 03ba 8093 0000 		sts ep_in_pipe_data+2,r24
 1063 03be 9093 0000 		sts ep_in_pipe_data+2+1,r25
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
 1064               		.loc 4 84 0
 1065 03c2 F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 1066 03c4 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 1067 03c6 9F07      		cpc r25,r31
 1068 03c8 01F4      		brne .L39
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
 1069               		.loc 4 85 0
 1070 03ca A092 0000 		sts ep_in_pipe_data+2,r10
 1071 03ce B092 0000 		sts ep_in_pipe_data+2+1,r11
 1072               	.L39:
 1073               	.LVL51:
 1074               	.LBE767:
 1075               	.LBE766:
 1076               	.LBB768:
 1077               	.LBB761:
 1078               	.LBB758:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 1079               		.loc 2 80 0
 1080 03d2 5FB7      		in r21,__SREG__
 1081               	.LVL52:
 1082               	.LBB736:
 1083               	.LBB737:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 1084               		.loc 3 50 0
 1085               	/* #APP */
 1086               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 1087 03d4 F894      		cli
 1088               	 ;  0 "" 2
 1089               	.LVL53:
 1090               	/* #NOAPP */
 1091               	.LBE737:
 1092               	.LBE736:
 1093               	.LBB738:
 1094               	.LBB711:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 1095               		.loc 5 220 0
 1096 03d6 8091 0000 		lds r24,endpoints+24
 1097 03da 8670      		andi r24,lo8(6)
 1098               	.LBE711:
 1099               	.LBE738:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 1100               		.loc 2 82 0
 1101 03dc 01F0      		breq .+2
 1102 03de 00C0      		rjmp .L76
 1103               	.LVL54:
 1104               	.L40:
 1105               	.LBB739:
 1106               	.LBB740:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 1107               		.loc 3 70 0
 1108 03e0 5FBF      		out __SREG__,r21
 1109               		.loc 3 71 0
 1110               	.LVL55:
 1111               	.LBE740:
 1112               	.LBE739:
 1113               	.LBE758:
 1114               	.LBE761:
 1115               	.LBE768:
 1116               	.LBB769:
 1117               	.LBB770:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 1118               		.loc 3 70 0
 1119 03e2 BFBF      		out __SREG__,r27
 1120               		.loc 3 71 0
 1121               	.LBE770:
 1122               	.LBE769:
 1123               	.LBE773:
 1124               	.LBE776:
 1125               	.LBE779:
 1126               	.LBE786:
 1127               	.LBE789:
 1128               	.LBE792:
 1129               		.loc 7 5 0
 1130 03e4 F601      		movw r30,r12
 1131 03e6 2191      		ld r18,Z+
 1132 03e8 2223      		tst r18
 1133 03ea 01F0      		breq .+2
 1134 03ec 00C0      		rjmp .L77
 1135               	.LVL56:
 1136               	.L34:
 1137               	.LBB793:
 1138               	.LBB794:
 1139               	.LBB795:
 1140               	.LBB796:
 110:usb/usb_pipe.h **** 	p->data->flush = 1;
 1141               		.loc 2 110 0
 1142 03ee 81E0      		ldi r24,lo8(1)
 1143 03f0 8093 0000 		sts ep_in_data+1,r24
 1144               	.LVL57:
 1145               	.LBB797:
 1146               	.LBB798:
 1147               	.LBB799:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 1148               		.loc 2 80 0
 1149 03f4 2FB7      		in r18,__SREG__
 1150               	.LVL58:
 1151               	.LBB800:
 1152               	.LBB801:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 1153               		.loc 3 50 0
 1154               	/* #APP */
 1155               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 1156 03f6 F894      		cli
 1157               	 ;  0 "" 2
 1158               	.LVL59:
 1159               	/* #NOAPP */
 1160               	.LBE801:
 1161               	.LBE800:
 1162               	.LBB802:
 1163               	.LBB803:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 1164               		.loc 5 220 0
 1165 03f8 8091 0000 		lds r24,endpoints+24
 1166 03fc 8670      		andi r24,lo8(6)
 1167               	.LBE803:
 1168               	.LBE802:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 1169               		.loc 2 82 0
 1170 03fe 01F0      		breq .+2
 1171 0400 00C0      		rjmp .L78
 1172               	.LVL60:
 1173               	.L50:
 1174               	.LBB804:
 1175               	.LBB805:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 1176               		.loc 3 70 0
 1177 0402 2FBF      		out __SREG__,r18
 1178               		.loc 3 71 0
 1179               	.LBE805:
 1180               	.LBE804:
 1181               	.LBE799:
 1182               	.LBE798:
 1183               	.LBE797:
 1184               	.LBE796:
 1185               	.LBE795:
  27:Framework.h   ****     USB.INTFLAGSBSET = USB_TRNIF_bm;
 1186               		.loc 1 27 0
 1187 0404 82E0      		ldi r24,lo8(2)
 1188 0406 E0EC      		ldi r30,lo8(1216)
 1189 0408 F4E0      		ldi r31,hi8(1216)
 1190 040a 8587      		std Z+13,r24
 1191               	.LBB841:
 1192               	.LBB842:
 1193               	.LBB843:
 1194               	.LBB844:
 1195               	.LBB845:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 1196               		.loc 4 57 0
 1197 040c 36E0      		ldi r19,lo8(6)
 1198               	.LVL61:
 1199               	.L59:
 1200               	.LBE845:
 1201               	.LBE844:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 1202               		.loc 2 123 0
 1203 040e 9FB7      		in r25,__SREG__
 1204               	.LVL62:
 1205               	.LBB847:
 1206               	.LBB848:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 1207               		.loc 3 50 0
 1208               	/* #APP */
 1209               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 1210 0410 F894      		cli
 1211               	 ;  0 "" 2
 1212               	.LVL63:
 1213               	/* #NOAPP */
 1214               	.LBE848:
 1215               	.LBE847:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 1216               		.loc 2 124 0
 1217 0412 8091 0000 		lds r24,ep_in_data+1
 1218 0416 8823      		tst r24
 1219 0418 01F4      		brne .+2
 1220 041a 00C0      		rjmp .L79
 1221               	.L66:
 125:usb/usb_pipe.h **** 			r = false;
 1222               		.loc 2 125 0
 1223 041c 80E0      		ldi r24,lo8(0)
 1224               	.L61:
 1225               	.LBB849:
 1226               	.LBB850:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 1227               		.loc 3 70 0
 1228 041e 9FBF      		out __SREG__,r25
 1229               		.loc 3 71 0
 1230               	.LBE850:
 1231               	.LBE849:
 1232               	.LBE843:
 1233               	.LBE842:
 1234               	.LBE841:
  28:Framework.h   ****     while (!usb_pipe_can_write(&ep_in)){
 1235               		.loc 1 28 0
 1236 0420 8823      		tst r24
 1237 0422 01F4      		brne .L33
  29:Framework.h   ****         if (timeout_or_sampling_no_longer_enabled){
 1238               		.loc 1 29 0
 1239 0424 8091 0000 		lds r24,timeout_or_sampling_no_longer_enabled
 1240 0428 8823      		tst r24
 1241 042a 01F0      		breq .L59
 1242               	.LVL64:
 1243               	.LBB854:
 1244               	.LBB855:
 1245               	.LBB856:
  54:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 1246               		.loc 2 54 0
 1247 042c 2FB7      		in r18,__SREG__
 1248               	.LVL65:
 1249               	.LBB857:
 1250               	.LBB858:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 1251               		.loc 3 50 0
 1252               	/* #APP */
 1253               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 1254 042e F894      		cli
 1255               	 ;  0 "" 2
 1256               	.LVL66:
 1257               	/* #NOAPP */
 1258               	.LBE858:
 1259               	.LBE857:
 1260               	.LBB859:
 1261               	.LBB860:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 1262               		.loc 4 90 0
 1263 0430 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 1264               		.loc 4 91 0
 1265 0434 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 1266 0436 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 1267 0438 8093 0000 		sts ep_in_pipe_data+2,r24
 1268 043c 9093 0000 		sts ep_in_pipe_data+2+1,r25
 1269 0440 8093 0000 		sts ep_in_pipe_data,r24
 1270 0444 9093 0000 		sts ep_in_pipe_data+1,r25
 1271               	.LVL67:
 1272               	.LBE860:
 1273               	.LBE859:
 1274               	.LBB861:
 1275               	.LBB862:
 158:usb/usb.h     **** 		LASR16(&e->STATUS, USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 1276               		.loc 5 158 0
 1277 0448 E0E0      		ldi r30,lo8(endpoints+24)
 1278 044a F0E0      		ldi r31,hi8(endpoints+24)
 1279               	/* #APP */
 1280               	 ;  158 "usb/usb.h" 1
 1281 044c 06E0      		ldi r16, 6
 1282 044e 0593      		.dc.w 0x9305
 1283               		
 1284               	 ;  0 "" 2
 159:usb/usb.h     **** 		LACR16(&e->STATUS, USB_EP_BANK_bm);
 1285               		.loc 5 159 0
 1286               	 ;  159 "usb/usb.h" 1
 1287 0450 08E0      		ldi r16, 8
 1288 0452 0693      		.dc.w 0x9306
 1289               		
 1290               	 ;  0 "" 2
 1291               	/* #NOAPP */
 1292               	.LBE862:
 1293               	.LBE861:
  57:usb/usb_pipe.h **** 		p->data->flush = 0;
 1294               		.loc 2 57 0
 1295 0454 1092 0000 		sts ep_in_data+1,__zero_reg__
  58:usb/usb_pipe.h **** 		p->data->packet_offset = 0;
 1296               		.loc 2 58 0
 1297 0458 1092 0000 		sts ep_in_data+2,__zero_reg__
 1298 045c 1092 0000 		sts ep_in_data+2+1,__zero_reg__
  59:usb/usb_pipe.h **** 		p->data->bank = 0;
 1299               		.loc 2 59 0
 1300 0460 1092 0000 		sts ep_in_data,__zero_reg__
 1301               	.LVL68:
 1302               	.LBB863:
 1303               	.LBB864:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 1304               		.loc 3 70 0
 1305 0464 2FBF      		out __SREG__,r18
 1306               		.loc 3 71 0
 1307               	.LVL69:
 1308               	.L33:
 1309               	/* epilogue start */
 1310               	.LBE864:
 1311               	.LBE863:
 1312               	.LBE856:
 1313               	.LBE855:
 1314               	.LBE854:
 1315               	.LBE794:
 1316               	.LBE793:
   6:concat/concat.h ****     send_byte(*s);
   7:concat/concat.h ****     s++;
   8:concat/concat.h ****   }
   9:concat/concat.h ****   break_and_flush();
  10:concat/concat.h **** }
 1317               		.loc 7 10 0
 1318 0466 DF91      		pop r29
 1319 0468 CF91      		pop r28
 1320 046a 1F91      		pop r17
 1321 046c 0F91      		pop r16
 1322 046e FF90      		pop r15
 1323 0470 EF90      		pop r14
 1324 0472 DF90      		pop r13
 1325 0474 CF90      		pop r12
 1326 0476 BF90      		pop r11
 1327 0478 AF90      		pop r10
 1328 047a 0895      		ret
 1329               	.LVL70:
 1330               	.L76:
 1331               	.LBB870:
 1332               	.LBB790:
 1333               	.LBB787:
 1334               	.LBB780:
 1335               	.LBB777:
 1336               	.LBB774:
 1337               	.LBB771:
 1338               	.LBB762:
 1339               	.LBB759:
 1340               	.LBB741:
 1341               	.LBB742:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 1342               		.loc 4 51 0
 1343 047c A091 0000 		lds r26,ep_in_pipe_data+4
 1344               	.LBE742:
 1345               	.LBE741:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 1346               		.loc 2 83 0
 1347 0480 1A16      		cp __zero_reg__,r26
 1348 0482 04F0      		brlt .+2
 1349 0484 00C0      		rjmp .L41
 1350               	.LBB743:
 1351               	.LBB744:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 1352               		.loc 4 62 0
 1353 0486 2091 0000 		lds r18,ep_in_pipe_data
 1354 048a 3091 0000 		lds r19,ep_in_pipe_data+1
 1355               	.LVL71:
 1356               	.LBE744:
 1357               	.LBE743:
 1358               	.LBB745:
 1359               	.LBB734:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 1360               		.loc 2 68 0
 1361 048e E091 0000 		lds r30,ep_in_data
 1362               	.LVL72:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 1363               		.loc 2 69 0
 1364 0492 8E2F      		mov r24,r30
 1365 0494 90E0      		ldi r25,lo8(0)
 1366               	.LVL73:
 1367 0496 F1E0      		ldi r31,lo8(1)
 1368 0498 8C17      		cp r24,r28
 1369 049a 9D07      		cpc r25,r29
 1370 049c 01F4      		brne .L42
 1371 049e F0E0      		ldi r31,lo8(0)
 1372               	.L42:
 1373 04a0 F093 0000 		sts ep_in_data,r31
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 1374               		.loc 2 72 0
 1375 04a4 EE23      		tst r30
 1376 04a6 01F4      		brne .L43
 1377               	.LVL74:
 1378               	.LBB731:
 1379               	.LBB732:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1380               		.loc 5 168 0
 1381 04a8 2093 0000 		sts endpoints+28,r18
 1382 04ac 3093 0000 		sts endpoints+28+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 1383               		.loc 5 169 0
 1384 04b0 E092 0000 		sts endpoints+26,r14
 1385 04b4 F092 0000 		sts endpoints+26+1,r15
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 1386               		.loc 5 174 0
 1387 04b8 FB01      		movw r30,r22
 1388               	/* #APP */
 1389               	 ;  174 "usb/usb.h" 1
 1390 04ba 02E2      		ldi r16, 34
 1391 04bc 0693      		.dc.w 0x9306
 1392               		
 1393               	 ;  0 "" 2
 1394               	.LVL75:
 1395               	/* #NOAPP */
 1396               	.L44:
 1397               	.LBE732:
 1398               	.LBE731:
 1399               	.LBE734:
 1400               	.LBE745:
 1401               	.LBB746:
 1402               	.LBB747:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 1403               		.loc 4 72 0
 1404 04be A150      		subi r26,lo8(-(-1))
 1405 04c0 A093 0000 		sts ep_in_pipe_data+4,r26
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 1406               		.loc 4 73 0
 1407 04c4 C901      		movw r24,r18
 1408 04c6 805C      		subi r24,lo8(-(64))
 1409 04c8 9F4F      		sbci r25,hi8(-(64))
 1410 04ca 8093 0000 		sts ep_in_pipe_data,r24
 1411 04ce 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 1412               		.loc 4 75 0
 1413 04d2 F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 1414 04d4 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 1415 04d6 9F07      		cpc r25,r31
 1416 04d8 01F0      		breq .+2
 1417 04da 00C0      		rjmp .L40
 1418               	.LBE747:
 1419               	.LBE746:
 1420               	.LBB748:
 1421               	.LBB714:
 1422               		.loc 4 91 0
 1423 04dc A092 0000 		sts ep_in_pipe_data,r10
 1424 04e0 B092 0000 		sts ep_in_pipe_data+1,r11
 1425               	.LVL76:
 1426 04e4 00C0      		rjmp .L40
 1427               	.LVL77:
 1428               	.L43:
 1429               	.LBE714:
 1430               	.LBE748:
 1431               	.LBB749:
 1432               	.LBB735:
 1433               	.LBB733:
 1434               	.LBB730:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1435               		.loc 5 168 0
 1436 04e6 2093 0000 		sts endpoints+20,r18
 1437 04ea 3093 0000 		sts endpoints+20+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 1438               		.loc 5 169 0
 1439 04ee E092 0000 		sts endpoints+18,r14
 1440 04f2 F092 0000 		sts endpoints+18+1,r15
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 1441               		.loc 5 176 0
 1442 04f6 FB01      		movw r30,r22
 1443               	/* #APP */
 1444               	 ;  176 "usb/usb.h" 1
 1445 04f8 04E1      		ldi r16, 20
 1446 04fa 0693      		.dc.w 0x9306
 1447               		
 1448               	 ;  0 "" 2
 1449               	/* #NOAPP */
 1450 04fc 00C0      		rjmp .L44
 1451               	.LVL78:
 1452               	.L41:
 1453               	.LBE730:
 1454               	.LBE733:
 1455               	.LBE735:
 1456               	.LBE749:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 1457               		.loc 2 87 0
 1458 04fe 8091 0000 		lds r24,ep_in_data+1
 1459 0502 8130      		cpi r24,lo8(1)
 1460 0504 01F0      		breq .L80
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 1461               		.loc 2 91 0
 1462 0506 8230      		cpi r24,lo8(2)
 1463 0508 01F0      		breq .+2
 1464 050a 00C0      		rjmp .L40
 1465               	.LVL79:
 1466               	.LBB750:
 1467               	.LBB751:
 1468               	.LBB752:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 1469               		.loc 5 228 0
 1470 050c 8091 0000 		lds r24,endpoints+24
 1471 0510 8670      		andi r24,lo8(6)
 1472               	.LBE752:
 1473               	.LBE751:
 1474               	.LBE750:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 1475               		.loc 2 91 0
 1476 0512 8630      		cpi r24,lo8(6)
 1477 0514 01F0      		breq .+2
 1478 0516 00C0      		rjmp .L40
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 1479               		.loc 2 92 0
 1480 0518 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 1481               		.loc 2 93 0
 1482 051c 1092 0000 		sts ep_in_data+2,__zero_reg__
 1483 0520 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 1484               	.LBB753:
 1485               	.LBB715:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 1486               		.loc 4 90 0
 1487 0524 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 1488               		.loc 4 91 0
 1489 0528 A092 0000 		sts ep_in_pipe_data+2,r10
 1490 052c B092 0000 		sts ep_in_pipe_data+2+1,r11
 1491 0530 A092 0000 		sts ep_in_pipe_data,r10
 1492 0534 B092 0000 		sts ep_in_pipe_data+1,r11
 1493               	.LVL80:
 1494 0538 00C0      		rjmp .L40
 1495               	.LVL81:
 1496               	.L80:
 1497               	.LBE715:
 1498               	.LBE753:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 1499               		.loc 2 88 0
 1500 053a 22E0      		ldi r18,lo8(2)
 1501               	.LVL82:
 1502 053c 2093 0000 		sts ep_in_data+1,r18
 1503               	.LBB754:
 1504               	.LBB755:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 1505               		.loc 4 62 0
 1506 0540 A091 0000 		lds r26,ep_in_pipe_data
 1507 0544 1091 0000 		lds r17,ep_in_pipe_data+1
 1508               	.LBE755:
 1509               	.LBE754:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 1510               		.loc 2 90 0
 1511 0548 2091 0000 		lds r18,ep_in_data+2
 1512 054c 3091 0000 		lds r19,ep_in_data+2+1
 1513               	.LVL83:
 1514               	.LBB756:
 1515               	.LBB724:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 1516               		.loc 2 68 0
 1517 0550 F091 0000 		lds r31,ep_in_data
 1518               	.LVL84:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 1519               		.loc 2 69 0
 1520 0554 8F2F      		mov r24,r31
 1521 0556 90E0      		ldi r25,lo8(0)
 1522 0558 E1E0      		ldi r30,lo8(1)
 1523               	.LVL85:
 1524 055a 8C17      		cp r24,r28
 1525 055c 9D07      		cpc r25,r29
 1526 055e 01F4      		brne .L47
 1527 0560 E0E0      		ldi r30,lo8(0)
 1528               	.L47:
 1529 0562 E093 0000 		sts ep_in_data,r30
 1530               	.LBB718:
 1531               	.LBB719:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1532               		.loc 5 168 0
 1533 0566 8A2F      		mov r24,r26
 1534 0568 912F      		mov r25,r17
 1535               	.LBE719:
 1536               	.LBE718:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 1537               		.loc 2 72 0
 1538 056a FF23      		tst r31
 1539 056c 01F0      		breq .+2
 1540 056e 00C0      		rjmp .L48
 1541               	.LVL86:
 1542               	.LBB721:
 1543               	.LBB720:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1544               		.loc 5 168 0
 1545 0570 8093 0000 		sts endpoints+28,r24
 1546 0574 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 1547               		.loc 5 169 0
 1548 0578 2093 0000 		sts endpoints+26,r18
 1549 057c 3093 0000 		sts endpoints+26+1,r19
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 1550               		.loc 5 174 0
 1551 0580 FB01      		movw r30,r22
 1552               	/* #APP */
 1553               	 ;  174 "usb/usb.h" 1
 1554 0582 02E2      		ldi r16, 34
 1555 0584 0693      		.dc.w 0x9306
 1556               		
 1557               	 ;  0 "" 2
 1558               	/* #NOAPP */
 1559 0586 00C0      		rjmp .L40
 1560               	.LVL87:
 1561               	.L79:
 1562               	.LBE720:
 1563               	.LBE721:
 1564               	.LBE724:
 1565               	.LBE756:
 1566               	.LBE759:
 1567               	.LBE762:
 1568               	.LBE771:
 1569               	.LBE774:
 1570               	.LBE777:
 1571               	.LBE780:
 1572               	.LBE787:
 1573               	.LBE790:
 1574               	.LBE870:
 1575               	.LBB871:
 1576               	.LBB868:
 1577               	.LBB865:
 1578               	.LBB853:
 1579               	.LBB852:
 1580               	.LBB851:
 1581               	.LBB846:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 1582               		.loc 4 57 0
 1583 0588 8091 0000 		lds r24,ep_in_pipe_data+4
 1584 058c 232F      		mov r18,r19
 1585 058e 281B      		sub r18,r24
 1586               	.LBE846:
 1587               	.LBE851:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 1588               		.loc 2 127 0
 1589 0590 81E0      		ldi r24,lo8(1)
 1590 0592 1216      		cp __zero_reg__,r18
 1591 0594 04F4      		brge .+2
 1592 0596 00C0      		rjmp .L61
 1593 0598 00C0      		rjmp .L66
 1594               	.LVL88:
 1595               	.L78:
 1596               	.LBE852:
 1597               	.LBE853:
 1598               	.LBE865:
 1599               	.LBB866:
 1600               	.LBB839:
 1601               	.LBB837:
 1602               	.LBB835:
 1603               	.LBB833:
 1604               	.LBB806:
 1605               	.LBB807:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 1606               		.loc 4 51 0
 1607 059a 3091 0000 		lds r19,ep_in_pipe_data+4
 1608               	.LBE807:
 1609               	.LBE806:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 1610               		.loc 2 83 0
 1611 059e 1316      		cp __zero_reg__,r19
 1612 05a0 04F0      		brlt .+2
 1613 05a2 00C0      		rjmp .L51
 1614               	.LBB808:
 1615               	.LBB809:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 1616               		.loc 4 62 0
 1617 05a4 8091 0000 		lds r24,ep_in_pipe_data
 1618 05a8 9091 0000 		lds r25,ep_in_pipe_data+1
 1619               	.LVL89:
 1620               	.LBE809:
 1621               	.LBE808:
 1622               	.LBB810:
 1623               	.LBB811:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 1624               		.loc 2 68 0
 1625 05ac 4091 0000 		lds r20,ep_in_data
 1626               	.LVL90:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 1627               		.loc 2 69 0
 1628 05b0 51E0      		ldi r21,lo8(1)
 1629 05b2 4130      		cpi r20,lo8(1)
 1630 05b4 01F4      		brne .L52
 1631 05b6 50E0      		ldi r21,lo8(0)
 1632               	.L52:
 1633 05b8 5093 0000 		sts ep_in_data,r21
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 1634               		.loc 2 72 0
 1635 05bc 4423      		tst r20
 1636 05be 01F4      		brne .L53
 1637               	.LVL91:
 1638               	.LBB812:
 1639               	.LBB813:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1640               		.loc 5 168 0
 1641 05c0 8093 0000 		sts endpoints+28,r24
 1642 05c4 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 1643               		.loc 5 169 0
 1644 05c8 40E4      		ldi r20,lo8(64)
 1645 05ca 50E0      		ldi r21,hi8(64)
 1646 05cc 4093 0000 		sts endpoints+26,r20
 1647 05d0 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 1648               		.loc 5 174 0
 1649 05d4 E0E0      		ldi r30,lo8(endpoints+24)
 1650 05d6 F0E0      		ldi r31,hi8(endpoints+24)
 1651               	.LVL92:
 1652               	/* #APP */
 1653               	 ;  174 "usb/usb.h" 1
 1654 05d8 02E2      		ldi r16, 34
 1655 05da 0693      		.dc.w 0x9306
 1656               		
 1657               	 ;  0 "" 2
 1658               	.LVL93:
 1659               	/* #NOAPP */
 1660               	.L54:
 1661               	.LBE813:
 1662               	.LBE812:
 1663               	.LBE811:
 1664               	.LBE810:
 1665               	.LBB817:
 1666               	.LBB818:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 1667               		.loc 4 72 0
 1668 05dc 3150      		subi r19,lo8(-(-1))
 1669 05de 3093 0000 		sts ep_in_pipe_data+4,r19
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 1670               		.loc 4 73 0
 1671 05e2 805C      		subi r24,lo8(-(64))
 1672 05e4 9F4F      		sbci r25,hi8(-(64))
 1673 05e6 8093 0000 		sts ep_in_pipe_data,r24
 1674 05ea 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 1675               		.loc 4 75 0
 1676 05ee F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 1677 05f0 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 1678 05f2 9F07      		cpc r25,r31
 1679 05f4 01F0      		breq .+2
 1680 05f6 00C0      		rjmp .L50
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 1681               		.loc 4 76 0
 1682 05f8 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 1683 05fa 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 1684 05fc 8093 0000 		sts ep_in_pipe_data,r24
 1685 0600 9093 0000 		sts ep_in_pipe_data+1,r25
 1686 0604 00C0      		rjmp .L50
 1687               	.LVL94:
 1688               	.L48:
 1689               	.LBE818:
 1690               	.LBE817:
 1691               	.LBE833:
 1692               	.LBE835:
 1693               	.LBE837:
 1694               	.LBE839:
 1695               	.LBE866:
 1696               	.LBE868:
 1697               	.LBE871:
 1698               	.LBB872:
 1699               	.LBB791:
 1700               	.LBB788:
 1701               	.LBB781:
 1702               	.LBB778:
 1703               	.LBB775:
 1704               	.LBB772:
 1705               	.LBB763:
 1706               	.LBB760:
 1707               	.LBB757:
 1708               	.LBB725:
 1709               	.LBB722:
 1710               	.LBB723:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1711               		.loc 5 168 0
 1712 0606 8093 0000 		sts endpoints+20,r24
 1713 060a 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 1714               		.loc 5 169 0
 1715 060e 2093 0000 		sts endpoints+18,r18
 1716 0612 3093 0000 		sts endpoints+18+1,r19
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 1717               		.loc 5 176 0
 1718 0616 FB01      		movw r30,r22
 1719               	/* #APP */
 1720               	 ;  176 "usb/usb.h" 1
 1721 0618 04E1      		ldi r16, 20
 1722 061a 0693      		.dc.w 0x9306
 1723               		
 1724               	 ;  0 "" 2
 1725               	/* #NOAPP */
 1726 061c 00C0      		rjmp .L40
 1727               	.LVL95:
 1728               	.L53:
 1729               	.LBE723:
 1730               	.LBE722:
 1731               	.LBE725:
 1732               	.LBE757:
 1733               	.LBE760:
 1734               	.LBE763:
 1735               	.LBE772:
 1736               	.LBE775:
 1737               	.LBE778:
 1738               	.LBE781:
 1739               	.LBE788:
 1740               	.LBE791:
 1741               	.LBE872:
 1742               	.LBB873:
 1743               	.LBB869:
 1744               	.LBB867:
 1745               	.LBB840:
 1746               	.LBB838:
 1747               	.LBB836:
 1748               	.LBB834:
 1749               	.LBB819:
 1750               	.LBB816:
 1751               	.LBB814:
 1752               	.LBB815:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1753               		.loc 5 168 0
 1754 061e 8093 0000 		sts endpoints+20,r24
 1755 0622 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 1756               		.loc 5 169 0
 1757 0626 40E4      		ldi r20,lo8(64)
 1758 0628 50E0      		ldi r21,hi8(64)
 1759               	.LVL96:
 1760 062a 4093 0000 		sts endpoints+18,r20
 1761 062e 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 1762               		.loc 5 176 0
 1763 0632 E0E0      		ldi r30,lo8(endpoints+24)
 1764 0634 F0E0      		ldi r31,hi8(endpoints+24)
 1765               	/* #APP */
 1766               	 ;  176 "usb/usb.h" 1
 1767 0636 04E1      		ldi r16, 20
 1768 0638 0693      		.dc.w 0x9306
 1769               		
 1770               	 ;  0 "" 2
 1771               	/* #NOAPP */
 1772 063a 00C0      		rjmp .L54
 1773               	.LVL97:
 1774               	.L51:
 1775               	.LBE815:
 1776               	.LBE814:
 1777               	.LBE816:
 1778               	.LBE819:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 1779               		.loc 2 87 0
 1780 063c 8091 0000 		lds r24,ep_in_data+1
 1781 0640 8130      		cpi r24,lo8(1)
 1782 0642 01F0      		breq .L81
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 1783               		.loc 2 91 0
 1784 0644 8230      		cpi r24,lo8(2)
 1785 0646 01F0      		breq .+2
 1786 0648 00C0      		rjmp .L50
 1787               	.LVL98:
 1788               	.LBB820:
 1789               	.LBB821:
 1790               	.LBB822:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 1791               		.loc 5 228 0
 1792 064a 8091 0000 		lds r24,endpoints+24
 1793 064e 8670      		andi r24,lo8(6)
 1794               	.LBE822:
 1795               	.LBE821:
 1796               	.LBE820:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 1797               		.loc 2 91 0
 1798 0650 8630      		cpi r24,lo8(6)
 1799 0652 01F0      		breq .+2
 1800 0654 00C0      		rjmp .L50
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 1801               		.loc 2 92 0
 1802 0656 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 1803               		.loc 2 93 0
 1804 065a 1092 0000 		sts ep_in_data+2,__zero_reg__
 1805 065e 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 1806               	.LBB823:
 1807               	.LBB824:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 1808               		.loc 4 90 0
 1809 0662 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 1810               		.loc 4 91 0
 1811 0666 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 1812 0668 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 1813 066a 8093 0000 		sts ep_in_pipe_data+2,r24
 1814 066e 9093 0000 		sts ep_in_pipe_data+2+1,r25
 1815 0672 8093 0000 		sts ep_in_pipe_data,r24
 1816 0676 9093 0000 		sts ep_in_pipe_data+1,r25
 1817               	.LVL99:
 1818 067a 00C0      		rjmp .L50
 1819               	.LVL100:
 1820               	.L81:
 1821               	.LBE824:
 1822               	.LBE823:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 1823               		.loc 2 88 0
 1824 067c 82E0      		ldi r24,lo8(2)
 1825 067e 8093 0000 		sts ep_in_data+1,r24
 1826               	.LBB825:
 1827               	.LBB826:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 1828               		.loc 4 62 0
 1829 0682 6091 0000 		lds r22,ep_in_pipe_data
 1830 0686 3091 0000 		lds r19,ep_in_pipe_data+1
 1831               	.LBE826:
 1832               	.LBE825:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 1833               		.loc 2 90 0
 1834 068a 4091 0000 		lds r20,ep_in_data+2
 1835 068e 5091 0000 		lds r21,ep_in_data+2+1
 1836               	.LVL101:
 1837               	.LBB827:
 1838               	.LBB828:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 1839               		.loc 2 68 0
 1840 0692 8091 0000 		lds r24,ep_in_data
 1841               	.LVL102:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 1842               		.loc 2 69 0
 1843 0696 91E0      		ldi r25,lo8(1)
 1844 0698 8130      		cpi r24,lo8(1)
 1845 069a 01F4      		brne .L57
 1846 069c 90E0      		ldi r25,lo8(0)
 1847               	.L57:
 1848 069e 9093 0000 		sts ep_in_data,r25
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 1849               		.loc 2 72 0
 1850 06a2 8823      		tst r24
 1851 06a4 01F4      		brne .L58
 1852               	.LVL103:
 1853               	.LBB829:
 1854               	.LBB830:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1855               		.loc 5 168 0
 1856 06a6 862F      		mov r24,r22
 1857 06a8 932F      		mov r25,r19
 1858 06aa 8093 0000 		sts endpoints+28,r24
 1859 06ae 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 1860               		.loc 5 169 0
 1861 06b2 4093 0000 		sts endpoints+26,r20
 1862 06b6 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 1863               		.loc 5 174 0
 1864 06ba E0E0      		ldi r30,lo8(endpoints+24)
 1865 06bc F0E0      		ldi r31,hi8(endpoints+24)
 1866               	.LVL104:
 1867               	/* #APP */
 1868               	 ;  174 "usb/usb.h" 1
 1869 06be 02E2      		ldi r16, 34
 1870 06c0 0693      		.dc.w 0x9306
 1871               		
 1872               	 ;  0 "" 2
 1873               	/* #NOAPP */
 1874 06c2 00C0      		rjmp .L50
 1875               	.LVL105:
 1876               	.L58:
 1877               	.LBE830:
 1878               	.LBE829:
 1879               	.LBB831:
 1880               	.LBB832:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 1881               		.loc 5 168 0
 1882 06c4 862F      		mov r24,r22
 1883 06c6 932F      		mov r25,r19
 1884 06c8 8093 0000 		sts endpoints+20,r24
 1885 06cc 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 1886               		.loc 5 169 0
 1887 06d0 4093 0000 		sts endpoints+18,r20
 1888 06d4 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 1889               		.loc 5 176 0
 1890 06d8 E0E0      		ldi r30,lo8(endpoints+24)
 1891 06da F0E0      		ldi r31,hi8(endpoints+24)
 1892               	/* #APP */
 1893               	 ;  176 "usb/usb.h" 1
 1894 06dc 04E1      		ldi r16, 20
 1895 06de 0693      		.dc.w 0x9306
 1896               		
 1897               	 ;  0 "" 2
 1898               	/* #NOAPP */
 1899 06e0 00C0      		rjmp .L50
 1900               	.LBE832:
 1901               	.LBE831:
 1902               	.LBE828:
 1903               	.LBE827:
 1904               	.LBE834:
 1905               	.LBE836:
 1906               	.LBE838:
 1907               	.LBE840:
 1908               	.LBE867:
 1909               	.LBE869:
 1910               	.LBE873:
 1911               		.cfi_endproc
 1912               	.LFE61:
 1914               	.global	concat
 1916               	concat:
 1917               	.LFB62:
  11:concat/concat.h **** 
  12:concat/concat.h **** char* concat(char *s1, char *s2)
  13:concat/concat.h **** {
 1918               		.loc 7 13 0
 1919               		.cfi_startproc
 1920               	.LVL106:
 1921 06e2 EF92      		push r14
 1922               	.LCFI39:
 1923               		.cfi_def_cfa_offset 3
 1924               		.cfi_offset 14, -2
 1925 06e4 FF92      		push r15
 1926               	.LCFI40:
 1927               		.cfi_def_cfa_offset 4
 1928               		.cfi_offset 15, -3
 1929 06e6 0F93      		push r16
 1930               	.LCFI41:
 1931               		.cfi_def_cfa_offset 5
 1932               		.cfi_offset 16, -4
 1933 06e8 1F93      		push r17
 1934               	.LCFI42:
 1935               		.cfi_def_cfa_offset 6
 1936               		.cfi_offset 17, -5
 1937 06ea CF93      		push r28
 1938               	.LCFI43:
 1939               		.cfi_def_cfa_offset 7
 1940               		.cfi_offset 28, -6
 1941 06ec DF93      		push r29
 1942               	.LCFI44:
 1943               		.cfi_def_cfa_offset 8
 1944               		.cfi_offset 29, -7
 1945               	/* prologue: function */
 1946               	/* frame size = 0 */
 1947               	/* stack size = 6 */
 1948               	.L__stack_usage = 6
 1949 06ee F82E      		mov r15,r24
 1950 06f0 E92E      		mov r14,r25
 1951 06f2 162F      		mov r17,r22
 1952 06f4 072F      		mov r16,r23
  14:concat/concat.h ****     //string concatenation -- not needed now, but might prove useful later
  15:concat/concat.h ****     char *result = malloc(strlen(s1)+strlen(s2)+1);
 1953               		.loc 7 15 0
 1954 06f6 A82F      		mov r26,r24
 1955 06f8 B92F      		mov r27,r25
 1956 06fa ED01      		movw r28,r26
 1957 06fc 0990      		ld __tmp_reg__,Y+
 1958 06fe 0020      		tst __tmp_reg__
 1959 0700 01F4      		brne .-6
 1960 0702 9E01      		movw r18,r28
 1961 0704 E62F      		mov r30,r22
 1962 0706 F72F      		mov r31,r23
 1963 0708 EF01      		movw r28,r30
 1964 070a 0990      		ld __tmp_reg__,Y+
 1965 070c 0020      		tst __tmp_reg__
 1966 070e 01F4      		brne .-6
 1967 0710 CE01      		movw r24,r28
 1968               	.LVL107:
 1969 0712 0197      		sbiw r24,1
 1970 0714 8E1B      		sub r24,r30
 1971 0716 9F0B      		sbc r25,r31
 1972 0718 8A1B      		sub r24,r26
 1973 071a 9B0B      		sbc r25,r27
 1974 071c 820F      		add r24,r18
 1975 071e 931F      		adc r25,r19
 1976 0720 0E94 0000 		call malloc
 1977               	.LVL108:
 1978 0724 D82F      		mov r29,r24
 1979 0726 C92F      		mov r28,r25
 1980               	.LVL109:
  16:concat/concat.h ****     //should also check for memory allocation errors here
  17:concat/concat.h ****     strcpy(result, s1);
 1981               		.loc 7 17 0
 1982 0728 6F2D      		mov r22,r15
 1983 072a 7E2D      		mov r23,r14
 1984 072c 0E94 0000 		call strcpy
 1985               	.LVL110:
  18:concat/concat.h ****     strcat(result, s2);
 1986               		.loc 7 18 0
 1987 0730 8D2F      		mov r24,r29
 1988 0732 9C2F      		mov r25,r28
 1989 0734 612F      		mov r22,r17
 1990 0736 702F      		mov r23,r16
 1991 0738 0E94 0000 		call strcat
  19:concat/concat.h ****     return result;
  20:concat/concat.h **** }
 1992               		.loc 7 20 0
 1993 073c 8D2F      		mov r24,r29
 1994 073e 9C2F      		mov r25,r28
 1995               	/* epilogue start */
 1996 0740 DF91      		pop r29
 1997               	.LVL111:
 1998 0742 CF91      		pop r28
 1999               	.LVL112:
 2000 0744 1F91      		pop r17
 2001 0746 0F91      		pop r16
 2002 0748 FF90      		pop r15
 2003 074a EF90      		pop r14
 2004 074c 0895      		ret
 2005               		.cfi_endproc
 2006               	.LFE62:
 2008               	.global	distance
 2010               	distance:
 2011               	.LFB63:
 2012               		.file 8 "nmea/nmea.h"
   1:nmea/nmea.h   **** #include <avr/io.h>
   2:nmea/nmea.h   **** #include <stdlib.h>
   3:nmea/nmea.h   **** #include <string.h>
   4:nmea/nmea.h   **** 
   5:nmea/nmea.h   **** //sample nmea strings for testing parser
   6:nmea/nmea.h   **** double lat = 42.292747;
   7:nmea/nmea.h   **** double lng = -71.264622;
   8:nmea/nmea.h   **** double max_dist = .200;
   9:nmea/nmea.h   **** 
  10:nmea/nmea.h   **** typedef struct _latlng {
  11:nmea/nmea.h   ****   double lat;
  12:nmea/nmea.h   ****   double lng;
  13:nmea/nmea.h   **** } latlng;
  14:nmea/nmea.h   **** 
  15:nmea/nmea.h   **** char* parse_nmea(void);
  16:nmea/nmea.h   **** extern void parse_nmea_string(char *s, latlng *gps);
  17:nmea/nmea.h   **** double distance(double gpslat, double gpslng);
  18:nmea/nmea.h   **** 
  19:nmea/nmea.h   **** #define d2r (M_PI / 180.0)
  20:nmea/nmea.h   **** 
  21:nmea/nmea.h   **** //calculate distance, assuming earth is spherical
  22:nmea/nmea.h   **** double distance(double gpslat, double gpslng) {
 2013               		.loc 8 22 0
 2014               		.cfi_startproc
 2015               	.LVL113:
 2016 074e 2F92      		push r2
 2017               	.LCFI45:
 2018               		.cfi_def_cfa_offset 3
 2019               		.cfi_offset 2, -2
 2020 0750 3F92      		push r3
 2021               	.LCFI46:
 2022               		.cfi_def_cfa_offset 4
 2023               		.cfi_offset 3, -3
 2024 0752 4F92      		push r4
 2025               	.LCFI47:
 2026               		.cfi_def_cfa_offset 5
 2027               		.cfi_offset 4, -4
 2028 0754 5F92      		push r5
 2029               	.LCFI48:
 2030               		.cfi_def_cfa_offset 6
 2031               		.cfi_offset 5, -5
 2032 0756 6F92      		push r6
 2033               	.LCFI49:
 2034               		.cfi_def_cfa_offset 7
 2035               		.cfi_offset 6, -6
 2036 0758 7F92      		push r7
 2037               	.LCFI50:
 2038               		.cfi_def_cfa_offset 8
 2039               		.cfi_offset 7, -7
 2040 075a 8F92      		push r8
 2041               	.LCFI51:
 2042               		.cfi_def_cfa_offset 9
 2043               		.cfi_offset 8, -8
 2044 075c 9F92      		push r9
 2045               	.LCFI52:
 2046               		.cfi_def_cfa_offset 10
 2047               		.cfi_offset 9, -9
 2048 075e AF92      		push r10
 2049               	.LCFI53:
 2050               		.cfi_def_cfa_offset 11
 2051               		.cfi_offset 10, -10
 2052 0760 BF92      		push r11
 2053               	.LCFI54:
 2054               		.cfi_def_cfa_offset 12
 2055               		.cfi_offset 11, -11
 2056 0762 CF92      		push r12
 2057               	.LCFI55:
 2058               		.cfi_def_cfa_offset 13
 2059               		.cfi_offset 12, -12
 2060 0764 DF92      		push r13
 2061               	.LCFI56:
 2062               		.cfi_def_cfa_offset 14
 2063               		.cfi_offset 13, -13
 2064 0766 EF92      		push r14
 2065               	.LCFI57:
 2066               		.cfi_def_cfa_offset 15
 2067               		.cfi_offset 14, -14
 2068 0768 FF92      		push r15
 2069               	.LCFI58:
 2070               		.cfi_def_cfa_offset 16
 2071               		.cfi_offset 15, -15
 2072 076a 0F93      		push r16
 2073               	.LCFI59:
 2074               		.cfi_def_cfa_offset 17
 2075               		.cfi_offset 16, -16
 2076 076c 1F93      		push r17
 2077               	.LCFI60:
 2078               		.cfi_def_cfa_offset 18
 2079               		.cfi_offset 17, -17
 2080 076e CF93      		push r28
 2081               	.LCFI61:
 2082               		.cfi_def_cfa_offset 19
 2083               		.cfi_offset 28, -18
 2084 0770 DF93      		push r29
 2085               	.LCFI62:
 2086               		.cfi_def_cfa_offset 20
 2087               		.cfi_offset 29, -19
 2088 0772 CDB7      		in r28,__SP_L__
 2089 0774 DEB7      		in r29,__SP_H__
 2090 0776 2697      		sbiw r28,6
 2091               	.LCFI63:
 2092               		.cfi_def_cfa 28, 26
 2093 0778 CDBF      		out __SP_L__,r28
 2094 077a DEBF      		out __SP_H__,r29
 2095               	/* prologue: function */
 2096               	/* frame size = 6 */
 2097               	/* stack size = 24 */
 2098               	.L__stack_usage = 24
 2099 077c 4B01      		movw r8,r22
 2100 077e 5C01      		movw r10,r24
 2101 0780 2983      		std Y+1,r18
 2102 0782 3A83      		std Y+2,r19
 2103 0784 4B83      		std Y+3,r20
 2104 0786 5C83      		std Y+4,r21
 2105               	.LVL114:
  23:nmea/nmea.h   ****     double dlong = (gpslng - lng) * d2r;
  24:nmea/nmea.h   ****     double dlat = (gpslat - lat) * d2r;
 2106               		.loc 8 24 0
 2107 0788 C090 0000 		lds r12,lat
 2108 078c D090 0000 		lds r13,lat+1
 2109 0790 E090 0000 		lds r14,lat+2
 2110 0794 F090 0000 		lds r15,lat+3
 2111               	.LVL115:
 2112 0798 A701      		movw r20,r14
 2113 079a 9601      		movw r18,r12
 2114               	.LVL116:
 2115 079c 0E94 0000 		call __subsf3
 2116               	.LVL117:
 2117 07a0 25E3      		ldi r18,lo8(0x3c8efa35)
 2118 07a2 3AEF      		ldi r19,hi8(0x3c8efa35)
 2119 07a4 4EE8      		ldi r20,hlo8(0x3c8efa35)
 2120 07a6 5CE3      		ldi r21,hhi8(0x3c8efa35)
 2121 07a8 0E94 0000 		call __mulsf3
  25:nmea/nmea.h   ****     double a = pow(sin(dlat/2.0), 2) + cos(lat*d2r) * cos(gpslat*d2r) * pow(sin(dlong/2.0), 2);
 2122               		.loc 8 25 0
 2123 07ac 20E0      		ldi r18,lo8(0x3f000000)
 2124 07ae 30E0      		ldi r19,hi8(0x3f000000)
 2125 07b0 40E0      		ldi r20,hlo8(0x3f000000)
 2126 07b2 5FE3      		ldi r21,hhi8(0x3f000000)
 2127 07b4 0E94 0000 		call __mulsf3
 2128 07b8 0E94 0000 		call sin
 2129 07bc 9B01      		movw r18,r22
 2130 07be AC01      		movw r20,r24
 2131 07c0 0E94 0000 		call __mulsf3
 2132 07c4 362E      		mov r3,r22
 2133 07c6 272E      		mov r2,r23
 2134 07c8 8D83      		std Y+5,r24
 2135 07ca 9E83      		std Y+6,r25
 2136 07cc C701      		movw r24,r14
 2137 07ce B601      		movw r22,r12
 2138 07d0 25E3      		ldi r18,lo8(0x3c8efa35)
 2139 07d2 3AEF      		ldi r19,hi8(0x3c8efa35)
 2140 07d4 4EE8      		ldi r20,hlo8(0x3c8efa35)
 2141 07d6 5CE3      		ldi r21,hhi8(0x3c8efa35)
 2142 07d8 0E94 0000 		call __mulsf3
 2143 07dc 0E94 0000 		call cos
 2144 07e0 7B01      		movw r14,r22
 2145 07e2 8C01      		movw r16,r24
 2146 07e4 C501      		movw r24,r10
 2147 07e6 B401      		movw r22,r8
 2148 07e8 25E3      		ldi r18,lo8(0x3c8efa35)
 2149 07ea 3AEF      		ldi r19,hi8(0x3c8efa35)
 2150 07ec 4EE8      		ldi r20,hlo8(0x3c8efa35)
 2151 07ee 5CE3      		ldi r21,hhi8(0x3c8efa35)
 2152 07f0 0E94 0000 		call __mulsf3
 2153 07f4 0E94 0000 		call cos
 2154 07f8 2B01      		movw r4,r22
 2155 07fa 3C01      		movw r6,r24
  23:nmea/nmea.h   ****     double dlong = (gpslng - lng) * d2r;
 2156               		.loc 8 23 0
 2157 07fc 6981      		ldd r22,Y+1
 2158 07fe 7A81      		ldd r23,Y+2
 2159 0800 8B81      		ldd r24,Y+3
 2160 0802 9C81      		ldd r25,Y+4
 2161 0804 2091 0000 		lds r18,lng
 2162 0808 3091 0000 		lds r19,lng+1
 2163 080c 4091 0000 		lds r20,lng+2
 2164 0810 5091 0000 		lds r21,lng+3
 2165               	.LVL118:
 2166 0814 0E94 0000 		call __subsf3
 2167               	.LVL119:
 2168 0818 25E3      		ldi r18,lo8(0x3c8efa35)
 2169 081a 3AEF      		ldi r19,hi8(0x3c8efa35)
 2170 081c 4EE8      		ldi r20,hlo8(0x3c8efa35)
 2171 081e 5CE3      		ldi r21,hhi8(0x3c8efa35)
 2172 0820 0E94 0000 		call __mulsf3
 2173               		.loc 8 25 0
 2174 0824 20E0      		ldi r18,lo8(0x3f000000)
 2175 0826 30E0      		ldi r19,hi8(0x3f000000)
 2176 0828 40E0      		ldi r20,hlo8(0x3f000000)
 2177 082a 5FE3      		ldi r21,hhi8(0x3f000000)
 2178 082c 0E94 0000 		call __mulsf3
 2179 0830 0E94 0000 		call sin
 2180 0834 9B01      		movw r18,r22
 2181 0836 AC01      		movw r20,r24
 2182 0838 0E94 0000 		call __mulsf3
 2183 083c B62E      		mov r11,r22
 2184 083e D72E      		mov r13,r23
 2185 0840 882E      		mov r8,r24
 2186               	.LVL120:
 2187 0842 C92E      		mov r12,r25
 2188 0844 C801      		movw r24,r16
 2189 0846 B701      		movw r22,r14
 2190 0848 A301      		movw r20,r6
 2191 084a 9201      		movw r18,r4
 2192 084c 0E94 0000 		call __mulsf3
 2193 0850 0B2D      		mov r16,r11
 2194 0852 1D2D      		mov r17,r13
 2195 0854 282D      		mov r18,r8
 2196 0856 3C2D      		mov r19,r12
 2197 0858 A901      		movw r20,r18
 2198 085a 9801      		movw r18,r16
 2199 085c 0E94 0000 		call __mulsf3
 2200 0860 9B01      		movw r18,r22
 2201 0862 AC01      		movw r20,r24
 2202 0864 F101      		movw r30,r2
 2203 0866 7D81      		ldd r23,Y+5
 2204 0868 6E81      		ldd r22,Y+6
 2205 086a 8F2F      		mov r24,r31
 2206 086c 9E2F      		mov r25,r30
 2207 086e A72F      		mov r26,r23
 2208 0870 B62F      		mov r27,r22
 2209 0872 BC01      		movw r22,r24
 2210 0874 CD01      		movw r24,r26
 2211 0876 0E94 0000 		call __addsf3
 2212 087a 862E      		mov r8,r22
 2213 087c 072F      		mov r16,r23
 2214 087e 382E      		mov r3,r24
 2215 0880 492E      		mov r4,r25
 2216               	.LVL121:
  26:nmea/nmea.h   ****     double c = 2 * atan2(sqrt(a), sqrt(1-a));
 2217               		.loc 8 26 0
 2218 0882 982F      		mov r25,r24
 2219               	.LVL122:
 2220 0884 482D      		mov r20,r8
 2221 0886 502F      		mov r21,r16
 2222 0888 692F      		mov r22,r25
 2223               	.LVL123:
 2224 088a 742D      		mov r23,r4
 2225               	.LVL124:
 2226 088c CB01      		movw r24,r22
 2227 088e BA01      		movw r22,r20
 2228 0890 0E94 0000 		call sqrt
 2229               	.LVL125:
 2230 0894 6B01      		movw r12,r22
 2231 0896 7C01      		movw r14,r24
 2232 0898 60E0      		ldi r22,lo8(0x3f800000)
 2233 089a 70E0      		ldi r23,hi8(0x3f800000)
 2234 089c 80E8      		ldi r24,hlo8(0x3f800000)
 2235 089e 9FE3      		ldi r25,hhi8(0x3f800000)
 2236 08a0 E02F      		mov r30,r16
 2237 08a2 082D      		mov r16,r8
 2238               	.LVL126:
 2239 08a4 1E2F      		mov r17,r30
 2240 08a6 232D      		mov r18,r3
 2241 08a8 342D      		mov r19,r4
 2242 08aa A901      		movw r20,r18
 2243 08ac 9801      		movw r18,r16
 2244 08ae 0E94 0000 		call __subsf3
 2245               	.LVL127:
 2246 08b2 0E94 0000 		call sqrt
 2247 08b6 9B01      		movw r18,r22
 2248 08b8 AC01      		movw r20,r24
 2249 08ba C701      		movw r24,r14
 2250 08bc B601      		movw r22,r12
 2251 08be 0E94 0000 		call atan2
 2252 08c2 9B01      		movw r18,r22
 2253 08c4 AC01      		movw r20,r24
 2254               	.LVL128:
 2255 08c6 0E94 0000 		call __addsf3
 2256               	.LVL129:
  27:nmea/nmea.h   ****     double d = 6367 * c;
 2257               		.loc 8 27 0
 2258 08ca 20E0      		ldi r18,lo8(0x45c6f800)
 2259 08cc 38EF      		ldi r19,hi8(0x45c6f800)
 2260 08ce 46EC      		ldi r20,hlo8(0x45c6f800)
 2261 08d0 55E4      		ldi r21,hhi8(0x45c6f800)
 2262 08d2 0E94 0000 		call __mulsf3
  28:nmea/nmea.h   **** 
  29:nmea/nmea.h   ****     return d;
  30:nmea/nmea.h   **** }
 2263               		.loc 8 30 0
 2264 08d6 462F      		mov r20,r22
 2265 08d8 572F      		mov r21,r23
 2266 08da 682F      		mov r22,r24
 2267 08dc 792F      		mov r23,r25
 2268 08de CB01      		movw r24,r22
 2269 08e0 BA01      		movw r22,r20
 2270               	/* epilogue start */
 2271 08e2 2696      		adiw r28,6
 2272 08e4 CDBF      		out __SP_L__,r28
 2273 08e6 DEBF      		out __SP_H__,r29
 2274 08e8 DF91      		pop r29
 2275 08ea CF91      		pop r28
 2276 08ec 1F91      		pop r17
 2277               	.LVL130:
 2278 08ee 0F91      		pop r16
 2279 08f0 FF90      		pop r15
 2280 08f2 EF90      		pop r14
 2281 08f4 DF90      		pop r13
 2282 08f6 CF90      		pop r12
 2283 08f8 BF90      		pop r11
 2284 08fa AF90      		pop r10
 2285 08fc 9F90      		pop r9
 2286 08fe 8F90      		pop r8
 2287 0900 7F90      		pop r7
 2288 0902 6F90      		pop r6
 2289 0904 5F90      		pop r5
 2290 0906 4F90      		pop r4
 2291 0908 3F90      		pop r3
 2292 090a 2F90      		pop r2
 2293 090c 0895      		ret
 2294               		.cfi_endproc
 2295               	.LFE63:
 2297               		.data
 2298               	.LC1:
 2299 0000 2C00      		.string	","
 2300               		.text
 2301               	.global	parse_nmea_string
 2303               	parse_nmea_string:
 2304               	.LFB64:
  31:nmea/nmea.h   **** 
  32:nmea/nmea.h   **** 
  33:nmea/nmea.h   **** 
  34:nmea/nmea.h   **** void parse_nmea_string(char *s, latlng *gps)
  35:nmea/nmea.h   **** {
 2305               		.loc 8 35 0
 2306               		.cfi_startproc
 2307               	.LVL131:
 2308 090e EF92      		push r14
 2309               	.LCFI64:
 2310               		.cfi_def_cfa_offset 3
 2311               		.cfi_offset 14, -2
 2312 0910 FF92      		push r15
 2313               	.LCFI65:
 2314               		.cfi_def_cfa_offset 4
 2315               		.cfi_offset 15, -3
 2316 0912 0F93      		push r16
 2317               	.LCFI66:
 2318               		.cfi_def_cfa_offset 5
 2319               		.cfi_offset 16, -4
 2320 0914 1F93      		push r17
 2321               	.LCFI67:
 2322               		.cfi_def_cfa_offset 6
 2323               		.cfi_offset 17, -5
 2324 0916 CF93      		push r28
 2325               	.LCFI68:
 2326               		.cfi_def_cfa_offset 7
 2327               		.cfi_offset 28, -6
 2328 0918 DF93      		push r29
 2329               	.LCFI69:
 2330               		.cfi_def_cfa_offset 8
 2331               		.cfi_offset 29, -7
 2332 091a CDB7      		in r28,__SP_L__
 2333 091c DEB7      		in r29,__SP_H__
 2334 091e A897      		sbiw r28,40
 2335               	.LCFI70:
 2336               		.cfi_def_cfa 28, 48
 2337 0920 CDBF      		out __SP_L__,r28
 2338 0922 DEBF      		out __SP_H__,r29
 2339               	/* prologue: function */
 2340               	/* frame size = 40 */
 2341               	/* stack size = 46 */
 2342               	.L__stack_usage = 46
 2343 0924 7B01      		movw r14,r22
 2344               	.LVL132:
  36:nmea/nmea.h   ****   int i=0; // used to iterate through array
  37:nmea/nmea.h   ****   char *token[20]; //stores the chunks of string after splitting the string on commas
  38:nmea/nmea.h   **** 
  39:nmea/nmea.h   ****   token[0] = strtok(s, ","); //get pointer to first token found and store in
 2345               		.loc 8 39 0
 2346 0926 60E0      		ldi r22,lo8(.LC1)
 2347 0928 70E0      		ldi r23,hi8(.LC1)
 2348               	.LVL133:
 2349 092a 0E94 0000 		call strtok
 2350               	.LVL134:
  40:nmea/nmea.h   ****                              //first element of array
  41:nmea/nmea.h   ****   while(token[i] != NULL) {  //while commas continue to be found
 2351               		.loc 8 41 0
 2352 092e 0097      		sbiw r24,0
 2353 0930 01F0      		breq .L85
 2354 0932 8E01      		movw r16,r28
 2355 0934 0D5F      		subi r16,lo8(-(3))
 2356 0936 1F4F      		sbci r17,hi8(-(3))
 2357               	.LVL135:
 2358               	.L86:
  42:nmea/nmea.h   ****       i++;  
  43:nmea/nmea.h   ****       token[i] = strtok(NULL, ","); //continue to split the string
 2359               		.loc 8 43 0
 2360 0938 80E0      		ldi r24,lo8(0)
 2361 093a 90E0      		ldi r25,hi8(0)
 2362 093c 60E0      		ldi r22,lo8(.LC1)
 2363 093e 70E0      		ldi r23,hi8(.LC1)
 2364 0940 0E94 0000 		call strtok
 2365 0944 F801      		movw r30,r16
 2366 0946 8193      		st Z+,r24
 2367 0948 9193      		st Z+,r25
 2368 094a 8F01      		movw r16,r30
  41:nmea/nmea.h   ****   while(token[i] != NULL) {  //while commas continue to be found
 2369               		.loc 8 41 0
 2370 094c 0097      		sbiw r24,0
 2371 094e 01F4      		brne .L86
 2372               	.L85:
 2373               	.LVL136:
  44:nmea/nmea.h   ****   }
  45:nmea/nmea.h   **** 
  46:nmea/nmea.h   ****   //Example: token = [], s = "a,b,c"
  47:nmea/nmea.h   ****   //Iteration 1
  48:nmea/nmea.h   ****   //token --> ["a"], s-->"b,c"
  49:nmea/nmea.h   ****   //token --> ["a", "b"], s-->"c"
  50:nmea/nmea.h   ****   //token --> ["a", "b", "c"], s-->""
  51:nmea/nmea.h   ****   //end
  52:nmea/nmea.h   **** 
  53:nmea/nmea.h   ****   //when parsing GPRMC data
  54:nmea/nmea.h   ****   //longitude should be stored at index 3
  55:nmea/nmea.h   ****   //latitude should be stord at index 5
  56:nmea/nmea.h   **** 
  57:nmea/nmea.h   ****   //indices will have to be changed if our gps module
  58:nmea/nmea.h   ****   //speaks a different dialog of NMEA
  59:nmea/nmea.h   **** 
  60:nmea/nmea.h   ****   char* lat_str = token[3]; //longitude
  61:nmea/nmea.h   ****   char* lng_str = token[5]; //latitude
 2374               		.loc 8 61 0
 2375 0950 0B85      		ldd r16,Y+11
 2376 0952 1C85      		ldd r17,Y+12
 2377               	.LVL137:
  62:nmea/nmea.h   **** 
  63:nmea/nmea.h   ****   //converts string stored in gps->lat_str to double and stores in lat
  64:nmea/nmea.h   ****   gps->lat = atof(lat_str)/100.;
 2378               		.loc 8 64 0
 2379 0954 8F81      		ldd r24,Y+7
 2380 0956 9885      		ldd r25,Y+8
 2381 0958 0E94 0000 		call atof
 2382               	.LVL138:
 2383 095c 20E0      		ldi r18,lo8(0x42c80000)
 2384 095e 30E0      		ldi r19,hi8(0x42c80000)
 2385 0960 48EC      		ldi r20,hlo8(0x42c80000)
 2386 0962 52E4      		ldi r21,hhi8(0x42c80000)
 2387 0964 0E94 0000 		call __divsf3
 2388 0968 DC01      		movw r26,r24
 2389 096a CB01      		movw r24,r22
 2390 096c F701      		movw r30,r14
 2391 096e 8083      		st Z,r24
 2392 0970 9183      		std Z+1,r25
 2393 0972 A283      		std Z+2,r26
 2394 0974 B383      		std Z+3,r27
  65:nmea/nmea.h   **** 
  66:nmea/nmea.h   ****   //converts string stored in gps->lng_str to double and stores in lng
  67:nmea/nmea.h   ****   gps->lng = atof(lng_str)/100.;
 2395               		.loc 8 67 0
 2396 0976 C801      		movw r24,r16
 2397 0978 0E94 0000 		call atof
 2398 097c 20E0      		ldi r18,lo8(0x42c80000)
 2399 097e 30E0      		ldi r19,hi8(0x42c80000)
 2400 0980 48EC      		ldi r20,hlo8(0x42c80000)
 2401 0982 52E4      		ldi r21,hhi8(0x42c80000)
 2402 0984 0E94 0000 		call __divsf3
 2403 0988 DC01      		movw r26,r24
 2404 098a CB01      		movw r24,r22
 2405 098c F701      		movw r30,r14
 2406 098e 8483      		std Z+4,r24
 2407 0990 9583      		std Z+5,r25
 2408 0992 A683      		std Z+6,r26
 2409 0994 B783      		std Z+7,r27
 2410               	/* epilogue start */
  68:nmea/nmea.h   **** }
 2411               		.loc 8 68 0
 2412 0996 A896      		adiw r28,40
 2413 0998 CDBF      		out __SP_L__,r28
 2414 099a DEBF      		out __SP_H__,r29
 2415 099c DF91      		pop r29
 2416 099e CF91      		pop r28
 2417 09a0 1F91      		pop r17
 2418 09a2 0F91      		pop r16
 2419               	.LVL139:
 2420 09a4 FF90      		pop r15
 2421 09a6 EF90      		pop r14
 2422               	.LVL140:
 2423 09a8 0895      		ret
 2424               		.cfi_endproc
 2425               	.LFE64:
 2427               		.data
 2428               	.LC2:
 2429 0002 2447 5052 		.string	"$GPRMC,71.132,A,4230.00,N,-7130.00,E,11.2,0.0,261206,0.0,E*50\r\n"
 2429      4D43 2C37 
 2429      312E 3133 
 2429      322C 412C 
 2429      3432 3330 
 2430               	.LC3:
 2431 0042 2566 00   		.string	"%f"
 2432               		.text
 2433               	.global	parse_nmea
 2435               	parse_nmea:
 2436               	.LFB65:
  69:nmea/nmea.h   **** 
  70:nmea/nmea.h   **** 
  71:nmea/nmea.h   **** char* parse_nmea(void) {
 2437               		.loc 8 71 0
 2438               		.cfi_startproc
 2439 09aa 2F92      		push r2
 2440               	.LCFI71:
 2441               		.cfi_def_cfa_offset 3
 2442               		.cfi_offset 2, -2
 2443 09ac 3F92      		push r3
 2444               	.LCFI72:
 2445               		.cfi_def_cfa_offset 4
 2446               		.cfi_offset 3, -3
 2447 09ae 4F92      		push r4
 2448               	.LCFI73:
 2449               		.cfi_def_cfa_offset 5
 2450               		.cfi_offset 4, -4
 2451 09b0 5F92      		push r5
 2452               	.LCFI74:
 2453               		.cfi_def_cfa_offset 6
 2454               		.cfi_offset 5, -5
 2455 09b2 6F92      		push r6
 2456               	.LCFI75:
 2457               		.cfi_def_cfa_offset 7
 2458               		.cfi_offset 6, -6
 2459 09b4 7F92      		push r7
 2460               	.LCFI76:
 2461               		.cfi_def_cfa_offset 8
 2462               		.cfi_offset 7, -7
 2463 09b6 8F92      		push r8
 2464               	.LCFI77:
 2465               		.cfi_def_cfa_offset 9
 2466               		.cfi_offset 8, -8
 2467 09b8 9F92      		push r9
 2468               	.LCFI78:
 2469               		.cfi_def_cfa_offset 10
 2470               		.cfi_offset 9, -9
 2471 09ba AF92      		push r10
 2472               	.LCFI79:
 2473               		.cfi_def_cfa_offset 11
 2474               		.cfi_offset 10, -10
 2475 09bc BF92      		push r11
 2476               	.LCFI80:
 2477               		.cfi_def_cfa_offset 12
 2478               		.cfi_offset 11, -11
 2479 09be CF92      		push r12
 2480               	.LCFI81:
 2481               		.cfi_def_cfa_offset 13
 2482               		.cfi_offset 12, -12
 2483 09c0 DF92      		push r13
 2484               	.LCFI82:
 2485               		.cfi_def_cfa_offset 14
 2486               		.cfi_offset 13, -13
 2487 09c2 EF92      		push r14
 2488               	.LCFI83:
 2489               		.cfi_def_cfa_offset 15
 2490               		.cfi_offset 14, -14
 2491 09c4 FF92      		push r15
 2492               	.LCFI84:
 2493               		.cfi_def_cfa_offset 16
 2494               		.cfi_offset 15, -15
 2495 09c6 0F93      		push r16
 2496               	.LCFI85:
 2497               		.cfi_def_cfa_offset 17
 2498               		.cfi_offset 16, -16
 2499 09c8 1F93      		push r17
 2500               	.LCFI86:
 2501               		.cfi_def_cfa_offset 18
 2502               		.cfi_offset 17, -17
 2503 09ca CF93      		push r28
 2504               	.LCFI87:
 2505               		.cfi_def_cfa_offset 19
 2506               		.cfi_offset 28, -18
 2507 09cc DF93      		push r29
 2508               	.LCFI88:
 2509               		.cfi_def_cfa_offset 20
 2510               		.cfi_offset 29, -19
 2511 09ce CDB7      		in r28,__SP_L__
 2512 09d0 DEB7      		in r29,__SP_H__
 2513 09d2 C653      		subi r28,lo8(-(-310))
 2514 09d4 D140      		sbci r29,hi8(-(-310))
 2515               	.LCFI89:
 2516               		.cfi_def_cfa 28, 330
 2517 09d6 CDBF      		out __SP_L__,r28
 2518 09d8 DEBF      		out __SP_H__,r29
 2519               	/* prologue: function */
 2520               	/* frame size = 310 */
 2521               	/* stack size = 328 */
 2522               	.L__stack_usage = 328
 2523               	.LVL141:
 2524               	.LBB1373:
 2525               	.LBB1374:
  39:nmea/nmea.h   ****   token[0] = strtok(s, ","); //get pointer to first token found and store in
 2526               		.loc 8 39 0
 2527 09da 80E0      		ldi r24,lo8(.LC2)
 2528 09dc 90E0      		ldi r25,hi8(.LC2)
 2529 09de 60E0      		ldi r22,lo8(.LC1)
 2530 09e0 70E0      		ldi r23,hi8(.LC1)
 2531 09e2 0E94 0000 		call strtok
  41:nmea/nmea.h   ****   while(token[i] != NULL) {  //while commas continue to be found
 2532               		.loc 8 41 0
 2533 09e6 0097      		sbiw r24,0
 2534 09e8 01F0      		breq .L89
 2535 09ea 8E01      		movw r16,r28
 2536 09ec 0D5F      		subi r16,lo8(-(3))
 2537 09ee 1F4F      		sbci r17,hi8(-(3))
 2538               	.LVL142:
 2539               	.L90:
  43:nmea/nmea.h   ****       token[i] = strtok(NULL, ","); //continue to split the string
 2540               		.loc 8 43 0
 2541 09f0 80E0      		ldi r24,lo8(0)
 2542 09f2 90E0      		ldi r25,hi8(0)
 2543 09f4 60E0      		ldi r22,lo8(.LC1)
 2544 09f6 70E0      		ldi r23,hi8(.LC1)
 2545 09f8 0E94 0000 		call strtok
 2546 09fc D801      		movw r26,r16
 2547 09fe 8D93      		st X+,r24
 2548 0a00 9D93      		st X+,r25
 2549 0a02 8D01      		movw r16,r26
  41:nmea/nmea.h   ****   while(token[i] != NULL) {  //while commas continue to be found
 2550               		.loc 8 41 0
 2551 0a04 0097      		sbiw r24,0
 2552 0a06 01F4      		brne .L90
 2553               	.L89:
 2554               	.LVL143:
  61:nmea/nmea.h   ****   char* lng_str = token[5]; //latitude
 2555               		.loc 8 61 0
 2556 0a08 0B85      		ldd r16,Y+11
 2557 0a0a 1C85      		ldd r17,Y+12
 2558               	.LVL144:
  64:nmea/nmea.h   ****   gps->lat = atof(lat_str)/100.;
 2559               		.loc 8 64 0
 2560 0a0c 8F81      		ldd r24,Y+7
 2561 0a0e 9885      		ldd r25,Y+8
 2562 0a10 0E94 0000 		call atof
 2563               	.LVL145:
 2564 0a14 20E0      		ldi r18,lo8(0x42c80000)
 2565 0a16 30E0      		ldi r19,hi8(0x42c80000)
 2566 0a18 48EC      		ldi r20,hlo8(0x42c80000)
 2567 0a1a 52E4      		ldi r21,hhi8(0x42c80000)
 2568 0a1c 0E94 0000 		call __divsf3
 2569 0a20 A62E      		mov r10,r22
 2570 0a22 872E      		mov r8,r23
 2571 0a24 482E      		mov r4,r24
 2572 0a26 292E      		mov r2,r25
  67:nmea/nmea.h   ****   gps->lng = atof(lng_str)/100.;
 2573               		.loc 8 67 0
 2574 0a28 C801      		movw r24,r16
 2575 0a2a 0E94 0000 		call atof
 2576 0a2e 20E0      		ldi r18,lo8(0x42c80000)
 2577 0a30 30E0      		ldi r19,hi8(0x42c80000)
 2578 0a32 48EC      		ldi r20,hlo8(0x42c80000)
 2579 0a34 52E4      		ldi r21,hhi8(0x42c80000)
 2580 0a36 0E94 0000 		call __divsf3
 2581 0a3a B62E      		mov r11,r22
 2582 0a3c 972E      		mov r9,r23
 2583 0a3e 382E      		mov r3,r24
 2584 0a40 C15D      		subi r28,lo8(-303)
 2585 0a42 DE4F      		sbci r29,hi8(-303)
 2586 0a44 9883      		st Y,r25
 2587 0a46 CF52      		subi r28,lo8(303)
 2588 0a48 D140      		sbci r29,hi8(303)
 2589               	.LBE1374:
 2590               	.LBE1373:
  72:nmea/nmea.h   ****  
  73:nmea/nmea.h   ****     char *buff = "$GPRMC,71.132,A,4230.00,N,-7130.00,E,11.2,0.0,261206,0.0,E*50\r\n";
  74:nmea/nmea.h   **** 
  75:nmea/nmea.h   ****     //latlng struct to store gps data in
  76:nmea/nmea.h   ****     //reused in every iterationif (d
  77:nmea/nmea.h   ****   
  78:nmea/nmea.h   ****     latlng gps;
  79:nmea/nmea.h   **** 
  80:nmea/nmea.h   ****     //parse lat and lng out of raw nmea string
  81:nmea/nmea.h   ****     parse_nmea_string(buff, &gps);
  82:nmea/nmea.h   **** 
  83:nmea/nmea.h   ****     double dist = distance(gps.lat, gps.lng);
 2591               		.loc 8 83 0
 2592 0a4a 8A2D      		mov r24,r10
 2593 0a4c 982D      		mov r25,r8
 2594 0a4e A42D      		mov r26,r4
 2595 0a50 B22D      		mov r27,r2
 2596 0a52 BC01      		movw r22,r24
 2597 0a54 CD01      		movw r24,r26
 2598 0a56 C15D      		subi r28,lo8(-303)
 2599 0a58 DE4F      		sbci r29,hi8(-303)
 2600 0a5a 4881      		ld r20,Y
 2601 0a5c CF52      		subi r28,lo8(303)
 2602 0a5e D140      		sbci r29,hi8(303)
 2603 0a60 0B2D      		mov r16,r11
 2604               	.LVL146:
 2605 0a62 192D      		mov r17,r9
 2606 0a64 232D      		mov r18,r3
 2607 0a66 342F      		mov r19,r20
 2608 0a68 A901      		movw r20,r18
 2609 0a6a 9801      		movw r18,r16
 2610 0a6c 0E94 0000 		call distance
 2611 0a70 6B01      		movw r12,r22
 2612 0a72 7C01      		movw r14,r24
 2613               	.LVL147:
  84:nmea/nmea.h   **** 
  85:nmea/nmea.h   ****     char** result = malloc(30 * sizeof(char*));
 2614               		.loc 8 85 0
 2615 0a74 8CE3      		ldi r24,lo8(60)
 2616 0a76 90E0      		ldi r25,hi8(60)
 2617 0a78 0E94 0000 		call malloc
 2618               	.LVL148:
 2619 0a7c CD5C      		subi r28,lo8(-307)
 2620 0a7e DE4F      		sbci r29,hi8(-307)
 2621 0a80 8883      		st Y,r24
 2622 0a82 C353      		subi r28,lo8(307)
 2623 0a84 D140      		sbci r29,hi8(307)
 2624 0a86 CC5C      		subi r28,lo8(-308)
 2625 0a88 DE4F      		sbci r29,hi8(-308)
 2626 0a8a 9883      		st Y,r25
 2627 0a8c C453      		subi r28,lo8(308)
 2628 0a8e D140      		sbci r29,hi8(308)
 2629               	.LVL149:
  86:nmea/nmea.h   **** 
  87:nmea/nmea.h   ****     if (dist > max_dist) {
 2630               		.loc 8 87 0
 2631 0a90 C701      		movw r24,r14
 2632 0a92 B601      		movw r22,r12
 2633 0a94 2091 0000 		lds r18,max_dist
 2634 0a98 3091 0000 		lds r19,max_dist+1
 2635 0a9c 4091 0000 		lds r20,max_dist+2
 2636 0aa0 5091 0000 		lds r21,max_dist+3
 2637 0aa4 0E94 0000 		call __gtsf2
 2638 0aa8 1816      		cp __zero_reg__,r24
 2639 0aaa 04F4      		brge .+2
 2640 0aac 00C0      		rjmp .L206
 2641               	.LVL150:
 2642               	.L91:
 2643               	.LBB1375:
 2644               	.LBB1376:
 2645               	.LBB1377:
 2646               	.LBB1378:
 110:usb/usb_pipe.h **** 	p->data->flush = 1;
 2647               		.loc 2 110 0
 2648 0aae 81E0      		ldi r24,lo8(1)
 2649 0ab0 8093 0000 		sts ep_in_data+1,r24
 2650               	.LVL151:
 2651               	.LBB1379:
 2652               	.LBB1380:
 2653               	.LBB1381:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 2654               		.loc 2 80 0
 2655 0ab4 5FB7      		in r21,__SREG__
 2656               	.LVL152:
 2657               	.LBB1382:
 2658               	.LBB1383:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 2659               		.loc 3 50 0
 2660               	/* #APP */
 2661               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 2662 0ab6 F894      		cli
 2663               	 ;  0 "" 2
 2664               	.LVL153:
 2665               	/* #NOAPP */
 2666               	.LBE1383:
 2667               	.LBE1382:
 2668               	.LBB1384:
 2669               	.LBB1385:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 2670               		.loc 5 220 0
 2671 0ab8 8091 0000 		lds r24,endpoints+24
 2672 0abc 8670      		andi r24,lo8(6)
 2673               	.LBE1385:
 2674               	.LBE1384:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 2675               		.loc 2 82 0
 2676 0abe 01F0      		breq .L169
 2677               	.LBB1386:
 2678               	.LBB1387:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 2679               		.loc 4 51 0
 2680 0ac0 4091 0000 		lds r20,ep_in_pipe_data+4
 2681               	.LBE1387:
 2682               	.LBE1386:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 2683               		.loc 2 83 0
 2684 0ac4 1416      		cp __zero_reg__,r20
 2685 0ac6 04F0      		brlt .+2
 2686 0ac8 00C0      		rjmp .L170
 2687               	.LBB1388:
 2688               	.LBB1389:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 2689               		.loc 4 62 0
 2690 0aca 8091 0000 		lds r24,ep_in_pipe_data
 2691 0ace 9091 0000 		lds r25,ep_in_pipe_data+1
 2692               	.LVL154:
 2693               	.LBE1389:
 2694               	.LBE1388:
 2695               	.LBB1390:
 2696               	.LBB1391:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 2697               		.loc 2 68 0
 2698 0ad2 2091 0000 		lds r18,ep_in_data
 2699               	.LVL155:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 2700               		.loc 2 69 0
 2701 0ad6 31E0      		ldi r19,lo8(1)
 2702 0ad8 2130      		cpi r18,lo8(1)
 2703 0ada 01F4      		brne .L171
 2704 0adc 30E0      		ldi r19,lo8(0)
 2705               	.L171:
 2706 0ade 3093 0000 		sts ep_in_data,r19
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 2707               		.loc 2 72 0
 2708 0ae2 2223      		tst r18
 2709 0ae4 01F0      		breq .+2
 2710 0ae6 00C0      		rjmp .L172
 2711               	.LVL156:
 2712               	.LBB1392:
 2713               	.LBB1393:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 2714               		.loc 5 168 0
 2715 0ae8 8093 0000 		sts endpoints+28,r24
 2716 0aec 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 2717               		.loc 5 169 0
 2718 0af0 20E4      		ldi r18,lo8(64)
 2719 0af2 30E0      		ldi r19,hi8(64)
 2720 0af4 2093 0000 		sts endpoints+26,r18
 2721 0af8 3093 0000 		sts endpoints+26+1,r19
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 2722               		.loc 5 174 0
 2723 0afc E0E0      		ldi r30,lo8(endpoints+24)
 2724 0afe F0E0      		ldi r31,hi8(endpoints+24)
 2725               	/* #APP */
 2726               	 ;  174 "usb/usb.h" 1
 2727 0b00 02E2      		ldi r16, 34
 2728 0b02 0693      		.dc.w 0x9306
 2729               		
 2730               	 ;  0 "" 2
 2731               	.LVL157:
 2732               	/* #NOAPP */
 2733               	.L173:
 2734               	.LBE1393:
 2735               	.LBE1392:
 2736               	.LBE1391:
 2737               	.LBE1390:
 2738               	.LBB1397:
 2739               	.LBB1398:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 2740               		.loc 4 72 0
 2741 0b04 4150      		subi r20,lo8(-(-1))
 2742 0b06 4093 0000 		sts ep_in_pipe_data+4,r20
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 2743               		.loc 4 73 0
 2744 0b0a 805C      		subi r24,lo8(-(64))
 2745 0b0c 9F4F      		sbci r25,hi8(-(64))
 2746 0b0e 8093 0000 		sts ep_in_pipe_data,r24
 2747 0b12 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 2748               		.loc 4 75 0
 2749 0b16 B0E0      		ldi r27,hi8(ep_in_pipe_buffer+512)
 2750 0b18 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 2751 0b1a 9B07      		cpc r25,r27
 2752 0b1c 01F4      		brne .+2
 2753 0b1e 00C0      		rjmp .L207
 2754               	.LVL158:
 2755               	.L169:
 2756               	.LBE1398:
 2757               	.LBE1397:
 2758               	.LBB1400:
 2759               	.LBB1401:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 2760               		.loc 3 70 0
 2761 0b20 5FBF      		out __SREG__,r21
 2762               		.loc 3 71 0
 2763               	.LBE1401:
 2764               	.LBE1400:
 2765               	.LBE1381:
 2766               	.LBE1380:
 2767               	.LBE1379:
 2768               	.LBE1378:
 2769               	.LBE1377:
  27:Framework.h   ****     USB.INTFLAGSBSET = USB_TRNIF_bm;
 2770               		.loc 1 27 0
 2771 0b22 82E0      		ldi r24,lo8(2)
 2772 0b24 E0EC      		ldi r30,lo8(1216)
 2773 0b26 F4E0      		ldi r31,hi8(1216)
 2774 0b28 8587      		std Z+13,r24
 2775               	.LBB1431:
 2776               	.LBB1432:
 2777               	.LBB1433:
 2778               	.LBB1434:
 2779               	.LBB1435:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 2780               		.loc 4 57 0
 2781 0b2a 96E0      		ldi r25,lo8(6)
 2782               	.L178:
 2783               	.LVL159:
 2784               	.LBE1435:
 2785               	.LBE1434:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 2786               		.loc 2 123 0
 2787 0b2c 2FB7      		in r18,__SREG__
 2788               	.LVL160:
 2789               	.LBB1437:
 2790               	.LBB1438:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 2791               		.loc 3 50 0
 2792               	/* #APP */
 2793               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 2794 0b2e F894      		cli
 2795               	 ;  0 "" 2
 2796               	.LVL161:
 2797               	/* #NOAPP */
 2798               	.LBE1438:
 2799               	.LBE1437:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 2800               		.loc 2 124 0
 2801 0b30 8091 0000 		lds r24,ep_in_data+1
 2802 0b34 8823      		tst r24
 2803 0b36 01F4      		brne .+2
 2804 0b38 00C0      		rjmp .L208
 2805               	.L188:
 125:usb/usb_pipe.h **** 			r = false;
 2806               		.loc 2 125 0
 2807 0b3a 80E0      		ldi r24,lo8(0)
 2808               	.L180:
 2809               	.LBB1439:
 2810               	.LBB1440:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 2811               		.loc 3 70 0
 2812 0b3c 2FBF      		out __SREG__,r18
 2813               		.loc 3 71 0
 2814               	.LBE1440:
 2815               	.LBE1439:
 2816               	.LBE1433:
 2817               	.LBE1432:
 2818               	.LBE1431:
  28:Framework.h   ****     while (!usb_pipe_can_write(&ep_in)){
 2819               		.loc 1 28 0
 2820 0b3e 8823      		tst r24
 2821 0b40 01F4      		brne .L179
  29:Framework.h   ****         if (timeout_or_sampling_no_longer_enabled){
 2822               		.loc 1 29 0
 2823 0b42 8091 0000 		lds r24,timeout_or_sampling_no_longer_enabled
 2824 0b46 8823      		tst r24
 2825 0b48 01F0      		breq .L178
 2826               	.LVL162:
 2827               	.LBB1444:
 2828               	.LBB1445:
 2829               	.LBB1446:
  54:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 2830               		.loc 2 54 0
 2831 0b4a 2FB7      		in r18,__SREG__
 2832               	.LVL163:
 2833               	.LBB1447:
 2834               	.LBB1448:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 2835               		.loc 3 50 0
 2836               	/* #APP */
 2837               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 2838 0b4c F894      		cli
 2839               	 ;  0 "" 2
 2840               	.LVL164:
 2841               	/* #NOAPP */
 2842               	.LBE1448:
 2843               	.LBE1447:
 2844               	.LBB1449:
 2845               	.LBB1450:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 2846               		.loc 4 90 0
 2847 0b4e 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 2848               		.loc 4 91 0
 2849 0b52 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 2850 0b54 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 2851 0b56 8093 0000 		sts ep_in_pipe_data+2,r24
 2852 0b5a 9093 0000 		sts ep_in_pipe_data+2+1,r25
 2853 0b5e 8093 0000 		sts ep_in_pipe_data,r24
 2854 0b62 9093 0000 		sts ep_in_pipe_data+1,r25
 2855               	.LVL165:
 2856               	.LBE1450:
 2857               	.LBE1449:
 2858               	.LBB1451:
 2859               	.LBB1452:
 158:usb/usb.h     **** 		LASR16(&e->STATUS, USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 2860               		.loc 5 158 0
 2861 0b66 E0E0      		ldi r30,lo8(endpoints+24)
 2862 0b68 F0E0      		ldi r31,hi8(endpoints+24)
 2863               	/* #APP */
 2864               	 ;  158 "usb/usb.h" 1
 2865 0b6a 06E0      		ldi r16, 6
 2866 0b6c 0593      		.dc.w 0x9305
 2867               		
 2868               	 ;  0 "" 2
 159:usb/usb.h     **** 		LACR16(&e->STATUS, USB_EP_BANK_bm);
 2869               		.loc 5 159 0
 2870               	 ;  159 "usb/usb.h" 1
 2871 0b6e 08E0      		ldi r16, 8
 2872 0b70 0693      		.dc.w 0x9306
 2873               		
 2874               	 ;  0 "" 2
 2875               	/* #NOAPP */
 2876               	.LBE1452:
 2877               	.LBE1451:
  57:usb/usb_pipe.h **** 		p->data->flush = 0;
 2878               		.loc 2 57 0
 2879 0b72 1092 0000 		sts ep_in_data+1,__zero_reg__
  58:usb/usb_pipe.h **** 		p->data->packet_offset = 0;
 2880               		.loc 2 58 0
 2881 0b76 1092 0000 		sts ep_in_data+2,__zero_reg__
 2882 0b7a 1092 0000 		sts ep_in_data+2+1,__zero_reg__
  59:usb/usb_pipe.h **** 		p->data->bank = 0;
 2883               		.loc 2 59 0
 2884 0b7e 1092 0000 		sts ep_in_data,__zero_reg__
 2885               	.LVL166:
 2886               	.LBB1453:
 2887               	.LBB1454:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 2888               		.loc 3 70 0
 2889 0b82 2FBF      		out __SREG__,r18
 2890               		.loc 3 71 0
 2891               	.LVL167:
 2892               	.L179:
 2893               	.LBE1454:
 2894               	.LBE1453:
 2895               	.LBE1446:
 2896               	.LBE1445:
 2897               	.LBE1444:
 2898               	.LBE1376:
 2899               	.LBE1375:
  88:nmea/nmea.h   **** 
  89:nmea/nmea.h   ****       char lat_buff[100];
  90:nmea/nmea.h   ****       char lng_buff[100];
  91:nmea/nmea.h   ****       char dist_buff[100];
  92:nmea/nmea.h   **** 
  93:nmea/nmea.h   ****       sprintf(lat_buff, "%f", gps.lat);
  94:nmea/nmea.h   ****       sprintf(lng_buff, "%f", gps.lng);
  95:nmea/nmea.h   ****       sprintf(dist_buff, "%f", dist);
  96:nmea/nmea.h   **** 
  97:nmea/nmea.h   ****       //determine how many characters are in the gps latitude and longitude strings
  98:nmea/nmea.h   ****       int len_lat = strlen(lat_buff);
  99:nmea/nmea.h   ****       int len_lng = strlen(lng_buff);
 100:nmea/nmea.h   ****       int len_dist = strlen(dist_buff);
 101:nmea/nmea.h   **** 
 102:nmea/nmea.h   ****       //iterate over lat and lng strings, sending them char by char over usb
 103:nmea/nmea.h   ****       for (int i=0; i<len_lat; i++) {
 104:nmea/nmea.h   ****         send_byte(lat_buff[i]);  
 105:nmea/nmea.h   ****       }
 106:nmea/nmea.h   **** 
 107:nmea/nmea.h   ****       //lat/lng seperator 
 108:nmea/nmea.h   ****       send_byte(' ');  
 109:nmea/nmea.h   ****       for (int j=0; j<len_lng; j++) {
 110:nmea/nmea.h   ****         send_byte(lng_buff[j]);  
 111:nmea/nmea.h   ****       }
 112:nmea/nmea.h   **** 
 113:nmea/nmea.h   ****             //lat/lng seperator 
 114:nmea/nmea.h   ****       send_byte(' ');  
 115:nmea/nmea.h   ****       for (int k=0; k<len_dist; k++) {
 116:nmea/nmea.h   ****         send_byte(dist_buff[k]);  
 117:nmea/nmea.h   ****       }
 118:nmea/nmea.h   **** 
 119:nmea/nmea.h   ****       char* lat_str = &lat_buff[0];
 120:nmea/nmea.h   ****       char* lng_str = &lng_buff[0];
 121:nmea/nmea.h   ****       *result = concat(concat(lat_str, ","), lng_str);
 122:nmea/nmea.h   ****     }
 123:nmea/nmea.h   **** 
 124:nmea/nmea.h   ****     //presumably has to do with memory management
 125:nmea/nmea.h   ****     //for now, just make sure to call if after you're done sending bytes over usb
 126:nmea/nmea.h   ****     break_and_flush();
 127:nmea/nmea.h   ****     return *result;
 128:nmea/nmea.h   **** }
 2900               		.loc 8 128 0
 2901 0b84 CD5C      		subi r28,lo8(-307)
 2902 0b86 DE4F      		sbci r29,hi8(-307)
 2903 0b88 E881      		ld r30,Y
 2904 0b8a F981      		ldd r31,Y+1
 2905 0b8c C353      		subi r28,lo8(307)
 2906 0b8e D140      		sbci r29,hi8(307)
 2907 0b90 8081      		ld r24,Z
 2908 0b92 9181      		ldd r25,Z+1
 2909               	/* epilogue start */
 2910 0b94 CA5C      		subi r28,lo8(-(310))
 2911 0b96 DE4F      		sbci r29,hi8(-(310))
 2912 0b98 CDBF      		out __SP_L__,r28
 2913 0b9a DEBF      		out __SP_H__,r29
 2914 0b9c DF91      		pop r29
 2915 0b9e CF91      		pop r28
 2916 0ba0 1F91      		pop r17
 2917 0ba2 0F91      		pop r16
 2918 0ba4 FF90      		pop r15
 2919 0ba6 EF90      		pop r14
 2920 0ba8 DF90      		pop r13
 2921 0baa CF90      		pop r12
 2922 0bac BF90      		pop r11
 2923 0bae AF90      		pop r10
 2924 0bb0 9F90      		pop r9
 2925 0bb2 8F90      		pop r8
 2926 0bb4 7F90      		pop r7
 2927 0bb6 6F90      		pop r6
 2928 0bb8 5F90      		pop r5
 2929 0bba 4F90      		pop r4
 2930 0bbc 3F90      		pop r3
 2931 0bbe 2F90      		pop r2
 2932 0bc0 0895      		ret
 2933               	.LVL168:
 2934               	.L208:
 2935               	.LBB1462:
 2936               	.LBB1459:
 2937               	.LBB1455:
 2938               	.LBB1443:
 2939               	.LBB1442:
 2940               	.LBB1441:
 2941               	.LBB1436:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 2942               		.loc 4 57 0
 2943 0bc2 8091 0000 		lds r24,ep_in_pipe_data+4
 2944 0bc6 392F      		mov r19,r25
 2945 0bc8 381B      		sub r19,r24
 2946               	.LBE1436:
 2947               	.LBE1441:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 2948               		.loc 2 127 0
 2949 0bca 81E0      		ldi r24,lo8(1)
 2950 0bcc 1316      		cp __zero_reg__,r19
 2951 0bce 04F4      		brge .+2
 2952 0bd0 00C0      		rjmp .L180
 2953 0bd2 00C0      		rjmp .L188
 2954               	.LVL169:
 2955               	.L172:
 2956               	.LBE1442:
 2957               	.LBE1443:
 2958               	.LBE1455:
 2959               	.LBB1456:
 2960               	.LBB1428:
 2961               	.LBB1425:
 2962               	.LBB1422:
 2963               	.LBB1419:
 2964               	.LBB1402:
 2965               	.LBB1396:
 2966               	.LBB1394:
 2967               	.LBB1395:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 2968               		.loc 5 168 0
 2969 0bd4 8093 0000 		sts endpoints+20,r24
 2970 0bd8 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 2971               		.loc 5 169 0
 2972 0bdc 20E4      		ldi r18,lo8(64)
 2973 0bde 30E0      		ldi r19,hi8(64)
 2974               	.LVL170:
 2975 0be0 2093 0000 		sts endpoints+18,r18
 2976 0be4 3093 0000 		sts endpoints+18+1,r19
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 2977               		.loc 5 176 0
 2978 0be8 E0E0      		ldi r30,lo8(endpoints+24)
 2979 0bea F0E0      		ldi r31,hi8(endpoints+24)
 2980               	/* #APP */
 2981               	 ;  176 "usb/usb.h" 1
 2982 0bec 04E1      		ldi r16, 20
 2983 0bee 0693      		.dc.w 0x9306
 2984               		
 2985               	 ;  0 "" 2
 2986               	/* #NOAPP */
 2987 0bf0 00C0      		rjmp .L173
 2988               	.LVL171:
 2989               	.L207:
 2990               	.LBE1395:
 2991               	.LBE1394:
 2992               	.LBE1396:
 2993               	.LBE1402:
 2994               	.LBB1403:
 2995               	.LBB1399:
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 2996               		.loc 4 76 0
 2997 0bf2 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 2998 0bf4 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 2999 0bf6 8093 0000 		sts ep_in_pipe_data,r24
 3000 0bfa 9093 0000 		sts ep_in_pipe_data+1,r25
 3001 0bfe 00C0      		rjmp .L169
 3002               	.LVL172:
 3003               	.L170:
 3004               	.LBE1399:
 3005               	.LBE1403:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 3006               		.loc 2 87 0
 3007 0c00 8091 0000 		lds r24,ep_in_data+1
 3008 0c04 8130      		cpi r24,lo8(1)
 3009 0c06 01F4      		brne .+2
 3010 0c08 00C0      		rjmp .L209
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 3011               		.loc 2 91 0
 3012 0c0a 8230      		cpi r24,lo8(2)
 3013 0c0c 01F0      		breq .+2
 3014 0c0e 00C0      		rjmp .L169
 3015               	.LVL173:
 3016               	.LBB1404:
 3017               	.LBB1405:
 3018               	.LBB1406:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 3019               		.loc 5 228 0
 3020 0c10 8091 0000 		lds r24,endpoints+24
 3021 0c14 8670      		andi r24,lo8(6)
 3022               	.LBE1406:
 3023               	.LBE1405:
 3024               	.LBE1404:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 3025               		.loc 2 91 0
 3026 0c16 8630      		cpi r24,lo8(6)
 3027 0c18 01F0      		breq .+2
 3028 0c1a 00C0      		rjmp .L169
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 3029               		.loc 2 92 0
 3030 0c1c 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 3031               		.loc 2 93 0
 3032 0c20 1092 0000 		sts ep_in_data+2,__zero_reg__
 3033 0c24 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 3034               	.LBB1407:
 3035               	.LBB1408:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 3036               		.loc 4 90 0
 3037 0c28 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 3038               		.loc 4 91 0
 3039 0c2c 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 3040 0c2e 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 3041 0c30 8093 0000 		sts ep_in_pipe_data+2,r24
 3042 0c34 9093 0000 		sts ep_in_pipe_data+2+1,r25
 3043 0c38 8093 0000 		sts ep_in_pipe_data,r24
 3044 0c3c 9093 0000 		sts ep_in_pipe_data+1,r25
 3045               	.LVL174:
 3046 0c40 00C0      		rjmp .L169
 3047               	.LVL175:
 3048               	.L206:
 3049               	.LBE1408:
 3050               	.LBE1407:
 3051               	.LBE1419:
 3052               	.LBE1422:
 3053               	.LBE1425:
 3054               	.LBE1428:
 3055               	.LBE1456:
 3056               	.LBE1459:
 3057               	.LBE1462:
 3058               	.LBB1463:
  93:nmea/nmea.h   ****       sprintf(lat_buff, "%f", gps.lat);
 3059               		.loc 8 93 0
 3060 0c42 EDB7      		in r30,__SP_L__
 3061 0c44 FEB7      		in r31,__SP_H__
 3062 0c46 3897      		sbiw r30,8
 3063 0c48 EDBF      		out __SP_L__,r30
 3064 0c4a FEBF      		out __SP_H__,r31
 3065 0c4c 3196      		adiw r30,1
 3066 0c4e 49EC      		ldi r20,lo8(201)
 3067 0c50 642E      		mov r6,r20
 3068 0c52 712C      		mov r7,__zero_reg__
 3069 0c54 6C0E      		add r6,r28
 3070 0c56 7D1E      		adc r7,r29
 3071 0c58 ADB7      		in r26,__SP_L__
 3072 0c5a BEB7      		in r27,__SP_H__
 3073 0c5c 1196      		adiw r26,1
 3074 0c5e 6D92      		st X+,r6
 3075 0c60 7C92      		st X,r7
 3076 0c62 1297      		sbiw r26,1+1
 3077 0c64 00E0      		ldi r16,lo8(.LC3)
 3078 0c66 10E0      		ldi r17,hi8(.LC3)
 3079 0c68 0283      		std Z+2,r16
 3080 0c6a 1383      		std Z+3,r17
 3081 0c6c 2A2D      		mov r18,r10
 3082 0c6e 382D      		mov r19,r8
 3083 0c70 442D      		mov r20,r4
 3084 0c72 522D      		mov r21,r2
 3085 0c74 C901      		movw r24,r18
 3086 0c76 DA01      		movw r26,r20
 3087 0c78 8483      		std Z+4,r24
 3088 0c7a 9583      		std Z+5,r25
 3089 0c7c A683      		std Z+6,r26
 3090 0c7e B783      		std Z+7,r27
 3091               		.cfi_escape 0x2e,0x8
 3092 0c80 0E94 0000 		call sprintf
  94:nmea/nmea.h   ****       sprintf(lng_buff, "%f", gps.lng);
 3093               		.loc 8 94 0
 3094 0c84 EDB7      		in r30,__SP_L__
 3095 0c86 FEB7      		in r31,__SP_H__
 3096 0c88 3196      		adiw r30,1
 3097 0c8a 55E6      		ldi r21,lo8(101)
 3098 0c8c 452E      		mov r4,r21
 3099 0c8e 512C      		mov r5,__zero_reg__
 3100 0c90 4C0E      		add r4,r28
 3101 0c92 5D1E      		adc r5,r29
 3102 0c94 ADB7      		in r26,__SP_L__
 3103 0c96 BEB7      		in r27,__SP_H__
 3104 0c98 1196      		adiw r26,1
 3105 0c9a 4D92      		st X+,r4
 3106 0c9c 5C92      		st X,r5
 3107 0c9e 1297      		sbiw r26,1+1
 3108 0ca0 0283      		std Z+2,r16
 3109 0ca2 1383      		std Z+3,r17
 3110 0ca4 2B2D      		mov r18,r11
 3111 0ca6 392D      		mov r19,r9
 3112 0ca8 432D      		mov r20,r3
 3113 0caa C15D      		subi r28,lo8(-303)
 3114 0cac DE4F      		sbci r29,hi8(-303)
 3115 0cae 5881      		ld r21,Y
 3116 0cb0 CF52      		subi r28,lo8(303)
 3117 0cb2 D140      		sbci r29,hi8(303)
 3118 0cb4 C901      		movw r24,r18
 3119 0cb6 DA01      		movw r26,r20
 3120 0cb8 8483      		std Z+4,r24
 3121 0cba 9583      		std Z+5,r25
 3122 0cbc A683      		std Z+6,r26
 3123 0cbe B783      		std Z+7,r27
 3124 0cc0 0E94 0000 		call sprintf
  95:nmea/nmea.h   ****       sprintf(dist_buff, "%f", dist);
 3125               		.loc 8 95 0
 3126 0cc4 EDB7      		in r30,__SP_L__
 3127 0cc6 FEB7      		in r31,__SP_H__
 3128 0cc8 3196      		adiw r30,1
 3129 0cca 9E01      		movw r18,r28
 3130 0ccc 2F5F      		subi r18,lo8(-(1))
 3131 0cce 3F4F      		sbci r19,hi8(-(1))
 3132 0cd0 C35D      		subi r28,lo8(-301)
 3133 0cd2 DE4F      		sbci r29,hi8(-301)
 3134 0cd4 2883      		st Y,r18
 3135 0cd6 3983      		std Y+1,r19
 3136 0cd8 CD52      		subi r28,lo8(301)
 3137 0cda D140      		sbci r29,hi8(301)
 3138 0cdc ADB7      		in r26,__SP_L__
 3139 0cde BEB7      		in r27,__SP_H__
 3140 0ce0 1196      		adiw r26,1
 3141 0ce2 2D93      		st X+,r18
 3142 0ce4 3C93      		st X,r19
 3143 0ce6 1297      		sbiw r26,1+1
 3144 0ce8 0283      		std Z+2,r16
 3145 0cea 1383      		std Z+3,r17
 3146 0cec C482      		std Z+4,r12
 3147 0cee D582      		std Z+5,r13
 3148 0cf0 E682      		std Z+6,r14
 3149 0cf2 F782      		std Z+7,r15
 3150 0cf4 0E94 0000 		call sprintf
  98:nmea/nmea.h   ****       int len_lat = strlen(lat_buff);
 3151               		.loc 8 98 0
 3152 0cf8 F301      		movw r30,r6
 3153 0cfa 0190      		ld __tmp_reg__,Z+
 3154 0cfc 0020      		tst __tmp_reg__
 3155 0cfe 01F4      		brne .-6
 3156 0d00 3197      		sbiw r30,1
 3157 0d02 E619      		sub r30,r6
 3158 0d04 F709      		sbc r31,r7
 3159               	.LVL176:
  99:nmea/nmea.h   ****       int len_lng = strlen(lng_buff);
 3160               		.loc 8 99 0
 3161 0d06 D201      		movw r26,r4
 3162 0d08 0D90      		ld __tmp_reg__,X+
 3163 0d0a 0020      		tst __tmp_reg__
 3164 0d0c 01F4      		brne .-6
 3165 0d0e 1197      		sbiw r26,1
 3166 0d10 A419      		sub r26,r4
 3167 0d12 B509      		sbc r27,r5
 3168 0d14 CF5C      		subi r28,lo8(-305)
 3169 0d16 DE4F      		sbci r29,hi8(-305)
 3170 0d18 A883      		st Y,r26
 3171 0d1a B983      		std Y+1,r27
 3172 0d1c C153      		subi r28,lo8(305)
 3173 0d1e D140      		sbci r29,hi8(305)
 3174               	.LVL177:
 100:nmea/nmea.h   ****       int len_dist = strlen(dist_buff);
 3175               		.loc 8 100 0
 3176 0d20 C35D      		subi r28,lo8(-301)
 3177 0d22 DE4F      		sbci r29,hi8(-301)
 3178 0d24 A881      		ld r26,Y
 3179 0d26 B981      		ldd r27,Y+1
 3180 0d28 CD52      		subi r28,lo8(301)
 3181 0d2a D140      		sbci r29,hi8(301)
 3182               	.LVL178:
 3183 0d2c 0D90      		ld __tmp_reg__,X+
 3184 0d2e 0020      		tst __tmp_reg__
 3185 0d30 01F4      		brne .-6
 3186 0d32 1197      		sbiw r26,1
 3187 0d34 C35D      		subi r28,lo8(-301)
 3188 0d36 DE4F      		sbci r29,hi8(-301)
 3189 0d38 2881      		ld r18,Y
 3190 0d3a 3981      		ldd r19,Y+1
 3191 0d3c CD52      		subi r28,lo8(301)
 3192 0d3e D140      		sbci r29,hi8(301)
 3193 0d40 A21B      		sub r26,r18
 3194 0d42 B30B      		sbc r27,r19
 3195 0d44 C15D      		subi r28,lo8(-303)
 3196 0d46 DE4F      		sbci r29,hi8(-303)
 3197 0d48 A883      		st Y,r26
 3198 0d4a B983      		std Y+1,r27
 3199 0d4c CF52      		subi r28,lo8(303)
 3200 0d4e D140      		sbci r29,hi8(303)
 3201               	.LVL179:
 3202               	.LBB1464:
 103:nmea/nmea.h   ****       for (int i=0; i<len_lat; i++) {
 3203               		.loc 8 103 0
 3204 0d50 8DB7      		in r24,__SP_L__
 3205 0d52 9EB7      		in r25,__SP_H__
 3206 0d54 0896      		adiw r24,8
 3207 0d56 8DBF      		out __SP_L__,r24
 3208 0d58 9EBF      		out __SP_H__,r25
 3209 0d5a 1E16      		cp __zero_reg__,r30
 3210 0d5c 1F06      		cpc __zero_reg__,r31
 3211 0d5e 04F0      		brlt .+2
 3212 0d60 00C0      		rjmp .L111
 3213 0d62 4301      		movw r8,r6
  71:nmea/nmea.h   **** char* parse_nmea(void) {
 3214               		.loc 8 71 0
 3215 0d64 D301      		movw r26,r6
 3216               	.LVL180:
 3217 0d66 AE0F      		add r26,r30
 3218 0d68 BF1F      		adc r27,r31
 3219 0d6a CB5C      		subi r28,lo8(-309)
 3220 0d6c DE4F      		sbci r29,hi8(-309)
 3221 0d6e A883      		st Y,r26
 3222 0d70 B983      		std Y+1,r27
 3223 0d72 C553      		subi r28,lo8(309)
 3224 0d74 D140      		sbci r29,hi8(309)
 3225               	.LBB1465:
 3226               	.LBB1466:
 3227               	.LBB1467:
 3228               	.LBB1468:
 3229               	.LBB1469:
 3230               	.LBB1470:
 3231               	.LBB1471:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 3232               		.loc 4 57 0
 3233 0d76 56E0      		ldi r21,lo8(6)
 3234               	.LBE1471:
 3235               	.LBE1470:
 3236               	.LBE1469:
 3237               	.LBE1468:
 3238               	.LBE1467:
 3239               	.LBB1482:
 3240               	.LBB1483:
 3241               	.LBB1484:
 3242               	.LBB1485:
 3243               	.LBB1486:
 3244               	.LBB1487:
 3245               	.LBB1488:
 3246               	.LBB1489:
 3247               	.LBB1490:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 3248               		.loc 5 220 0
 3249 0d78 A0E0      		ldi r26,lo8(endpoints+24)
 3250 0d7a B0E0      		ldi r27,hi8(endpoints+24)
 3251               	.LBE1490:
 3252               	.LBE1489:
 3253               	.LBB1492:
 3254               	.LBB1493:
 3255               		.loc 4 91 0
 3256 0d7c 90E0      		ldi r25,lo8(ep_in_pipe_buffer)
 3257 0d7e 292E      		mov r2,r25
 3258 0d80 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 3259 0d82 392E      		mov r3,r25
 3260               	.LBE1493:
 3261               	.LBE1492:
 3262               	.LBB1496:
 3263               	.LBB1497:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 3264               		.loc 2 69 0
 3265 0d84 21E0      		ldi r18,lo8(1)
 3266 0d86 E22E      		mov r14,r18
 3267 0d88 F12C      		mov r15,__zero_reg__
 3268               	.LBE1497:
 3269               	.LBE1496:
 3270               	.LBB1505:
 3271               	.LBB1506:
 3272               	.LBB1507:
 3273               	.LBB1508:
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 3274               		.loc 5 169 0
 3275 0d8a 30E4      		ldi r19,lo8(64)
 3276 0d8c A32E      		mov r10,r19
 3277 0d8e B12C      		mov r11,__zero_reg__
 3278               	.LVL181:
 3279               	.L108:
 3280               	.LBE1508:
 3281               	.LBE1507:
 3282               	.LBE1506:
 3283               	.LBE1505:
 3284               	.LBE1488:
 3285               	.LBE1487:
 3286               	.LBE1486:
 3287               	.LBE1485:
 3288               	.LBE1484:
 3289               	.LBE1483:
 3290               	.LBE1482:
 3291               	.LBE1466:
 3292               	.LBE1465:
 104:nmea/nmea.h   ****         send_byte(lat_buff[i]);  
 3293               		.loc 8 104 0 discriminator 2
 3294 0d90 F401      		movw r30,r8
 3295 0d92 3191      		ld r19,Z+
 3296 0d94 4F01      		movw r8,r30
 3297               	.LVL182:
 3298               	.L96:
 3299               	.LBB1558:
 3300               	.LBB1556:
 3301               	.LBB1551:
 3302               	.LBB1480:
 3303               	.LBB1478:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 3304               		.loc 2 123 0
 3305 0d96 9FB7      		in r25,__SREG__
 3306               	.LVL183:
 3307               	.LBB1473:
 3308               	.LBB1474:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 3309               		.loc 3 50 0
 3310               	/* #APP */
 3311               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 3312 0d98 F894      		cli
 3313               	 ;  0 "" 2
 3314               	.LVL184:
 3315               	/* #NOAPP */
 3316               	.LBE1474:
 3317               	.LBE1473:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 3318               		.loc 2 124 0
 3319 0d9a 8091 0000 		lds r24,ep_in_data+1
 3320 0d9e 8823      		tst r24
 3321 0da0 01F4      		brne .+2
 3322 0da2 00C0      		rjmp .L210
 3323               	.L183:
 125:usb/usb_pipe.h **** 			r = false;
 3324               		.loc 2 125 0
 3325 0da4 80E0      		ldi r24,lo8(0)
 3326               	.L94:
 3327               	.LBB1475:
 3328               	.LBB1476:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 3329               		.loc 3 70 0
 3330 0da6 9FBF      		out __SREG__,r25
 3331               		.loc 3 71 0
 3332               	.LBE1476:
 3333               	.LBE1475:
 3334               	.LBE1478:
 3335               	.LBE1480:
 3336               	.LBE1551:
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
 3337               		.loc 1 20 0
 3338 0da8 8823      		tst r24
 3339 0daa 01F0      		breq .L96
 3340               	.LVL185:
 3341               	.LBB1552:
 3342               	.LBB1553:
 175:usb/usb_pipe.h **** 	p->pipe->data->write_ptr[p->data->packet_offset++] = v;
 3343               		.loc 2 175 0
 3344 0dac 8091 0000 		lds r24,ep_in_data+2
 3345 0db0 9091 0000 		lds r25,ep_in_data+2+1
 3346 0db4 E091 0000 		lds r30,ep_in_pipe_data+2
 3347 0db8 F091 0000 		lds r31,ep_in_pipe_data+2+1
 3348               	.LVL186:
 3349 0dbc E80F      		add r30,r24
 3350 0dbe F91F      		adc r31,r25
 3351 0dc0 3083      		st Z,r19
 3352 0dc2 0196      		adiw r24,1
 3353 0dc4 8093 0000 		sts ep_in_data+2,r24
 3354 0dc8 9093 0000 		sts ep_in_data+2+1,r25
 176:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 3355               		.loc 2 176 0
 3356 0dcc 8034      		cpi r24,64
 3357 0dce 9105      		cpc r25,__zero_reg__
 3358 0dd0 01F4      		brne .+2
 3359 0dd2 00C0      		rjmp .L211
 3360               	.LVL187:
 3361               	.L97:
 3362               	.LBE1553:
 3363               	.LBE1552:
 3364               	.LBE1556:
 3365               	.LBE1558:
 103:nmea/nmea.h   ****       for (int i=0; i<len_lat; i++) {
 3366               		.loc 8 103 0 discriminator 2
 3367 0dd4 CB5C      		subi r28,lo8(-309)
 3368 0dd6 DE4F      		sbci r29,hi8(-309)
 3369 0dd8 2881      		ld r18,Y
 3370 0dda 3981      		ldd r19,Y+1
 3371 0ddc C553      		subi r28,lo8(309)
 3372 0dde D140      		sbci r29,hi8(309)
 3373 0de0 8216      		cp r8,r18
 3374 0de2 9306      		cpc r9,r19
 3375 0de4 01F4      		brne .L108
 3376               	.LVL188:
 3377               	.L111:
 3378               	.LBE1464:
 3379               	.LBB1560:
 3380               	.LBB1561:
 3381               	.LBB1562:
 3382               	.LBB1563:
 3383               	.LBB1564:
 3384               	.LBB1565:
 3385               	.LBB1566:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 3386               		.loc 4 57 0
 3387 0de6 96E0      		ldi r25,lo8(6)
 3388               	.L192:
 3389               	.LVL189:
 3390               	.LBE1566:
 3391               	.LBE1565:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 3392               		.loc 2 123 0
 3393 0de8 2FB7      		in r18,__SREG__
 3394               	.LVL190:
 3395               	.LBB1568:
 3396               	.LBB1569:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 3397               		.loc 3 50 0
 3398               	/* #APP */
 3399               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 3400 0dea F894      		cli
 3401               	 ;  0 "" 2
 3402               	.LVL191:
 3403               	/* #NOAPP */
 3404               	.LBE1569:
 3405               	.LBE1568:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 3406               		.loc 2 124 0
 3407 0dec 8091 0000 		lds r24,ep_in_data+1
 3408 0df0 8823      		tst r24
 3409 0df2 01F4      		brne .+2
 3410 0df4 00C0      		rjmp .L212
 3411               	.L184:
 125:usb/usb_pipe.h **** 			r = false;
 3412               		.loc 2 125 0
 3413 0df6 80E0      		ldi r24,lo8(0)
 3414               	.L109:
 3415               	.LBB1570:
 3416               	.LBB1571:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 3417               		.loc 3 70 0
 3418 0df8 2FBF      		out __SREG__,r18
 3419               		.loc 3 71 0
 3420               	.LBE1571:
 3421               	.LBE1570:
 3422               	.LBE1564:
 3423               	.LBE1563:
 3424               	.LBE1562:
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
 3425               		.loc 1 20 0
 3426 0dfa 8823      		tst r24
 3427 0dfc 01F0      		breq .L192
 3428               	.LVL192:
 3429               	.LBB1575:
 3430               	.LBB1576:
 175:usb/usb_pipe.h **** 	p->pipe->data->write_ptr[p->data->packet_offset++] = v;
 3431               		.loc 2 175 0
 3432 0dfe 8091 0000 		lds r24,ep_in_data+2
 3433 0e02 9091 0000 		lds r25,ep_in_data+2+1
 3434 0e06 E091 0000 		lds r30,ep_in_pipe_data+2
 3435 0e0a F091 0000 		lds r31,ep_in_pipe_data+2+1
 3436 0e0e E80F      		add r30,r24
 3437 0e10 F91F      		adc r31,r25
 3438 0e12 20E2      		ldi r18,lo8(32)
 3439               	.LVL193:
 3440 0e14 2083      		st Z,r18
 3441 0e16 0196      		adiw r24,1
 3442 0e18 8093 0000 		sts ep_in_data+2,r24
 3443 0e1c 9093 0000 		sts ep_in_data+2+1,r25
 176:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 3444               		.loc 2 176 0
 3445 0e20 8034      		cpi r24,64
 3446 0e22 9105      		cpc r25,__zero_reg__
 3447 0e24 01F4      		brne .+2
 3448 0e26 00C0      		rjmp .L213
 3449               	.L112:
 3450               	.LVL194:
 3451               	.LBE1576:
 3452               	.LBE1575:
 3453               	.LBE1561:
 3454               	.LBE1560:
 3455               	.LBB1643:
 109:nmea/nmea.h   ****       for (int j=0; j<len_lng; j++) {
 3456               		.loc 8 109 0 discriminator 1
 3457 0e28 CF5C      		subi r28,lo8(-305)
 3458 0e2a DE4F      		sbci r29,hi8(-305)
 3459 0e2c 2881      		ld r18,Y
 3460 0e2e 3981      		ldd r19,Y+1
 3461 0e30 C153      		subi r28,lo8(305)
 3462 0e32 D140      		sbci r29,hi8(305)
 3463 0e34 1216      		cp __zero_reg__,r18
 3464 0e36 1306      		cpc __zero_reg__,r19
 3465 0e38 04F0      		brlt .+2
 3466 0e3a 00C0      		rjmp .L141
 109:nmea/nmea.h   ****       for (int j=0; j<len_lng; j++) {
 3467               		.loc 8 109 0 is_stmt 0
 3468 0e3c 4201      		movw r8,r4
  71:nmea/nmea.h   **** char* parse_nmea(void) {
 3469               		.loc 8 71 0 is_stmt 1
 3470 0e3e 240D      		add r18,r4
 3471 0e40 351D      		adc r19,r5
 3472 0e42 CF5C      		subi r28,lo8(-305)
 3473 0e44 DE4F      		sbci r29,hi8(-305)
 3474 0e46 2883      		st Y,r18
 3475 0e48 3983      		std Y+1,r19
 3476 0e4a C153      		subi r28,lo8(305)
 3477 0e4c D140      		sbci r29,hi8(305)
 3478               	.LBB1644:
 3479               	.LBB1645:
 3480               	.LBB1646:
 3481               	.LBB1647:
 3482               	.LBB1648:
 3483               	.LBB1649:
 3484               	.LBB1650:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 3485               		.loc 4 57 0
 3486 0e4e 56E0      		ldi r21,lo8(6)
 3487               	.LBE1650:
 3488               	.LBE1649:
 3489               	.LBE1648:
 3490               	.LBE1647:
 3491               	.LBE1646:
 3492               	.LBB1661:
 3493               	.LBB1662:
 3494               	.LBB1663:
 3495               	.LBB1664:
 3496               	.LBB1665:
 3497               	.LBB1666:
 3498               	.LBB1667:
 3499               	.LBB1668:
 3500               	.LBB1669:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 3501               		.loc 5 220 0
 3502 0e50 B0E0      		ldi r27,lo8(endpoints+24)
 3503 0e52 EB2E      		mov r14,r27
 3504 0e54 B0E0      		ldi r27,hi8(endpoints+24)
 3505 0e56 FB2E      		mov r15,r27
 3506               	.LBE1669:
 3507               	.LBE1668:
 3508               	.LBB1671:
 3509               	.LBB1672:
 3510               		.loc 4 91 0
 3511 0e58 10E0      		ldi r17,lo8(ep_in_pipe_buffer)
 3512 0e5a 212E      		mov r2,r17
 3513 0e5c 10E0      		ldi r17,hi8(ep_in_pipe_buffer)
 3514 0e5e 312E      		mov r3,r17
 3515               	.LBE1672:
 3516               	.LBE1671:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 3517               		.loc 2 88 0
 3518 0e60 12E0      		ldi r17,lo8(2)
 3519               	.LBB1675:
 3520               	.LBB1676:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 3521               		.loc 2 69 0
 3522 0e62 01E0      		ldi r16,lo8(1)
 3523 0e64 C02E      		mov r12,r16
 3524 0e66 D12C      		mov r13,__zero_reg__
 3525               	.LBE1676:
 3526               	.LBE1675:
 3527               	.LBB1684:
 3528               	.LBB1685:
 3529               	.LBB1686:
 3530               	.LBB1687:
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 3531               		.loc 5 169 0
 3532 0e68 80E4      		ldi r24,lo8(64)
 3533 0e6a A82E      		mov r10,r24
 3534 0e6c B12C      		mov r11,__zero_reg__
 3535               	.LVL195:
 3536               	.L138:
 3537               	.LBE1687:
 3538               	.LBE1686:
 3539               	.LBE1685:
 3540               	.LBE1684:
 3541               	.LBE1667:
 3542               	.LBE1666:
 3543               	.LBE1665:
 3544               	.LBE1664:
 3545               	.LBE1663:
 3546               	.LBE1662:
 3547               	.LBE1661:
 3548               	.LBE1645:
 3549               	.LBE1644:
 110:nmea/nmea.h   ****         send_byte(lng_buff[j]);  
 3550               		.loc 8 110 0 discriminator 2
 3551 0e6e D401      		movw r26,r8
 3552 0e70 2D91      		ld r18,X+
 3553 0e72 4D01      		movw r8,r26
 3554               	.LVL196:
 3555               	.L126:
 3556               	.LBB1737:
 3557               	.LBB1735:
 3558               	.LBB1730:
 3559               	.LBB1659:
 3560               	.LBB1657:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 3561               		.loc 2 123 0
 3562 0e74 9FB7      		in r25,__SREG__
 3563               	.LVL197:
 3564               	.LBB1652:
 3565               	.LBB1653:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 3566               		.loc 3 50 0
 3567               	/* #APP */
 3568               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 3569 0e76 F894      		cli
 3570               	 ;  0 "" 2
 3571               	.LVL198:
 3572               	/* #NOAPP */
 3573               	.LBE1653:
 3574               	.LBE1652:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 3575               		.loc 2 124 0
 3576 0e78 8091 0000 		lds r24,ep_in_data+1
 3577 0e7c 8823      		tst r24
 3578 0e7e 01F4      		brne .+2
 3579 0e80 00C0      		rjmp .L214
 3580               	.L185:
 125:usb/usb_pipe.h **** 			r = false;
 3581               		.loc 2 125 0
 3582 0e82 80E0      		ldi r24,lo8(0)
 3583               	.L124:
 3584               	.LBB1654:
 3585               	.LBB1655:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 3586               		.loc 3 70 0
 3587 0e84 9FBF      		out __SREG__,r25
 3588               		.loc 3 71 0
 3589               	.LBE1655:
 3590               	.LBE1654:
 3591               	.LBE1657:
 3592               	.LBE1659:
 3593               	.LBE1730:
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
 3594               		.loc 1 20 0
 3595 0e86 8823      		tst r24
 3596 0e88 01F0      		breq .L126
 3597               	.LVL199:
 3598               	.LBB1731:
 3599               	.LBB1732:
 175:usb/usb_pipe.h **** 	p->pipe->data->write_ptr[p->data->packet_offset++] = v;
 3600               		.loc 2 175 0
 3601 0e8a 8091 0000 		lds r24,ep_in_data+2
 3602 0e8e 9091 0000 		lds r25,ep_in_data+2+1
 3603 0e92 E091 0000 		lds r30,ep_in_pipe_data+2
 3604 0e96 F091 0000 		lds r31,ep_in_pipe_data+2+1
 3605 0e9a E80F      		add r30,r24
 3606 0e9c F91F      		adc r31,r25
 3607 0e9e 2083      		st Z,r18
 3608 0ea0 0196      		adiw r24,1
 3609 0ea2 8093 0000 		sts ep_in_data+2,r24
 3610 0ea6 9093 0000 		sts ep_in_data+2+1,r25
 176:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 3611               		.loc 2 176 0
 3612 0eaa 8034      		cpi r24,64
 3613 0eac 9105      		cpc r25,__zero_reg__
 3614 0eae 01F4      		brne .+2
 3615 0eb0 00C0      		rjmp .L215
 3616               	.LVL200:
 3617               	.L127:
 3618               	.LBE1732:
 3619               	.LBE1731:
 3620               	.LBE1735:
 3621               	.LBE1737:
 109:nmea/nmea.h   ****       for (int j=0; j<len_lng; j++) {
 3622               		.loc 8 109 0 discriminator 2
 3623 0eb2 CF5C      		subi r28,lo8(-305)
 3624 0eb4 DE4F      		sbci r29,hi8(-305)
 3625 0eb6 2881      		ld r18,Y
 3626 0eb8 3981      		ldd r19,Y+1
 3627 0eba C153      		subi r28,lo8(305)
 3628 0ebc D140      		sbci r29,hi8(305)
 3629 0ebe 8216      		cp r8,r18
 3630 0ec0 9306      		cpc r9,r19
 3631 0ec2 01F4      		brne .L138
 3632               	.LVL201:
 3633               	.L141:
 3634               	.LBE1643:
 3635               	.LBB1739:
 3636               	.LBB1740:
 3637               	.LBB1741:
 3638               	.LBB1742:
 3639               	.LBB1743:
 3640               	.LBB1744:
 3641               	.LBB1745:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 3642               		.loc 4 57 0
 3643 0ec4 96E0      		ldi r25,lo8(6)
 3644               	.L191:
 3645               	.LBE1745:
 3646               	.LBE1744:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 3647               		.loc 2 123 0
 3648 0ec6 2FB7      		in r18,__SREG__
 3649               	.LVL202:
 3650               	.LBB1747:
 3651               	.LBB1748:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 3652               		.loc 3 50 0
 3653               	/* #APP */
 3654               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 3655 0ec8 F894      		cli
 3656               	 ;  0 "" 2
 3657               	.LVL203:
 3658               	/* #NOAPP */
 3659               	.LBE1748:
 3660               	.LBE1747:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 3661               		.loc 2 124 0
 3662 0eca 8091 0000 		lds r24,ep_in_data+1
 3663 0ece 8823      		tst r24
 3664 0ed0 01F4      		brne .+2
 3665 0ed2 00C0      		rjmp .L216
 3666               	.L186:
 125:usb/usb_pipe.h **** 			r = false;
 3667               		.loc 2 125 0
 3668 0ed4 80E0      		ldi r24,lo8(0)
 3669               	.L139:
 3670               	.LBB1749:
 3671               	.LBB1750:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 3672               		.loc 3 70 0
 3673 0ed6 2FBF      		out __SREG__,r18
 3674               		.loc 3 71 0
 3675               	.LBE1750:
 3676               	.LBE1749:
 3677               	.LBE1743:
 3678               	.LBE1742:
 3679               	.LBE1741:
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
 3680               		.loc 1 20 0
 3681 0ed8 8823      		tst r24
 3682 0eda 01F0      		breq .L191
 3683               	.LVL204:
 3684               	.LBB1754:
 3685               	.LBB1755:
 175:usb/usb_pipe.h **** 	p->pipe->data->write_ptr[p->data->packet_offset++] = v;
 3686               		.loc 2 175 0
 3687 0edc 8091 0000 		lds r24,ep_in_data+2
 3688 0ee0 9091 0000 		lds r25,ep_in_data+2+1
 3689 0ee4 E091 0000 		lds r30,ep_in_pipe_data+2
 3690 0ee8 F091 0000 		lds r31,ep_in_pipe_data+2+1
 3691 0eec E80F      		add r30,r24
 3692 0eee F91F      		adc r31,r25
 3693 0ef0 20E2      		ldi r18,lo8(32)
 3694               	.LVL205:
 3695 0ef2 2083      		st Z,r18
 3696 0ef4 0196      		adiw r24,1
 3697 0ef6 8093 0000 		sts ep_in_data+2,r24
 3698 0efa 9093 0000 		sts ep_in_data+2+1,r25
 176:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 3699               		.loc 2 176 0
 3700 0efe 8034      		cpi r24,64
 3701 0f00 9105      		cpc r25,__zero_reg__
 3702 0f02 01F4      		brne .+2
 3703 0f04 00C0      		rjmp .L217
 3704               	.L142:
 3705               	.LVL206:
 3706               	.LBE1755:
 3707               	.LBE1754:
 3708               	.LBE1740:
 3709               	.LBE1739:
 3710               	.LBB1820:
 115:nmea/nmea.h   ****       for (int k=0; k<len_dist; k++) {
 3711               		.loc 8 115 0 discriminator 1
 3712 0f06 C15D      		subi r28,lo8(-303)
 3713 0f08 DE4F      		sbci r29,hi8(-303)
 3714 0f0a 2881      		ld r18,Y
 3715 0f0c 3981      		ldd r19,Y+1
 3716 0f0e CF52      		subi r28,lo8(303)
 3717 0f10 D140      		sbci r29,hi8(303)
 3718 0f12 1216      		cp __zero_reg__,r18
 3719 0f14 1306      		cpc __zero_reg__,r19
 3720 0f16 04F0      		brlt .+2
 3721 0f18 00C0      		rjmp .L153
 115:nmea/nmea.h   ****       for (int k=0; k<len_dist; k++) {
 3722               		.loc 8 115 0 is_stmt 0
 3723 0f1a 4E01      		movw r8,r28
 3724 0f1c 0894      		sec
 3725 0f1e 811C      		adc r8,__zero_reg__
 3726 0f20 911C      		adc r9,__zero_reg__
  71:nmea/nmea.h   **** char* parse_nmea(void) {
 3727               		.loc 8 71 0 is_stmt 1
 3728 0f22 280D      		add r18,r8
 3729 0f24 391D      		adc r19,r9
 3730 0f26 C15D      		subi r28,lo8(-303)
 3731 0f28 DE4F      		sbci r29,hi8(-303)
 3732 0f2a 2883      		st Y,r18
 3733 0f2c 3983      		std Y+1,r19
 3734 0f2e CF52      		subi r28,lo8(303)
 3735 0f30 D140      		sbci r29,hi8(303)
 3736               	.LBB1821:
 3737               	.LBB1822:
 3738               	.LBB1823:
 3739               	.LBB1824:
 3740               	.LBB1825:
 3741               	.LBB1826:
 3742               	.LBB1827:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 3743               		.loc 4 57 0
 3744 0f32 76E0      		ldi r23,lo8(6)
 3745               	.LBE1827:
 3746               	.LBE1826:
 3747               	.LBE1825:
 3748               	.LBE1824:
 3749               	.LBE1823:
 3750               	.LBB1838:
 3751               	.LBB1839:
 3752               	.LBB1840:
 3753               	.LBB1841:
 3754               	.LBB1842:
 3755               	.LBB1843:
 3756               	.LBB1844:
 3757               	.LBB1845:
 3758               	.LBB1846:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 3759               		.loc 5 220 0
 3760 0f34 60E0      		ldi r22,lo8(endpoints+24)
 3761 0f36 E62E      		mov r14,r22
 3762 0f38 60E0      		ldi r22,hi8(endpoints+24)
 3763 0f3a F62E      		mov r15,r22
 3764               	.LBE1846:
 3765               	.LBE1845:
 3766               	.LBB1848:
 3767               	.LBB1849:
 3768               		.loc 4 91 0
 3769 0f3c E0E0      		ldi r30,lo8(ep_in_pipe_buffer)
 3770 0f3e 2E2E      		mov r2,r30
 3771 0f40 E0E0      		ldi r30,hi8(ep_in_pipe_buffer)
 3772 0f42 3E2E      		mov r3,r30
 3773               	.LBE1849:
 3774               	.LBE1848:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 3775               		.loc 2 88 0
 3776 0f44 12E0      		ldi r17,lo8(2)
 3777               	.LBB1852:
 3778               	.LBB1853:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 3779               		.loc 2 69 0
 3780 0f46 F1E0      		ldi r31,lo8(1)
 3781 0f48 CF2E      		mov r12,r31
 3782 0f4a D12C      		mov r13,__zero_reg__
 3783               	.LBE1853:
 3784               	.LBE1852:
 3785               	.LBB1861:
 3786               	.LBB1862:
 3787               	.LBB1863:
 3788               	.LBB1864:
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 3789               		.loc 5 169 0
 3790 0f4c A0E4      		ldi r26,lo8(64)
 3791 0f4e AA2E      		mov r10,r26
 3792 0f50 B12C      		mov r11,__zero_reg__
 3793               	.LVL207:
 3794               	.L168:
 3795               	.LBE1864:
 3796               	.LBE1863:
 3797               	.LBE1862:
 3798               	.LBE1861:
 3799               	.LBE1844:
 3800               	.LBE1843:
 3801               	.LBE1842:
 3802               	.LBE1841:
 3803               	.LBE1840:
 3804               	.LBE1839:
 3805               	.LBE1838:
 3806               	.LBE1822:
 3807               	.LBE1821:
 116:nmea/nmea.h   ****         send_byte(dist_buff[k]);  
 3808               		.loc 8 116 0 discriminator 2
 3809 0f52 D401      		movw r26,r8
 3810 0f54 2D91      		ld r18,X+
 3811 0f56 4D01      		movw r8,r26
 3812               	.LVL208:
 3813               	.L156:
 3814               	.LBB1914:
 3815               	.LBB1912:
 3816               	.LBB1907:
 3817               	.LBB1836:
 3818               	.LBB1834:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 3819               		.loc 2 123 0
 3820 0f58 9FB7      		in r25,__SREG__
 3821               	.LVL209:
 3822               	.LBB1829:
 3823               	.LBB1830:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 3824               		.loc 3 50 0
 3825               	/* #APP */
 3826               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 3827 0f5a F894      		cli
 3828               	 ;  0 "" 2
 3829               	.LVL210:
 3830               	/* #NOAPP */
 3831               	.LBE1830:
 3832               	.LBE1829:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 3833               		.loc 2 124 0
 3834 0f5c 8091 0000 		lds r24,ep_in_data+1
 3835 0f60 8823      		tst r24
 3836 0f62 01F4      		brne .+2
 3837 0f64 00C0      		rjmp .L218
 3838               	.L187:
 125:usb/usb_pipe.h **** 			r = false;
 3839               		.loc 2 125 0
 3840 0f66 80E0      		ldi r24,lo8(0)
 3841               	.L154:
 3842               	.LBB1831:
 3843               	.LBB1832:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 3844               		.loc 3 70 0
 3845 0f68 9FBF      		out __SREG__,r25
 3846               		.loc 3 71 0
 3847               	.LBE1832:
 3848               	.LBE1831:
 3849               	.LBE1834:
 3850               	.LBE1836:
 3851               	.LBE1907:
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
 3852               		.loc 1 20 0
 3853 0f6a 8823      		tst r24
 3854 0f6c 01F0      		breq .L156
 3855               	.LVL211:
 3856               	.LBB1908:
 3857               	.LBB1909:
 175:usb/usb_pipe.h **** 	p->pipe->data->write_ptr[p->data->packet_offset++] = v;
 3858               		.loc 2 175 0
 3859 0f6e 8091 0000 		lds r24,ep_in_data+2
 3860 0f72 9091 0000 		lds r25,ep_in_data+2+1
 3861 0f76 E091 0000 		lds r30,ep_in_pipe_data+2
 3862 0f7a F091 0000 		lds r31,ep_in_pipe_data+2+1
 3863 0f7e E80F      		add r30,r24
 3864 0f80 F91F      		adc r31,r25
 3865 0f82 2083      		st Z,r18
 3866 0f84 0196      		adiw r24,1
 3867 0f86 8093 0000 		sts ep_in_data+2,r24
 3868 0f8a 9093 0000 		sts ep_in_data+2+1,r25
 176:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 3869               		.loc 2 176 0
 3870 0f8e 8034      		cpi r24,64
 3871 0f90 9105      		cpc r25,__zero_reg__
 3872 0f92 01F4      		brne .+2
 3873 0f94 00C0      		rjmp .L219
 3874               	.LVL212:
 3875               	.L157:
 3876               	.LBE1909:
 3877               	.LBE1908:
 3878               	.LBE1912:
 3879               	.LBE1914:
 115:nmea/nmea.h   ****       for (int k=0; k<len_dist; k++) {
 3880               		.loc 8 115 0 discriminator 2
 3881 0f96 C15D      		subi r28,lo8(-303)
 3882 0f98 DE4F      		sbci r29,hi8(-303)
 3883 0f9a 2881      		ld r18,Y
 3884 0f9c 3981      		ldd r19,Y+1
 3885 0f9e CF52      		subi r28,lo8(303)
 3886 0fa0 D140      		sbci r29,hi8(303)
 3887 0fa2 8216      		cp r8,r18
 3888 0fa4 9306      		cpc r9,r19
 3889 0fa6 01F4      		brne .L168
 3890               	.LVL213:
 3891               	.L153:
 3892               	.LBE1820:
 3893               	.LBB1916:
 3894               	.LBB1917:
  15:concat/concat.h ****     char *result = malloc(strlen(s1)+strlen(s2)+1);
 3895               		.loc 7 15 0
 3896 0fa8 D301      		movw r26,r6
 3897 0faa 0D90      		ld __tmp_reg__,X+
 3898 0fac 0020      		tst __tmp_reg__
 3899 0fae 01F4      		brne .-6
 3900 0fb0 CD01      		movw r24,r26
 3901 0fb2 8619      		sub r24,r6
 3902 0fb4 9709      		sbc r25,r7
 3903 0fb6 0196      		adiw r24,1
 3904               		.cfi_escape 0x2e,0
 3905 0fb8 0E94 0000 		call malloc
 3906               	.LVL214:
 3907 0fbc E92E      		mov r14,r25
 3908 0fbe 082F      		mov r16,r24
 3909 0fc0 192F      		mov r17,r25
 3910               	.LVL215:
  17:concat/concat.h ****     strcpy(result, s1);
 3911               		.loc 7 17 0
 3912 0fc2 C801      		movw r24,r16
 3913 0fc4 B301      		movw r22,r6
 3914 0fc6 0E94 0000 		call strcpy
  18:concat/concat.h ****     strcat(result, s2);
 3915               		.loc 7 18 0
 3916 0fca E02F      		mov r30,r16
 3917 0fcc FE2D      		mov r31,r14
 3918 0fce DF01      		movw r26,r30
 3919 0fd0 0D90      		ld __tmp_reg__,X+
 3920 0fd2 0020      		tst __tmp_reg__
 3921 0fd4 01F4      		brne .-6
 3922 0fd6 1197      		sbiw r26,1
 3923 0fd8 AE1B      		sub r26,r30
 3924 0fda BF0B      		sbc r27,r31
 3925 0fdc A00F      		add r26,r16
 3926 0fde B11F      		adc r27,r17
 3927 0fe0 8CE2      		ldi r24,lo8(44)
 3928 0fe2 90E0      		ldi r25,hi8(44)
 3929 0fe4 8D93      		st X+,r24
 3930 0fe6 9C93      		st X,r25
 3931               	.LVL216:
 3932               	.LBE1917:
 3933               	.LBE1916:
 3934               	.LBB1918:
 3935               	.LBB1919:
  15:concat/concat.h ****     char *result = malloc(strlen(s1)+strlen(s2)+1);
 3936               		.loc 7 15 0
 3937 0fe8 A02F      		mov r26,r16
 3938 0fea BE2D      		mov r27,r14
 3939 0fec FD01      		movw r30,r26
 3940 0fee 0190      		ld __tmp_reg__,Z+
 3941 0ff0 0020      		tst __tmp_reg__
 3942 0ff2 01F4      		brne .-6
 3943 0ff4 9F01      		movw r18,r30
 3944 0ff6 F201      		movw r30,r4
 3945 0ff8 0190      		ld __tmp_reg__,Z+
 3946 0ffa 0020      		tst __tmp_reg__
 3947 0ffc 01F4      		brne .-6
 3948 0ffe CF01      		movw r24,r30
 3949 1000 0197      		sbiw r24,1
 3950 1002 8419      		sub r24,r4
 3951 1004 9509      		sbc r25,r5
 3952 1006 8A1B      		sub r24,r26
 3953 1008 9B0B      		sbc r25,r27
 3954 100a 820F      		add r24,r18
 3955 100c 931F      		adc r25,r19
 3956 100e 0E94 0000 		call malloc
 3957 1012 E82E      		mov r14,r24
 3958 1014 C92E      		mov r12,r25
 3959               	.LVL217:
  17:concat/concat.h ****     strcpy(result, s1);
 3960               		.loc 7 17 0
 3961 1016 B801      		movw r22,r16
 3962 1018 0E94 0000 		call strcpy
 3963               	.LVL218:
  18:concat/concat.h ****     strcat(result, s2);
 3964               		.loc 7 18 0
 3965 101c 8E2D      		mov r24,r14
 3966 101e 9C2D      		mov r25,r12
 3967 1020 B201      		movw r22,r4
 3968 1022 0E94 0000 		call strcat
 3969               	.LBE1919:
 3970               	.LBE1918:
 121:nmea/nmea.h   ****       *result = concat(concat(lat_str, ","), lng_str);
 3971               		.loc 8 121 0
 3972 1026 CD5C      		subi r28,lo8(-307)
 3973 1028 DE4F      		sbci r29,hi8(-307)
 3974 102a A881      		ld r26,Y
 3975 102c B981      		ldd r27,Y+1
 3976 102e C353      		subi r28,lo8(307)
 3977 1030 D140      		sbci r29,hi8(307)
 3978 1032 EC92      		st X,r14
 3979 1034 1196      		adiw r26,1
 3980 1036 CC92      		st X,r12
 3981 1038 1197      		sbiw r26,1
 3982 103a 00C0      		rjmp .L91
 3983               	.LVL219:
 3984               	.L210:
 3985               	.LBB1920:
 3986               	.LBB1559:
 3987               	.LBB1557:
 3988               	.LBB1554:
 3989               	.LBB1481:
 3990               	.LBB1479:
 3991               	.LBB1477:
 3992               	.LBB1472:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 3993               		.loc 4 57 0
 3994 103c 8091 0000 		lds r24,ep_in_pipe_data+4
 3995 1040 252F      		mov r18,r21
 3996 1042 281B      		sub r18,r24
 3997               	.LBE1472:
 3998               	.LBE1477:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 3999               		.loc 2 127 0
 4000 1044 81E0      		ldi r24,lo8(1)
 4001 1046 1216      		cp __zero_reg__,r18
 4002 1048 04F4      		brge .+2
 4003 104a 00C0      		rjmp .L94
 4004 104c 00C0      		rjmp .L183
 4005               	.LVL220:
 4006               	.L211:
 4007               	.LBE1479:
 4008               	.LBE1481:
 4009               	.LBE1554:
 4010               	.LBB1555:
 4011               	.LBB1550:
 4012               	.LBB1549:
 4013               	.LBB1548:
 177:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 4014               		.loc 2 177 0
 4015 104e CFB6      		in r12,__SREG__
 4016               	.LVL221:
 4017               	.LBB1540:
 4018               	.LBB1541:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 4019               		.loc 3 50 0
 4020               	/* #APP */
 4021               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 4022 1050 F894      		cli
 4023               	 ;  0 "" 2
 4024               	.LVL222:
 4025               	/* #NOAPP */
 4026               	.LBE1541:
 4027               	.LBE1540:
 4028               		.loc 2 178 0
 4029 1052 1092 0000 		sts ep_in_data+2,__zero_reg__
 4030 1056 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 4031               	.LVL223:
 4032               	.LBB1542:
 4033               	.LBB1543:
  81:usb/pipe.h    **** 	pipe->data->count += 1;
 4034               		.loc 4 81 0
 4035 105a 8091 0000 		lds r24,ep_in_pipe_data+4
 4036 105e 8F5F      		subi r24,lo8(-(1))
 4037 1060 8093 0000 		sts ep_in_pipe_data+4,r24
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
 4038               		.loc 4 82 0
 4039 1064 8091 0000 		lds r24,ep_in_pipe_data+2
 4040 1068 9091 0000 		lds r25,ep_in_pipe_data+2+1
 4041 106c 805C      		subi r24,lo8(-(64))
 4042 106e 9F4F      		sbci r25,hi8(-(64))
 4043 1070 8093 0000 		sts ep_in_pipe_data+2,r24
 4044 1074 9093 0000 		sts ep_in_pipe_data+2+1,r25
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
 4045               		.loc 4 84 0
 4046 1078 F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 4047 107a 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 4048 107c 9F07      		cpc r25,r31
 4049 107e 01F4      		brne .L98
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
 4050               		.loc 4 85 0
 4051 1080 2092 0000 		sts ep_in_pipe_data+2,r2
 4052 1084 3092 0000 		sts ep_in_pipe_data+2+1,r3
 4053               	.L98:
 4054               	.LVL224:
 4055               	.LBE1543:
 4056               	.LBE1542:
 4057               	.LBB1544:
 4058               	.LBB1538:
 4059               	.LBB1536:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 4060               		.loc 2 80 0
 4061 1088 1FB7      		in r17,__SREG__
 4062               	.LVL225:
 4063               	.LBB1515:
 4064               	.LBB1516:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 4065               		.loc 3 50 0
 4066               	/* #APP */
 4067               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 4068 108a F894      		cli
 4069               	 ;  0 "" 2
 4070               	.LVL226:
 4071               	/* #NOAPP */
 4072               	.LBE1516:
 4073               	.LBE1515:
 4074               	.LBB1517:
 4075               	.LBB1491:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 4076               		.loc 5 220 0
 4077 108c 8091 0000 		lds r24,endpoints+24
 4078 1090 8670      		andi r24,lo8(6)
 4079               	.LBE1491:
 4080               	.LBE1517:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 4081               		.loc 2 82 0
 4082 1092 01F4      		brne .L220
 4083               	.LVL227:
 4084               	.L99:
 4085               	.LBB1518:
 4086               	.LBB1519:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 4087               		.loc 3 70 0
 4088 1094 1FBF      		out __SREG__,r17
 4089               		.loc 3 71 0
 4090               	.LVL228:
 4091               	.LBE1519:
 4092               	.LBE1518:
 4093               	.LBE1536:
 4094               	.LBE1538:
 4095               	.LBE1544:
 4096               	.LBB1545:
 4097               	.LBB1546:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 4098               		.loc 3 70 0
 4099 1096 CFBE      		out __SREG__,r12
 4100               		.loc 3 71 0
 4101 1098 00C0      		rjmp .L97
 4102               	.LVL229:
 4103               	.L220:
 4104               	.LBE1546:
 4105               	.LBE1545:
 4106               	.LBB1547:
 4107               	.LBB1539:
 4108               	.LBB1537:
 4109               	.LBB1520:
 4110               	.LBB1521:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 4111               		.loc 4 51 0
 4112 109a 2091 0000 		lds r18,ep_in_pipe_data+4
 4113               	.LBE1521:
 4114               	.LBE1520:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 4115               		.loc 2 83 0
 4116 109e 1216      		cp __zero_reg__,r18
 4117 10a0 04F0      		brlt .+2
 4118 10a2 00C0      		rjmp .L100
 4119               	.LBB1522:
 4120               	.LBB1523:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 4121               		.loc 4 62 0
 4122 10a4 6091 0000 		lds r22,ep_in_pipe_data
 4123 10a8 7091 0000 		lds r23,ep_in_pipe_data+1
 4124               	.LVL230:
 4125               	.LBE1523:
 4126               	.LBE1522:
 4127               	.LBB1524:
 4128               	.LBB1513:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 4129               		.loc 2 68 0
 4130 10ac 3091 0000 		lds r19,ep_in_data
 4131               	.LVL231:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 4132               		.loc 2 69 0
 4133 10b0 832F      		mov r24,r19
 4134 10b2 90E0      		ldi r25,lo8(0)
 4135 10b4 41E0      		ldi r20,lo8(1)
 4136 10b6 8E15      		cp r24,r14
 4137 10b8 9F05      		cpc r25,r15
 4138 10ba 01F4      		brne .L101
 4139 10bc 40E0      		ldi r20,lo8(0)
 4140               	.L101:
 4141 10be 4093 0000 		sts ep_in_data,r20
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 4142               		.loc 2 72 0
 4143 10c2 3323      		tst r19
 4144 10c4 01F4      		brne .L102
 4145               	.LVL232:
 4146               	.LBB1510:
 4147               	.LBB1511:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4148               		.loc 5 168 0
 4149 10c6 6093 0000 		sts endpoints+28,r22
 4150 10ca 7093 0000 		sts endpoints+28+1,r23
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4151               		.loc 5 169 0
 4152 10ce A092 0000 		sts endpoints+26,r10
 4153 10d2 B092 0000 		sts endpoints+26+1,r11
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 4154               		.loc 5 174 0
 4155 10d6 FD01      		movw r30,r26
 4156               	/* #APP */
 4157               	 ;  174 "usb/usb.h" 1
 4158 10d8 02E2      		ldi r16, 34
 4159 10da 0693      		.dc.w 0x9306
 4160               		
 4161               	 ;  0 "" 2
 4162               	.LVL233:
 4163               	/* #NOAPP */
 4164               	.L103:
 4165               	.LBE1511:
 4166               	.LBE1510:
 4167               	.LBE1513:
 4168               	.LBE1524:
 4169               	.LBB1525:
 4170               	.LBB1526:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 4171               		.loc 4 72 0
 4172 10dc 2150      		subi r18,lo8(-(-1))
 4173 10de 2093 0000 		sts ep_in_pipe_data+4,r18
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 4174               		.loc 4 73 0
 4175 10e2 CB01      		movw r24,r22
 4176 10e4 805C      		subi r24,lo8(-(64))
 4177 10e6 9F4F      		sbci r25,hi8(-(64))
 4178 10e8 8093 0000 		sts ep_in_pipe_data,r24
 4179 10ec 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 4180               		.loc 4 75 0
 4181 10f0 F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 4182 10f2 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 4183 10f4 9F07      		cpc r25,r31
 4184 10f6 01F4      		brne .L99
 4185               	.LBE1526:
 4186               	.LBE1525:
 4187               	.LBB1527:
 4188               	.LBB1494:
 4189               		.loc 4 91 0
 4190 10f8 2092 0000 		sts ep_in_pipe_data,r2
 4191 10fc 3092 0000 		sts ep_in_pipe_data+1,r3
 4192               	.LVL234:
 4193 1100 00C0      		rjmp .L99
 4194               	.LVL235:
 4195               	.L102:
 4196               	.LBE1494:
 4197               	.LBE1527:
 4198               	.LBB1528:
 4199               	.LBB1514:
 4200               	.LBB1512:
 4201               	.LBB1509:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4202               		.loc 5 168 0
 4203 1102 6093 0000 		sts endpoints+20,r22
 4204 1106 7093 0000 		sts endpoints+20+1,r23
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4205               		.loc 5 169 0
 4206 110a A092 0000 		sts endpoints+18,r10
 4207 110e B092 0000 		sts endpoints+18+1,r11
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 4208               		.loc 5 176 0
 4209 1112 FD01      		movw r30,r26
 4210               	/* #APP */
 4211               	 ;  176 "usb/usb.h" 1
 4212 1114 04E1      		ldi r16, 20
 4213 1116 0693      		.dc.w 0x9306
 4214               		
 4215               	 ;  0 "" 2
 4216               	/* #NOAPP */
 4217 1118 00C0      		rjmp .L103
 4218               	.LVL236:
 4219               	.L100:
 4220               	.LBE1509:
 4221               	.LBE1512:
 4222               	.LBE1514:
 4223               	.LBE1528:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 4224               		.loc 2 87 0
 4225 111a 8091 0000 		lds r24,ep_in_data+1
 4226 111e 8130      		cpi r24,lo8(1)
 4227 1120 01F0      		breq .L221
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 4228               		.loc 2 91 0
 4229 1122 8230      		cpi r24,lo8(2)
 4230 1124 01F0      		breq .+2
 4231 1126 00C0      		rjmp .L99
 4232               	.LVL237:
 4233               	.LBB1529:
 4234               	.LBB1530:
 4235               	.LBB1531:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 4236               		.loc 5 228 0
 4237 1128 8091 0000 		lds r24,endpoints+24
 4238 112c 8670      		andi r24,lo8(6)
 4239               	.LBE1531:
 4240               	.LBE1530:
 4241               	.LBE1529:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 4242               		.loc 2 91 0
 4243 112e 8630      		cpi r24,lo8(6)
 4244 1130 01F0      		breq .+2
 4245 1132 00C0      		rjmp .L99
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 4246               		.loc 2 92 0
 4247 1134 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 4248               		.loc 2 93 0
 4249 1138 1092 0000 		sts ep_in_data+2,__zero_reg__
 4250 113c 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 4251               	.LBB1532:
 4252               	.LBB1495:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 4253               		.loc 4 90 0
 4254 1140 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 4255               		.loc 4 91 0
 4256 1144 2092 0000 		sts ep_in_pipe_data+2,r2
 4257 1148 3092 0000 		sts ep_in_pipe_data+2+1,r3
 4258 114c 2092 0000 		sts ep_in_pipe_data,r2
 4259 1150 3092 0000 		sts ep_in_pipe_data+1,r3
 4260               	.LVL238:
 4261 1154 00C0      		rjmp .L99
 4262               	.LVL239:
 4263               	.L221:
 4264               	.LBE1495:
 4265               	.LBE1532:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 4266               		.loc 2 88 0
 4267 1156 22E0      		ldi r18,lo8(2)
 4268 1158 2093 0000 		sts ep_in_data+1,r18
 4269               	.LBB1533:
 4270               	.LBB1534:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 4271               		.loc 4 62 0
 4272 115c 7091 0000 		lds r23,ep_in_pipe_data
 4273 1160 E091 0000 		lds r30,ep_in_pipe_data+1
 4274               	.LBE1534:
 4275               	.LBE1533:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 4276               		.loc 2 90 0
 4277 1164 2091 0000 		lds r18,ep_in_data+2
 4278 1168 3091 0000 		lds r19,ep_in_data+2+1
 4279               	.LVL240:
 4280               	.LBB1535:
 4281               	.LBB1504:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 4282               		.loc 2 68 0
 4283 116c 6091 0000 		lds r22,ep_in_data
 4284               	.LVL241:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 4285               		.loc 2 69 0
 4286 1170 862F      		mov r24,r22
 4287 1172 90E0      		ldi r25,lo8(0)
 4288 1174 41E0      		ldi r20,lo8(1)
 4289 1176 8E15      		cp r24,r14
 4290 1178 9F05      		cpc r25,r15
 4291 117a 01F4      		brne .L106
 4292 117c 40E0      		ldi r20,lo8(0)
 4293               	.L106:
 4294 117e 4093 0000 		sts ep_in_data,r20
 4295               	.LBB1498:
 4296               	.LBB1499:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4297               		.loc 5 168 0
 4298 1182 872F      		mov r24,r23
 4299 1184 9E2F      		mov r25,r30
 4300               	.LBE1499:
 4301               	.LBE1498:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 4302               		.loc 2 72 0
 4303 1186 6623      		tst r22
 4304 1188 01F4      		brne .L107
 4305               	.LVL242:
 4306               	.LBB1501:
 4307               	.LBB1500:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4308               		.loc 5 168 0
 4309 118a 8093 0000 		sts endpoints+28,r24
 4310 118e 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4311               		.loc 5 169 0
 4312 1192 2093 0000 		sts endpoints+26,r18
 4313 1196 3093 0000 		sts endpoints+26+1,r19
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 4314               		.loc 5 174 0
 4315 119a FD01      		movw r30,r26
 4316               	/* #APP */
 4317               	 ;  174 "usb/usb.h" 1
 4318 119c 02E2      		ldi r16, 34
 4319 119e 0693      		.dc.w 0x9306
 4320               		
 4321               	 ;  0 "" 2
 4322               	/* #NOAPP */
 4323 11a0 00C0      		rjmp .L99
 4324               	.LVL243:
 4325               	.L107:
 4326               	.LBE1500:
 4327               	.LBE1501:
 4328               	.LBB1502:
 4329               	.LBB1503:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4330               		.loc 5 168 0
 4331 11a2 8093 0000 		sts endpoints+20,r24
 4332 11a6 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4333               		.loc 5 169 0
 4334 11aa 2093 0000 		sts endpoints+18,r18
 4335 11ae 3093 0000 		sts endpoints+18+1,r19
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 4336               		.loc 5 176 0
 4337 11b2 FD01      		movw r30,r26
 4338               	/* #APP */
 4339               	 ;  176 "usb/usb.h" 1
 4340 11b4 04E1      		ldi r16, 20
 4341 11b6 0693      		.dc.w 0x9306
 4342               		
 4343               	 ;  0 "" 2
 4344               	/* #NOAPP */
 4345 11b8 00C0      		rjmp .L99
 4346               	.LVL244:
 4347               	.L212:
 4348               	.LBE1503:
 4349               	.LBE1502:
 4350               	.LBE1504:
 4351               	.LBE1535:
 4352               	.LBE1537:
 4353               	.LBE1539:
 4354               	.LBE1547:
 4355               	.LBE1548:
 4356               	.LBE1549:
 4357               	.LBE1550:
 4358               	.LBE1555:
 4359               	.LBE1557:
 4360               	.LBE1559:
 4361               	.LBE1920:
 4362               	.LBB1921:
 4363               	.LBB1640:
 4364               	.LBB1577:
 4365               	.LBB1574:
 4366               	.LBB1573:
 4367               	.LBB1572:
 4368               	.LBB1567:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 4369               		.loc 4 57 0
 4370 11ba 8091 0000 		lds r24,ep_in_pipe_data+4
 4371 11be 392F      		mov r19,r25
 4372 11c0 381B      		sub r19,r24
 4373               	.LBE1567:
 4374               	.LBE1572:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 4375               		.loc 2 127 0
 4376 11c2 81E0      		ldi r24,lo8(1)
 4377 11c4 1316      		cp __zero_reg__,r19
 4378 11c6 04F4      		brge .+2
 4379 11c8 00C0      		rjmp .L109
 4380 11ca 00C0      		rjmp .L184
 4381               	.LVL245:
 4382               	.L214:
 4383               	.LBE1573:
 4384               	.LBE1574:
 4385               	.LBE1577:
 4386               	.LBE1640:
 4387               	.LBE1921:
 4388               	.LBB1922:
 4389               	.LBB1738:
 4390               	.LBB1736:
 4391               	.LBB1733:
 4392               	.LBB1660:
 4393               	.LBB1658:
 4394               	.LBB1656:
 4395               	.LBB1651:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 4396               		.loc 4 57 0
 4397 11cc 8091 0000 		lds r24,ep_in_pipe_data+4
 4398 11d0 352F      		mov r19,r21
 4399 11d2 381B      		sub r19,r24
 4400               	.LBE1651:
 4401               	.LBE1656:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 4402               		.loc 2 127 0
 4403 11d4 81E0      		ldi r24,lo8(1)
 4404 11d6 1316      		cp __zero_reg__,r19
 4405 11d8 04F4      		brge .+2
 4406 11da 00C0      		rjmp .L124
 4407 11dc 00C0      		rjmp .L185
 4408               	.LVL246:
 4409               	.L215:
 4410               	.LBE1658:
 4411               	.LBE1660:
 4412               	.LBE1733:
 4413               	.LBB1734:
 4414               	.LBB1729:
 4415               	.LBB1728:
 4416               	.LBB1727:
 177:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 4417               		.loc 2 177 0
 4418 11de BFB7      		in r27,__SREG__
 4419               	.LVL247:
 4420               	.LBB1719:
 4421               	.LBB1720:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 4422               		.loc 3 50 0
 4423               	/* #APP */
 4424               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 4425 11e0 F894      		cli
 4426               	 ;  0 "" 2
 4427               	.LVL248:
 4428               	/* #NOAPP */
 4429               	.LBE1720:
 4430               	.LBE1719:
 4431               		.loc 2 178 0
 4432 11e2 1092 0000 		sts ep_in_data+2,__zero_reg__
 4433 11e6 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 4434               	.LVL249:
 4435               	.LBB1721:
 4436               	.LBB1722:
  81:usb/pipe.h    **** 	pipe->data->count += 1;
 4437               		.loc 4 81 0
 4438 11ea 8091 0000 		lds r24,ep_in_pipe_data+4
 4439 11ee 8F5F      		subi r24,lo8(-(1))
 4440 11f0 8093 0000 		sts ep_in_pipe_data+4,r24
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
 4441               		.loc 4 82 0
 4442 11f4 8091 0000 		lds r24,ep_in_pipe_data+2
 4443 11f8 9091 0000 		lds r25,ep_in_pipe_data+2+1
 4444 11fc 805C      		subi r24,lo8(-(64))
 4445 11fe 9F4F      		sbci r25,hi8(-(64))
 4446 1200 8093 0000 		sts ep_in_pipe_data+2,r24
 4447 1204 9093 0000 		sts ep_in_pipe_data+2+1,r25
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
 4448               		.loc 4 84 0
 4449 1208 E0E0      		ldi r30,hi8(ep_in_pipe_buffer+512)
 4450 120a 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 4451 120c 9E07      		cpc r25,r30
 4452 120e 01F4      		brne .L128
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
 4453               		.loc 4 85 0
 4454 1210 2092 0000 		sts ep_in_pipe_data+2,r2
 4455 1214 3092 0000 		sts ep_in_pipe_data+2+1,r3
 4456               	.L128:
 4457               	.LVL250:
 4458               	.LBE1722:
 4459               	.LBE1721:
 4460               	.LBB1723:
 4461               	.LBB1717:
 4462               	.LBB1715:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 4463               		.loc 2 80 0
 4464 1218 AFB7      		in r26,__SREG__
 4465               	.LVL251:
 4466               	.LBB1694:
 4467               	.LBB1695:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 4468               		.loc 3 50 0
 4469               	/* #APP */
 4470               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 4471 121a F894      		cli
 4472               	 ;  0 "" 2
 4473               	.LVL252:
 4474               	/* #NOAPP */
 4475               	.LBE1695:
 4476               	.LBE1694:
 4477               	.LBB1696:
 4478               	.LBB1670:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 4479               		.loc 5 220 0
 4480 121c 8091 0000 		lds r24,endpoints+24
 4481 1220 8670      		andi r24,lo8(6)
 4482               	.LBE1670:
 4483               	.LBE1696:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 4484               		.loc 2 82 0
 4485 1222 01F4      		brne .L222
 4486               	.LVL253:
 4487               	.L129:
 4488               	.LBB1697:
 4489               	.LBB1698:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 4490               		.loc 3 70 0
 4491 1224 AFBF      		out __SREG__,r26
 4492               		.loc 3 71 0
 4493               	.LVL254:
 4494               	.LBE1698:
 4495               	.LBE1697:
 4496               	.LBE1715:
 4497               	.LBE1717:
 4498               	.LBE1723:
 4499               	.LBB1724:
 4500               	.LBB1725:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 4501               		.loc 3 70 0
 4502 1226 BFBF      		out __SREG__,r27
 4503               		.loc 3 71 0
 4504 1228 00C0      		rjmp .L127
 4505               	.LVL255:
 4506               	.L222:
 4507               	.LBE1725:
 4508               	.LBE1724:
 4509               	.LBB1726:
 4510               	.LBB1718:
 4511               	.LBB1716:
 4512               	.LBB1699:
 4513               	.LBB1700:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 4514               		.loc 4 51 0
 4515 122a 2091 0000 		lds r18,ep_in_pipe_data+4
 4516               	.LBE1700:
 4517               	.LBE1699:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 4518               		.loc 2 83 0
 4519 122e 1216      		cp __zero_reg__,r18
 4520 1230 04F0      		brlt .+2
 4521 1232 00C0      		rjmp .L130
 4522               	.LBB1701:
 4523               	.LBB1702:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 4524               		.loc 4 62 0
 4525 1234 6091 0000 		lds r22,ep_in_pipe_data
 4526 1238 7091 0000 		lds r23,ep_in_pipe_data+1
 4527               	.LVL256:
 4528               	.LBE1702:
 4529               	.LBE1701:
 4530               	.LBB1703:
 4531               	.LBB1692:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 4532               		.loc 2 68 0
 4533 123c 3091 0000 		lds r19,ep_in_data
 4534               	.LVL257:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 4535               		.loc 2 69 0
 4536 1240 832F      		mov r24,r19
 4537 1242 90E0      		ldi r25,lo8(0)
 4538 1244 41E0      		ldi r20,lo8(1)
 4539 1246 8C15      		cp r24,r12
 4540 1248 9D05      		cpc r25,r13
 4541 124a 01F4      		brne .L131
 4542 124c 40E0      		ldi r20,lo8(0)
 4543               	.L131:
 4544 124e 4093 0000 		sts ep_in_data,r20
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 4545               		.loc 2 72 0
 4546 1252 3323      		tst r19
 4547 1254 01F4      		brne .L132
 4548               	.LVL258:
 4549               	.LBB1689:
 4550               	.LBB1690:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4551               		.loc 5 168 0
 4552 1256 6093 0000 		sts endpoints+28,r22
 4553 125a 7093 0000 		sts endpoints+28+1,r23
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4554               		.loc 5 169 0
 4555 125e A092 0000 		sts endpoints+26,r10
 4556 1262 B092 0000 		sts endpoints+26+1,r11
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 4557               		.loc 5 174 0
 4558 1266 F701      		movw r30,r14
 4559               	/* #APP */
 4560               	 ;  174 "usb/usb.h" 1
 4561 1268 02E2      		ldi r16, 34
 4562 126a 0693      		.dc.w 0x9306
 4563               		
 4564               	 ;  0 "" 2
 4565               	.LVL259:
 4566               	/* #NOAPP */
 4567               	.L133:
 4568               	.LBE1690:
 4569               	.LBE1689:
 4570               	.LBE1692:
 4571               	.LBE1703:
 4572               	.LBB1704:
 4573               	.LBB1705:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 4574               		.loc 4 72 0
 4575 126c 2150      		subi r18,lo8(-(-1))
 4576 126e 2093 0000 		sts ep_in_pipe_data+4,r18
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 4577               		.loc 4 73 0
 4578 1272 CB01      		movw r24,r22
 4579 1274 805C      		subi r24,lo8(-(64))
 4580 1276 9F4F      		sbci r25,hi8(-(64))
 4581 1278 8093 0000 		sts ep_in_pipe_data,r24
 4582 127c 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 4583               		.loc 4 75 0
 4584 1280 F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 4585 1282 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 4586 1284 9F07      		cpc r25,r31
 4587 1286 01F4      		brne .L129
 4588               	.LBE1705:
 4589               	.LBE1704:
 4590               	.LBB1706:
 4591               	.LBB1673:
 4592               		.loc 4 91 0
 4593 1288 2092 0000 		sts ep_in_pipe_data,r2
 4594 128c 3092 0000 		sts ep_in_pipe_data+1,r3
 4595               	.LVL260:
 4596 1290 00C0      		rjmp .L129
 4597               	.LVL261:
 4598               	.L132:
 4599               	.LBE1673:
 4600               	.LBE1706:
 4601               	.LBB1707:
 4602               	.LBB1693:
 4603               	.LBB1691:
 4604               	.LBB1688:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4605               		.loc 5 168 0
 4606 1292 6093 0000 		sts endpoints+20,r22
 4607 1296 7093 0000 		sts endpoints+20+1,r23
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4608               		.loc 5 169 0
 4609 129a A092 0000 		sts endpoints+18,r10
 4610 129e B092 0000 		sts endpoints+18+1,r11
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 4611               		.loc 5 176 0
 4612 12a2 F701      		movw r30,r14
 4613               	/* #APP */
 4614               	 ;  176 "usb/usb.h" 1
 4615 12a4 04E1      		ldi r16, 20
 4616 12a6 0693      		.dc.w 0x9306
 4617               		
 4618               	 ;  0 "" 2
 4619               	/* #NOAPP */
 4620 12a8 00C0      		rjmp .L133
 4621               	.LVL262:
 4622               	.L130:
 4623               	.LBE1688:
 4624               	.LBE1691:
 4625               	.LBE1693:
 4626               	.LBE1707:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 4627               		.loc 2 87 0
 4628 12aa 8091 0000 		lds r24,ep_in_data+1
 4629 12ae 8130      		cpi r24,lo8(1)
 4630 12b0 01F0      		breq .L223
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 4631               		.loc 2 91 0
 4632 12b2 8230      		cpi r24,lo8(2)
 4633 12b4 01F0      		breq .+2
 4634 12b6 00C0      		rjmp .L129
 4635               	.LVL263:
 4636               	.LBB1708:
 4637               	.LBB1709:
 4638               	.LBB1710:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 4639               		.loc 5 228 0
 4640 12b8 8091 0000 		lds r24,endpoints+24
 4641 12bc 8670      		andi r24,lo8(6)
 4642               	.LBE1710:
 4643               	.LBE1709:
 4644               	.LBE1708:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 4645               		.loc 2 91 0
 4646 12be 8630      		cpi r24,lo8(6)
 4647 12c0 01F0      		breq .+2
 4648 12c2 00C0      		rjmp .L129
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 4649               		.loc 2 92 0
 4650 12c4 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 4651               		.loc 2 93 0
 4652 12c8 1092 0000 		sts ep_in_data+2,__zero_reg__
 4653 12cc 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 4654               	.LBB1711:
 4655               	.LBB1674:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 4656               		.loc 4 90 0
 4657 12d0 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 4658               		.loc 4 91 0
 4659 12d4 2092 0000 		sts ep_in_pipe_data+2,r2
 4660 12d8 3092 0000 		sts ep_in_pipe_data+2+1,r3
 4661 12dc 2092 0000 		sts ep_in_pipe_data,r2
 4662 12e0 3092 0000 		sts ep_in_pipe_data+1,r3
 4663               	.LVL264:
 4664 12e4 00C0      		rjmp .L129
 4665               	.LVL265:
 4666               	.L223:
 4667               	.LBE1674:
 4668               	.LBE1711:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 4669               		.loc 2 88 0
 4670 12e6 1093 0000 		sts ep_in_data+1,r17
 4671               	.LBB1712:
 4672               	.LBB1713:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 4673               		.loc 4 62 0
 4674 12ea 7091 0000 		lds r23,ep_in_pipe_data
 4675 12ee E091 0000 		lds r30,ep_in_pipe_data+1
 4676               	.LBE1713:
 4677               	.LBE1712:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 4678               		.loc 2 90 0
 4679 12f2 2091 0000 		lds r18,ep_in_data+2
 4680 12f6 3091 0000 		lds r19,ep_in_data+2+1
 4681               	.LVL266:
 4682               	.LBB1714:
 4683               	.LBB1683:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 4684               		.loc 2 68 0
 4685 12fa 6091 0000 		lds r22,ep_in_data
 4686               	.LVL267:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 4687               		.loc 2 69 0
 4688 12fe 862F      		mov r24,r22
 4689 1300 90E0      		ldi r25,lo8(0)
 4690 1302 41E0      		ldi r20,lo8(1)
 4691 1304 8C15      		cp r24,r12
 4692 1306 9D05      		cpc r25,r13
 4693 1308 01F4      		brne .L136
 4694 130a 40E0      		ldi r20,lo8(0)
 4695               	.L136:
 4696 130c 4093 0000 		sts ep_in_data,r20
 4697               	.LBB1677:
 4698               	.LBB1678:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4699               		.loc 5 168 0
 4700 1310 872F      		mov r24,r23
 4701 1312 9E2F      		mov r25,r30
 4702               	.LBE1678:
 4703               	.LBE1677:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 4704               		.loc 2 72 0
 4705 1314 6623      		tst r22
 4706 1316 01F4      		brne .L137
 4707               	.LVL268:
 4708               	.LBB1680:
 4709               	.LBB1679:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4710               		.loc 5 168 0
 4711 1318 8093 0000 		sts endpoints+28,r24
 4712 131c 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4713               		.loc 5 169 0
 4714 1320 2093 0000 		sts endpoints+26,r18
 4715 1324 3093 0000 		sts endpoints+26+1,r19
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 4716               		.loc 5 174 0
 4717 1328 F701      		movw r30,r14
 4718               	/* #APP */
 4719               	 ;  174 "usb/usb.h" 1
 4720 132a 02E2      		ldi r16, 34
 4721 132c 0693      		.dc.w 0x9306
 4722               		
 4723               	 ;  0 "" 2
 4724               	/* #NOAPP */
 4725 132e 00C0      		rjmp .L129
 4726               	.LVL269:
 4727               	.L137:
 4728               	.LBE1679:
 4729               	.LBE1680:
 4730               	.LBB1681:
 4731               	.LBB1682:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4732               		.loc 5 168 0
 4733 1330 8093 0000 		sts endpoints+20,r24
 4734 1334 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4735               		.loc 5 169 0
 4736 1338 2093 0000 		sts endpoints+18,r18
 4737 133c 3093 0000 		sts endpoints+18+1,r19
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 4738               		.loc 5 176 0
 4739 1340 F701      		movw r30,r14
 4740               	/* #APP */
 4741               	 ;  176 "usb/usb.h" 1
 4742 1342 04E1      		ldi r16, 20
 4743 1344 0693      		.dc.w 0x9306
 4744               		
 4745               	 ;  0 "" 2
 4746               	/* #NOAPP */
 4747 1346 00C0      		rjmp .L129
 4748               	.LVL270:
 4749               	.L216:
 4750               	.LBE1682:
 4751               	.LBE1681:
 4752               	.LBE1683:
 4753               	.LBE1714:
 4754               	.LBE1716:
 4755               	.LBE1718:
 4756               	.LBE1726:
 4757               	.LBE1727:
 4758               	.LBE1728:
 4759               	.LBE1729:
 4760               	.LBE1734:
 4761               	.LBE1736:
 4762               	.LBE1738:
 4763               	.LBE1922:
 4764               	.LBB1923:
 4765               	.LBB1817:
 4766               	.LBB1756:
 4767               	.LBB1753:
 4768               	.LBB1752:
 4769               	.LBB1751:
 4770               	.LBB1746:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 4771               		.loc 4 57 0
 4772 1348 8091 0000 		lds r24,ep_in_pipe_data+4
 4773 134c 392F      		mov r19,r25
 4774 134e 381B      		sub r19,r24
 4775               	.LBE1746:
 4776               	.LBE1751:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 4777               		.loc 2 127 0
 4778 1350 81E0      		ldi r24,lo8(1)
 4779 1352 1316      		cp __zero_reg__,r19
 4780 1354 04F4      		brge .+2
 4781 1356 00C0      		rjmp .L139
 4782 1358 00C0      		rjmp .L186
 4783               	.LVL271:
 4784               	.L209:
 4785               	.LBE1752:
 4786               	.LBE1753:
 4787               	.LBE1756:
 4788               	.LBE1817:
 4789               	.LBE1923:
 4790               	.LBE1463:
 4791               	.LBB1929:
 4792               	.LBB1460:
 4793               	.LBB1457:
 4794               	.LBB1429:
 4795               	.LBB1426:
 4796               	.LBB1423:
 4797               	.LBB1420:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 4798               		.loc 2 88 0
 4799 135a 82E0      		ldi r24,lo8(2)
 4800 135c 8093 0000 		sts ep_in_data+1,r24
 4801               	.LBB1409:
 4802               	.LBB1410:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 4803               		.loc 4 62 0
 4804 1360 6091 0000 		lds r22,ep_in_pipe_data
 4805 1364 4091 0000 		lds r20,ep_in_pipe_data+1
 4806               	.LBE1410:
 4807               	.LBE1409:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 4808               		.loc 2 90 0
 4809 1368 8091 0000 		lds r24,ep_in_data+2
 4810 136c 9091 0000 		lds r25,ep_in_data+2+1
 4811               	.LVL272:
 4812               	.LBB1411:
 4813               	.LBB1412:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 4814               		.loc 2 68 0
 4815 1370 2091 0000 		lds r18,ep_in_data
 4816               	.LVL273:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 4817               		.loc 2 69 0
 4818 1374 31E0      		ldi r19,lo8(1)
 4819 1376 2130      		cpi r18,lo8(1)
 4820 1378 01F4      		brne .L176
 4821 137a 30E0      		ldi r19,lo8(0)
 4822               	.L176:
 4823 137c 3093 0000 		sts ep_in_data,r19
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 4824               		.loc 2 72 0
 4825 1380 2223      		tst r18
 4826 1382 01F0      		breq .+2
 4827 1384 00C0      		rjmp .L177
 4828               	.LVL274:
 4829               	.LBB1413:
 4830               	.LBB1414:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4831               		.loc 5 168 0
 4832 1386 262F      		mov r18,r22
 4833 1388 342F      		mov r19,r20
 4834 138a 2093 0000 		sts endpoints+28,r18
 4835 138e 3093 0000 		sts endpoints+28+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4836               		.loc 5 169 0
 4837 1392 8093 0000 		sts endpoints+26,r24
 4838 1396 9093 0000 		sts endpoints+26+1,r25
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 4839               		.loc 5 174 0
 4840 139a E0E0      		ldi r30,lo8(endpoints+24)
 4841 139c F0E0      		ldi r31,hi8(endpoints+24)
 4842               	.LVL275:
 4843               	/* #APP */
 4844               	 ;  174 "usb/usb.h" 1
 4845 139e 02E2      		ldi r16, 34
 4846 13a0 0693      		.dc.w 0x9306
 4847               		
 4848               	 ;  0 "" 2
 4849               	/* #NOAPP */
 4850 13a2 00C0      		rjmp .L169
 4851               	.LVL276:
 4852               	.L213:
 4853               	.LBE1414:
 4854               	.LBE1413:
 4855               	.LBE1412:
 4856               	.LBE1411:
 4857               	.LBE1420:
 4858               	.LBE1423:
 4859               	.LBE1426:
 4860               	.LBE1429:
 4861               	.LBE1457:
 4862               	.LBE1460:
 4863               	.LBE1929:
 4864               	.LBB1930:
 4865               	.LBB1924:
 4866               	.LBB1641:
 4867               	.LBB1578:
 4868               	.LBB1579:
 4869               	.LBB1580:
 4870               	.LBB1581:
 177:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 4871               		.loc 2 177 0
 4872 13a4 7FB7      		in r23,__SREG__
 4873               	.LVL277:
 4874               	.LBB1582:
 4875               	.LBB1583:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 4876               		.loc 3 50 0
 4877               	/* #APP */
 4878               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 4879 13a6 F894      		cli
 4880               	 ;  0 "" 2
 4881               	.LVL278:
 4882               	/* #NOAPP */
 4883               	.LBE1583:
 4884               	.LBE1582:
 4885               		.loc 2 178 0
 4886 13a8 1092 0000 		sts ep_in_data+2,__zero_reg__
 4887 13ac 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 4888               	.LVL279:
 4889               	.LBB1584:
 4890               	.LBB1585:
  81:usb/pipe.h    **** 	pipe->data->count += 1;
 4891               		.loc 4 81 0
 4892 13b0 8091 0000 		lds r24,ep_in_pipe_data+4
 4893 13b4 8F5F      		subi r24,lo8(-(1))
 4894 13b6 8093 0000 		sts ep_in_pipe_data+4,r24
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
 4895               		.loc 4 82 0
 4896 13ba 8091 0000 		lds r24,ep_in_pipe_data+2
 4897 13be 9091 0000 		lds r25,ep_in_pipe_data+2+1
 4898 13c2 805C      		subi r24,lo8(-(64))
 4899 13c4 9F4F      		sbci r25,hi8(-(64))
 4900 13c6 8093 0000 		sts ep_in_pipe_data+2,r24
 4901 13ca 9093 0000 		sts ep_in_pipe_data+2+1,r25
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
 4902               		.loc 4 84 0
 4903 13ce 30E0      		ldi r19,hi8(ep_in_pipe_buffer+512)
 4904 13d0 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 4905 13d2 9307      		cpc r25,r19
 4906 13d4 01F4      		brne .L113
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
 4907               		.loc 4 85 0
 4908 13d6 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 4909 13d8 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 4910 13da 8093 0000 		sts ep_in_pipe_data+2,r24
 4911 13de 9093 0000 		sts ep_in_pipe_data+2+1,r25
 4912               	.L113:
 4913               	.LVL280:
 4914               	.LBE1585:
 4915               	.LBE1584:
 4916               	.LBB1586:
 4917               	.LBB1587:
 4918               	.LBB1588:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 4919               		.loc 2 80 0
 4920 13e2 6FB7      		in r22,__SREG__
 4921               	.LVL281:
 4922               	.LBB1589:
 4923               	.LBB1590:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 4924               		.loc 3 50 0
 4925               	/* #APP */
 4926               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 4927 13e4 F894      		cli
 4928               	 ;  0 "" 2
 4929               	.LVL282:
 4930               	/* #NOAPP */
 4931               	.LBE1590:
 4932               	.LBE1589:
 4933               	.LBB1591:
 4934               	.LBB1592:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 4935               		.loc 5 220 0
 4936 13e6 8091 0000 		lds r24,endpoints+24
 4937 13ea 8670      		andi r24,lo8(6)
 4938               	.LBE1592:
 4939               	.LBE1591:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 4940               		.loc 2 82 0
 4941 13ec 01F0      		breq .L114
 4942               	.LBB1593:
 4943               	.LBB1594:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 4944               		.loc 4 51 0
 4945 13ee 4091 0000 		lds r20,ep_in_pipe_data+4
 4946               	.LBE1594:
 4947               	.LBE1593:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 4948               		.loc 2 83 0
 4949 13f2 1416      		cp __zero_reg__,r20
 4950 13f4 04F0      		brlt .+2
 4951 13f6 00C0      		rjmp .L115
 4952               	.LBB1595:
 4953               	.LBB1596:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 4954               		.loc 4 62 0
 4955 13f8 2091 0000 		lds r18,ep_in_pipe_data
 4956 13fc 3091 0000 		lds r19,ep_in_pipe_data+1
 4957               	.LVL283:
 4958               	.LBE1596:
 4959               	.LBE1595:
 4960               	.LBB1597:
 4961               	.LBB1598:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 4962               		.loc 2 68 0
 4963 1400 9091 0000 		lds r25,ep_in_data
 4964               	.LVL284:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 4965               		.loc 2 69 0
 4966 1404 81E0      		ldi r24,lo8(1)
 4967 1406 9130      		cpi r25,lo8(1)
 4968 1408 01F4      		brne .L116
 4969 140a 80E0      		ldi r24,lo8(0)
 4970               	.L116:
 4971 140c 8093 0000 		sts ep_in_data,r24
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 4972               		.loc 2 72 0
 4973 1410 9923      		tst r25
 4974 1412 01F4      		brne .L117
 4975               	.LVL285:
 4976               	.LBB1599:
 4977               	.LBB1600:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 4978               		.loc 5 168 0
 4979 1414 2093 0000 		sts endpoints+28,r18
 4980 1418 3093 0000 		sts endpoints+28+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 4981               		.loc 5 169 0
 4982 141c 80E4      		ldi r24,lo8(64)
 4983 141e 90E0      		ldi r25,hi8(64)
 4984 1420 8093 0000 		sts endpoints+26,r24
 4985 1424 9093 0000 		sts endpoints+26+1,r25
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 4986               		.loc 5 174 0
 4987 1428 E0E0      		ldi r30,lo8(endpoints+24)
 4988 142a F0E0      		ldi r31,hi8(endpoints+24)
 4989               	.LVL286:
 4990               	/* #APP */
 4991               	 ;  174 "usb/usb.h" 1
 4992 142c 02E2      		ldi r16, 34
 4993 142e 0693      		.dc.w 0x9306
 4994               		
 4995               	 ;  0 "" 2
 4996               	.LVL287:
 4997               	/* #NOAPP */
 4998               	.L118:
 4999               	.LBE1600:
 5000               	.LBE1599:
 5001               	.LBE1598:
 5002               	.LBE1597:
 5003               	.LBB1604:
 5004               	.LBB1605:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 5005               		.loc 4 72 0
 5006 1430 842F      		mov r24,r20
 5007 1432 8150      		subi r24,lo8(-(-1))
 5008 1434 8093 0000 		sts ep_in_pipe_data+4,r24
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 5009               		.loc 4 73 0
 5010 1438 C901      		movw r24,r18
 5011 143a 805C      		subi r24,lo8(-(64))
 5012 143c 9F4F      		sbci r25,hi8(-(64))
 5013 143e 8093 0000 		sts ep_in_pipe_data,r24
 5014 1442 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 5015               		.loc 4 75 0
 5016 1446 A0E0      		ldi r26,hi8(ep_in_pipe_buffer+512)
 5017 1448 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 5018 144a 9A07      		cpc r25,r26
 5019 144c 01F0      		breq .L224
 5020               	.LVL288:
 5021               	.L114:
 5022               	.LBE1605:
 5023               	.LBE1604:
 5024               	.LBB1607:
 5025               	.LBB1608:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 5026               		.loc 3 70 0
 5027 144e 6FBF      		out __SREG__,r22
 5028               		.loc 3 71 0
 5029               	.LVL289:
 5030               	.LBE1608:
 5031               	.LBE1607:
 5032               	.LBE1588:
 5033               	.LBE1587:
 5034               	.LBE1586:
 5035               	.LBB1632:
 5036               	.LBB1633:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 5037               		.loc 3 70 0
 5038 1450 7FBF      		out __SREG__,r23
 5039               		.loc 3 71 0
 5040 1452 00C0      		rjmp .L112
 5041               	.LVL290:
 5042               	.L117:
 5043               	.LBE1633:
 5044               	.LBE1632:
 5045               	.LBB1634:
 5046               	.LBB1630:
 5047               	.LBB1628:
 5048               	.LBB1609:
 5049               	.LBB1603:
 5050               	.LBB1601:
 5051               	.LBB1602:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5052               		.loc 5 168 0
 5053 1454 2093 0000 		sts endpoints+20,r18
 5054 1458 3093 0000 		sts endpoints+20+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5055               		.loc 5 169 0
 5056 145c 80E4      		ldi r24,lo8(64)
 5057 145e 90E0      		ldi r25,hi8(64)
 5058 1460 8093 0000 		sts endpoints+18,r24
 5059 1464 9093 0000 		sts endpoints+18+1,r25
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 5060               		.loc 5 176 0
 5061 1468 E0E0      		ldi r30,lo8(endpoints+24)
 5062 146a F0E0      		ldi r31,hi8(endpoints+24)
 5063               	/* #APP */
 5064               	 ;  176 "usb/usb.h" 1
 5065 146c 04E1      		ldi r16, 20
 5066 146e 0693      		.dc.w 0x9306
 5067               		
 5068               	 ;  0 "" 2
 5069               	/* #NOAPP */
 5070 1470 00C0      		rjmp .L118
 5071               	.LVL291:
 5072               	.L115:
 5073               	.LBE1602:
 5074               	.LBE1601:
 5075               	.LBE1603:
 5076               	.LBE1609:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 5077               		.loc 2 87 0
 5078 1472 8091 0000 		lds r24,ep_in_data+1
 5079 1476 8130      		cpi r24,lo8(1)
 5080 1478 01F0      		breq .L225
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 5081               		.loc 2 91 0
 5082 147a 8230      		cpi r24,lo8(2)
 5083 147c 01F4      		brne .L114
 5084               	.LVL292:
 5085               	.LBB1610:
 5086               	.LBB1611:
 5087               	.LBB1612:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 5088               		.loc 5 228 0
 5089 147e 8091 0000 		lds r24,endpoints+24
 5090 1482 8670      		andi r24,lo8(6)
 5091               	.LBE1612:
 5092               	.LBE1611:
 5093               	.LBE1610:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 5094               		.loc 2 91 0
 5095 1484 8630      		cpi r24,lo8(6)
 5096 1486 01F4      		brne .L114
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 5097               		.loc 2 92 0
 5098 1488 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 5099               		.loc 2 93 0
 5100 148c 1092 0000 		sts ep_in_data+2,__zero_reg__
 5101 1490 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 5102               	.LBB1613:
 5103               	.LBB1614:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 5104               		.loc 4 90 0
 5105 1494 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 5106               		.loc 4 91 0
 5107 1498 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 5108 149a 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 5109 149c 8093 0000 		sts ep_in_pipe_data+2,r24
 5110 14a0 9093 0000 		sts ep_in_pipe_data+2+1,r25
 5111 14a4 8093 0000 		sts ep_in_pipe_data,r24
 5112 14a8 9093 0000 		sts ep_in_pipe_data+1,r25
 5113               	.LVL293:
 5114 14ac 00C0      		rjmp .L114
 5115               	.LVL294:
 5116               	.L224:
 5117               	.LBE1614:
 5118               	.LBE1613:
 5119               	.LBB1615:
 5120               	.LBB1606:
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 5121               		.loc 4 76 0
 5122 14ae 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 5123 14b0 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 5124 14b2 8093 0000 		sts ep_in_pipe_data,r24
 5125 14b6 9093 0000 		sts ep_in_pipe_data+1,r25
 5126 14ba 00C0      		rjmp .L114
 5127               	.LVL295:
 5128               	.L225:
 5129               	.LBE1606:
 5130               	.LBE1615:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 5131               		.loc 2 88 0
 5132 14bc 82E0      		ldi r24,lo8(2)
 5133 14be 8093 0000 		sts ep_in_data+1,r24
 5134               	.LBB1616:
 5135               	.LBB1617:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 5136               		.loc 4 62 0
 5137 14c2 4091 0000 		lds r20,ep_in_pipe_data
 5138 14c6 5091 0000 		lds r21,ep_in_pipe_data+1
 5139               	.LBE1617:
 5140               	.LBE1616:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 5141               		.loc 2 90 0
 5142 14ca 8091 0000 		lds r24,ep_in_data+2
 5143 14ce 9091 0000 		lds r25,ep_in_data+2+1
 5144               	.LVL296:
 5145               	.LBB1618:
 5146               	.LBB1619:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 5147               		.loc 2 68 0
 5148 14d2 3091 0000 		lds r19,ep_in_data
 5149               	.LVL297:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 5150               		.loc 2 69 0
 5151 14d6 21E0      		ldi r18,lo8(1)
 5152 14d8 3130      		cpi r19,lo8(1)
 5153 14da 01F4      		brne .L121
 5154 14dc 20E0      		ldi r18,lo8(0)
 5155               	.L121:
 5156 14de 2093 0000 		sts ep_in_data,r18
 5157               	.LBB1620:
 5158               	.LBB1621:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5159               		.loc 5 168 0
 5160 14e2 242F      		mov r18,r20
 5161               	.LBE1621:
 5162               	.LBE1620:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 5163               		.loc 2 72 0
 5164 14e4 3323      		tst r19
 5165 14e6 01F0      		breq .+2
 5166 14e8 00C0      		rjmp .L122
 5167               	.LVL298:
 5168               	.LBB1623:
 5169               	.LBB1622:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5170               		.loc 5 168 0
 5171 14ea 352F      		mov r19,r21
 5172 14ec 2093 0000 		sts endpoints+28,r18
 5173 14f0 3093 0000 		sts endpoints+28+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5174               		.loc 5 169 0
 5175 14f4 8093 0000 		sts endpoints+26,r24
 5176 14f8 9093 0000 		sts endpoints+26+1,r25
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 5177               		.loc 5 174 0
 5178 14fc E0E0      		ldi r30,lo8(endpoints+24)
 5179 14fe F0E0      		ldi r31,hi8(endpoints+24)
 5180               	.LVL299:
 5181               	/* #APP */
 5182               	 ;  174 "usb/usb.h" 1
 5183 1500 02E2      		ldi r16, 34
 5184 1502 0693      		.dc.w 0x9306
 5185               		
 5186               	 ;  0 "" 2
 5187               	/* #NOAPP */
 5188 1504 00C0      		rjmp .L114
 5189               	.LVL300:
 5190               	.L218:
 5191               	.LBE1622:
 5192               	.LBE1623:
 5193               	.LBE1619:
 5194               	.LBE1618:
 5195               	.LBE1628:
 5196               	.LBE1630:
 5197               	.LBE1634:
 5198               	.LBE1581:
 5199               	.LBE1580:
 5200               	.LBE1579:
 5201               	.LBE1578:
 5202               	.LBE1641:
 5203               	.LBE1924:
 5204               	.LBB1925:
 5205               	.LBB1915:
 5206               	.LBB1913:
 5207               	.LBB1910:
 5208               	.LBB1837:
 5209               	.LBB1835:
 5210               	.LBB1833:
 5211               	.LBB1828:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 5212               		.loc 4 57 0
 5213 1506 8091 0000 		lds r24,ep_in_pipe_data+4
 5214 150a 372F      		mov r19,r23
 5215 150c 381B      		sub r19,r24
 5216               	.LBE1828:
 5217               	.LBE1833:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 5218               		.loc 2 127 0
 5219 150e 81E0      		ldi r24,lo8(1)
 5220 1510 1316      		cp __zero_reg__,r19
 5221 1512 04F4      		brge .+2
 5222 1514 00C0      		rjmp .L154
 5223 1516 00C0      		rjmp .L187
 5224               	.LVL301:
 5225               	.L219:
 5226               	.LBE1835:
 5227               	.LBE1837:
 5228               	.LBE1910:
 5229               	.LBB1911:
 5230               	.LBB1906:
 5231               	.LBB1905:
 5232               	.LBB1904:
 177:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 5233               		.loc 2 177 0
 5234 1518 BFB7      		in r27,__SREG__
 5235               	.LVL302:
 5236               	.LBB1896:
 5237               	.LBB1897:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 5238               		.loc 3 50 0
 5239               	/* #APP */
 5240               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 5241 151a F894      		cli
 5242               	 ;  0 "" 2
 5243               	.LVL303:
 5244               	/* #NOAPP */
 5245               	.LBE1897:
 5246               	.LBE1896:
 5247               		.loc 2 178 0
 5248 151c 1092 0000 		sts ep_in_data+2,__zero_reg__
 5249 1520 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 5250               	.LVL304:
 5251               	.LBB1898:
 5252               	.LBB1899:
  81:usb/pipe.h    **** 	pipe->data->count += 1;
 5253               		.loc 4 81 0
 5254 1524 8091 0000 		lds r24,ep_in_pipe_data+4
 5255 1528 8F5F      		subi r24,lo8(-(1))
 5256 152a 8093 0000 		sts ep_in_pipe_data+4,r24
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
 5257               		.loc 4 82 0
 5258 152e 8091 0000 		lds r24,ep_in_pipe_data+2
 5259 1532 9091 0000 		lds r25,ep_in_pipe_data+2+1
 5260 1536 805C      		subi r24,lo8(-(64))
 5261 1538 9F4F      		sbci r25,hi8(-(64))
 5262 153a 8093 0000 		sts ep_in_pipe_data+2,r24
 5263 153e 9093 0000 		sts ep_in_pipe_data+2+1,r25
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
 5264               		.loc 4 84 0
 5265 1542 E0E0      		ldi r30,hi8(ep_in_pipe_buffer+512)
 5266 1544 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 5267 1546 9E07      		cpc r25,r30
 5268 1548 01F4      		brne .L158
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
 5269               		.loc 4 85 0
 5270 154a 2092 0000 		sts ep_in_pipe_data+2,r2
 5271 154e 3092 0000 		sts ep_in_pipe_data+2+1,r3
 5272               	.L158:
 5273               	.LVL305:
 5274               	.LBE1899:
 5275               	.LBE1898:
 5276               	.LBB1900:
 5277               	.LBB1894:
 5278               	.LBB1892:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 5279               		.loc 2 80 0
 5280 1552 AFB7      		in r26,__SREG__
 5281               	.LVL306:
 5282               	.LBB1871:
 5283               	.LBB1872:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 5284               		.loc 3 50 0
 5285               	/* #APP */
 5286               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 5287 1554 F894      		cli
 5288               	 ;  0 "" 2
 5289               	.LVL307:
 5290               	/* #NOAPP */
 5291               	.LBE1872:
 5292               	.LBE1871:
 5293               	.LBB1873:
 5294               	.LBB1847:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 5295               		.loc 5 220 0
 5296 1556 8091 0000 		lds r24,endpoints+24
 5297 155a 8670      		andi r24,lo8(6)
 5298               	.LBE1847:
 5299               	.LBE1873:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 5300               		.loc 2 82 0
 5301 155c 01F4      		brne .L226
 5302               	.LVL308:
 5303               	.L159:
 5304               	.LBB1874:
 5305               	.LBB1875:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 5306               		.loc 3 70 0
 5307 155e AFBF      		out __SREG__,r26
 5308               		.loc 3 71 0
 5309               	.LVL309:
 5310               	.LBE1875:
 5311               	.LBE1874:
 5312               	.LBE1892:
 5313               	.LBE1894:
 5314               	.LBE1900:
 5315               	.LBB1901:
 5316               	.LBB1902:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 5317               		.loc 3 70 0
 5318 1560 BFBF      		out __SREG__,r27
 5319               		.loc 3 71 0
 5320 1562 00C0      		rjmp .L157
 5321               	.LVL310:
 5322               	.L226:
 5323               	.LBE1902:
 5324               	.LBE1901:
 5325               	.LBB1903:
 5326               	.LBB1895:
 5327               	.LBB1893:
 5328               	.LBB1876:
 5329               	.LBB1877:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 5330               		.loc 4 51 0
 5331 1564 2091 0000 		lds r18,ep_in_pipe_data+4
 5332               	.LBE1877:
 5333               	.LBE1876:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 5334               		.loc 2 83 0
 5335 1568 1216      		cp __zero_reg__,r18
 5336 156a 04F0      		brlt .+2
 5337 156c 00C0      		rjmp .L160
 5338               	.LBB1878:
 5339               	.LBB1879:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 5340               		.loc 4 62 0
 5341 156e 4091 0000 		lds r20,ep_in_pipe_data
 5342 1572 5091 0000 		lds r21,ep_in_pipe_data+1
 5343               	.LVL311:
 5344               	.LBE1879:
 5345               	.LBE1878:
 5346               	.LBB1880:
 5347               	.LBB1869:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 5348               		.loc 2 68 0
 5349 1576 3091 0000 		lds r19,ep_in_data
 5350               	.LVL312:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 5351               		.loc 2 69 0
 5352 157a 832F      		mov r24,r19
 5353 157c 90E0      		ldi r25,lo8(0)
 5354 157e 61E0      		ldi r22,lo8(1)
 5355 1580 8C15      		cp r24,r12
 5356 1582 9D05      		cpc r25,r13
 5357 1584 01F4      		brne .L161
 5358 1586 60E0      		ldi r22,lo8(0)
 5359               	.L161:
 5360 1588 6093 0000 		sts ep_in_data,r22
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 5361               		.loc 2 72 0
 5362 158c 3323      		tst r19
 5363 158e 01F4      		brne .L162
 5364               	.LVL313:
 5365               	.LBB1866:
 5366               	.LBB1867:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5367               		.loc 5 168 0
 5368 1590 4093 0000 		sts endpoints+28,r20
 5369 1594 5093 0000 		sts endpoints+28+1,r21
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5370               		.loc 5 169 0
 5371 1598 A092 0000 		sts endpoints+26,r10
 5372 159c B092 0000 		sts endpoints+26+1,r11
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 5373               		.loc 5 174 0
 5374 15a0 F701      		movw r30,r14
 5375               	/* #APP */
 5376               	 ;  174 "usb/usb.h" 1
 5377 15a2 02E2      		ldi r16, 34
 5378 15a4 0693      		.dc.w 0x9306
 5379               		
 5380               	 ;  0 "" 2
 5381               	.LVL314:
 5382               	/* #NOAPP */
 5383               	.L163:
 5384               	.LBE1867:
 5385               	.LBE1866:
 5386               	.LBE1869:
 5387               	.LBE1880:
 5388               	.LBB1881:
 5389               	.LBB1882:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 5390               		.loc 4 72 0
 5391 15a6 2150      		subi r18,lo8(-(-1))
 5392 15a8 2093 0000 		sts ep_in_pipe_data+4,r18
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 5393               		.loc 4 73 0
 5394 15ac CA01      		movw r24,r20
 5395 15ae 805C      		subi r24,lo8(-(64))
 5396 15b0 9F4F      		sbci r25,hi8(-(64))
 5397 15b2 8093 0000 		sts ep_in_pipe_data,r24
 5398 15b6 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 5399               		.loc 4 75 0
 5400 15ba F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 5401 15bc 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 5402 15be 9F07      		cpc r25,r31
 5403 15c0 01F4      		brne .L159
 5404               	.LBE1882:
 5405               	.LBE1881:
 5406               	.LBB1883:
 5407               	.LBB1850:
 5408               		.loc 4 91 0
 5409 15c2 2092 0000 		sts ep_in_pipe_data,r2
 5410 15c6 3092 0000 		sts ep_in_pipe_data+1,r3
 5411               	.LVL315:
 5412 15ca 00C0      		rjmp .L159
 5413               	.LVL316:
 5414               	.L162:
 5415               	.LBE1850:
 5416               	.LBE1883:
 5417               	.LBB1884:
 5418               	.LBB1870:
 5419               	.LBB1868:
 5420               	.LBB1865:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5421               		.loc 5 168 0
 5422 15cc 4093 0000 		sts endpoints+20,r20
 5423 15d0 5093 0000 		sts endpoints+20+1,r21
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5424               		.loc 5 169 0
 5425 15d4 A092 0000 		sts endpoints+18,r10
 5426 15d8 B092 0000 		sts endpoints+18+1,r11
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 5427               		.loc 5 176 0
 5428 15dc F701      		movw r30,r14
 5429               	/* #APP */
 5430               	 ;  176 "usb/usb.h" 1
 5431 15de 04E1      		ldi r16, 20
 5432 15e0 0693      		.dc.w 0x9306
 5433               		
 5434               	 ;  0 "" 2
 5435               	/* #NOAPP */
 5436 15e2 00C0      		rjmp .L163
 5437               	.LVL317:
 5438               	.L160:
 5439               	.LBE1865:
 5440               	.LBE1868:
 5441               	.LBE1870:
 5442               	.LBE1884:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 5443               		.loc 2 87 0
 5444 15e4 8091 0000 		lds r24,ep_in_data+1
 5445 15e8 8130      		cpi r24,lo8(1)
 5446 15ea 01F0      		breq .L227
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 5447               		.loc 2 91 0
 5448 15ec 8230      		cpi r24,lo8(2)
 5449 15ee 01F0      		breq .+2
 5450 15f0 00C0      		rjmp .L159
 5451               	.LVL318:
 5452               	.LBB1885:
 5453               	.LBB1886:
 5454               	.LBB1887:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 5455               		.loc 5 228 0
 5456 15f2 8091 0000 		lds r24,endpoints+24
 5457 15f6 8670      		andi r24,lo8(6)
 5458               	.LBE1887:
 5459               	.LBE1886:
 5460               	.LBE1885:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 5461               		.loc 2 91 0
 5462 15f8 8630      		cpi r24,lo8(6)
 5463 15fa 01F0      		breq .+2
 5464 15fc 00C0      		rjmp .L159
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 5465               		.loc 2 92 0
 5466 15fe 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 5467               		.loc 2 93 0
 5468 1602 1092 0000 		sts ep_in_data+2,__zero_reg__
 5469 1606 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 5470               	.LBB1888:
 5471               	.LBB1851:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 5472               		.loc 4 90 0
 5473 160a 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 5474               		.loc 4 91 0
 5475 160e 2092 0000 		sts ep_in_pipe_data+2,r2
 5476 1612 3092 0000 		sts ep_in_pipe_data+2+1,r3
 5477 1616 2092 0000 		sts ep_in_pipe_data,r2
 5478 161a 3092 0000 		sts ep_in_pipe_data+1,r3
 5479               	.LVL319:
 5480 161e 00C0      		rjmp .L159
 5481               	.LVL320:
 5482               	.L227:
 5483               	.LBE1851:
 5484               	.LBE1888:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 5485               		.loc 2 88 0
 5486 1620 1093 0000 		sts ep_in_data+1,r17
 5487               	.LBB1889:
 5488               	.LBB1890:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 5489               		.loc 4 62 0
 5490 1624 6091 0000 		lds r22,ep_in_pipe_data
 5491 1628 E091 0000 		lds r30,ep_in_pipe_data+1
 5492               	.LBE1890:
 5493               	.LBE1889:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 5494               		.loc 2 90 0
 5495 162c 2091 0000 		lds r18,ep_in_data+2
 5496 1630 3091 0000 		lds r19,ep_in_data+2+1
 5497               	.LVL321:
 5498               	.LBB1891:
 5499               	.LBB1860:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 5500               		.loc 2 68 0
 5501 1634 5091 0000 		lds r21,ep_in_data
 5502               	.LVL322:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 5503               		.loc 2 69 0
 5504 1638 852F      		mov r24,r21
 5505 163a 90E0      		ldi r25,lo8(0)
 5506 163c 41E0      		ldi r20,lo8(1)
 5507 163e 8C15      		cp r24,r12
 5508 1640 9D05      		cpc r25,r13
 5509 1642 01F4      		brne .L166
 5510 1644 40E0      		ldi r20,lo8(0)
 5511               	.L166:
 5512 1646 4093 0000 		sts ep_in_data,r20
 5513               	.LBB1854:
 5514               	.LBB1855:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5515               		.loc 5 168 0
 5516 164a 862F      		mov r24,r22
 5517 164c 9E2F      		mov r25,r30
 5518               	.LBE1855:
 5519               	.LBE1854:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 5520               		.loc 2 72 0
 5521 164e 5523      		tst r21
 5522 1650 01F4      		brne .L167
 5523               	.LVL323:
 5524               	.LBB1857:
 5525               	.LBB1856:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5526               		.loc 5 168 0
 5527 1652 8093 0000 		sts endpoints+28,r24
 5528 1656 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5529               		.loc 5 169 0
 5530 165a 2093 0000 		sts endpoints+26,r18
 5531 165e 3093 0000 		sts endpoints+26+1,r19
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 5532               		.loc 5 174 0
 5533 1662 F701      		movw r30,r14
 5534               	/* #APP */
 5535               	 ;  174 "usb/usb.h" 1
 5536 1664 02E2      		ldi r16, 34
 5537 1666 0693      		.dc.w 0x9306
 5538               		
 5539               	 ;  0 "" 2
 5540               	/* #NOAPP */
 5541 1668 00C0      		rjmp .L159
 5542               	.LVL324:
 5543               	.L167:
 5544               	.LBE1856:
 5545               	.LBE1857:
 5546               	.LBB1858:
 5547               	.LBB1859:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5548               		.loc 5 168 0
 5549 166a 8093 0000 		sts endpoints+20,r24
 5550 166e 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5551               		.loc 5 169 0
 5552 1672 2093 0000 		sts endpoints+18,r18
 5553 1676 3093 0000 		sts endpoints+18+1,r19
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 5554               		.loc 5 176 0
 5555 167a F701      		movw r30,r14
 5556               	/* #APP */
 5557               	 ;  176 "usb/usb.h" 1
 5558 167c 04E1      		ldi r16, 20
 5559 167e 0693      		.dc.w 0x9306
 5560               		
 5561               	 ;  0 "" 2
 5562               	/* #NOAPP */
 5563 1680 00C0      		rjmp .L159
 5564               	.LVL325:
 5565               	.L217:
 5566               	.LBE1859:
 5567               	.LBE1858:
 5568               	.LBE1860:
 5569               	.LBE1891:
 5570               	.LBE1893:
 5571               	.LBE1895:
 5572               	.LBE1903:
 5573               	.LBE1904:
 5574               	.LBE1905:
 5575               	.LBE1906:
 5576               	.LBE1911:
 5577               	.LBE1913:
 5578               	.LBE1915:
 5579               	.LBE1925:
 5580               	.LBB1926:
 5581               	.LBB1818:
 5582               	.LBB1757:
 5583               	.LBB1758:
 5584               	.LBB1759:
 5585               	.LBB1760:
 177:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 5586               		.loc 2 177 0
 5587 1682 7FB7      		in r23,__SREG__
 5588               	.LVL326:
 5589               	.LBB1761:
 5590               	.LBB1762:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 5591               		.loc 3 50 0
 5592               	/* #APP */
 5593               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 5594 1684 F894      		cli
 5595               	 ;  0 "" 2
 5596               	.LVL327:
 5597               	/* #NOAPP */
 5598               	.LBE1762:
 5599               	.LBE1761:
 5600               		.loc 2 178 0
 5601 1686 1092 0000 		sts ep_in_data+2,__zero_reg__
 5602 168a 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 5603               	.LVL328:
 5604               	.LBB1763:
 5605               	.LBB1764:
  81:usb/pipe.h    **** 	pipe->data->count += 1;
 5606               		.loc 4 81 0
 5607 168e 8091 0000 		lds r24,ep_in_pipe_data+4
 5608 1692 8F5F      		subi r24,lo8(-(1))
 5609 1694 8093 0000 		sts ep_in_pipe_data+4,r24
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
 5610               		.loc 4 82 0
 5611 1698 8091 0000 		lds r24,ep_in_pipe_data+2
 5612 169c 9091 0000 		lds r25,ep_in_pipe_data+2+1
 5613 16a0 805C      		subi r24,lo8(-(64))
 5614 16a2 9F4F      		sbci r25,hi8(-(64))
 5615 16a4 8093 0000 		sts ep_in_pipe_data+2,r24
 5616 16a8 9093 0000 		sts ep_in_pipe_data+2+1,r25
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
 5617               		.loc 4 84 0
 5618 16ac 30E0      		ldi r19,hi8(ep_in_pipe_buffer+512)
 5619 16ae 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 5620 16b0 9307      		cpc r25,r19
 5621 16b2 01F4      		brne .L143
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
 5622               		.loc 4 85 0
 5623 16b4 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 5624 16b6 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 5625 16b8 8093 0000 		sts ep_in_pipe_data+2,r24
 5626 16bc 9093 0000 		sts ep_in_pipe_data+2+1,r25
 5627               	.L143:
 5628               	.LVL329:
 5629               	.LBE1764:
 5630               	.LBE1763:
 5631               	.LBB1765:
 5632               	.LBB1766:
 5633               	.LBB1767:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 5634               		.loc 2 80 0
 5635 16c0 6FB7      		in r22,__SREG__
 5636               	.LVL330:
 5637               	.LBB1768:
 5638               	.LBB1769:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 5639               		.loc 3 50 0
 5640               	/* #APP */
 5641               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 5642 16c2 F894      		cli
 5643               	 ;  0 "" 2
 5644               	.LVL331:
 5645               	/* #NOAPP */
 5646               	.LBE1769:
 5647               	.LBE1768:
 5648               	.LBB1770:
 5649               	.LBB1771:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 5650               		.loc 5 220 0
 5651 16c4 8091 0000 		lds r24,endpoints+24
 5652 16c8 8670      		andi r24,lo8(6)
 5653               	.LBE1771:
 5654               	.LBE1770:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 5655               		.loc 2 82 0
 5656 16ca 01F0      		breq .L144
 5657               	.LBB1772:
 5658               	.LBB1773:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 5659               		.loc 4 51 0
 5660 16cc 4091 0000 		lds r20,ep_in_pipe_data+4
 5661               	.LBE1773:
 5662               	.LBE1772:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 5663               		.loc 2 83 0
 5664 16d0 1416      		cp __zero_reg__,r20
 5665 16d2 04F0      		brlt .+2
 5666 16d4 00C0      		rjmp .L145
 5667               	.LBB1774:
 5668               	.LBB1775:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 5669               		.loc 4 62 0
 5670 16d6 8091 0000 		lds r24,ep_in_pipe_data
 5671 16da 9091 0000 		lds r25,ep_in_pipe_data+1
 5672               	.LVL332:
 5673               	.LBE1775:
 5674               	.LBE1774:
 5675               	.LBB1776:
 5676               	.LBB1777:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 5677               		.loc 2 68 0
 5678 16de 2091 0000 		lds r18,ep_in_data
 5679               	.LVL333:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 5680               		.loc 2 69 0
 5681 16e2 31E0      		ldi r19,lo8(1)
 5682 16e4 2130      		cpi r18,lo8(1)
 5683 16e6 01F4      		brne .L146
 5684 16e8 30E0      		ldi r19,lo8(0)
 5685               	.L146:
 5686 16ea 3093 0000 		sts ep_in_data,r19
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 5687               		.loc 2 72 0
 5688 16ee 2223      		tst r18
 5689 16f0 01F4      		brne .L147
 5690               	.LVL334:
 5691               	.LBB1778:
 5692               	.LBB1779:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5693               		.loc 5 168 0
 5694 16f2 8093 0000 		sts endpoints+28,r24
 5695 16f6 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5696               		.loc 5 169 0
 5697 16fa 20E4      		ldi r18,lo8(64)
 5698 16fc 30E0      		ldi r19,hi8(64)
 5699 16fe 2093 0000 		sts endpoints+26,r18
 5700 1702 3093 0000 		sts endpoints+26+1,r19
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 5701               		.loc 5 174 0
 5702 1706 E0E0      		ldi r30,lo8(endpoints+24)
 5703 1708 F0E0      		ldi r31,hi8(endpoints+24)
 5704               	.LVL335:
 5705               	/* #APP */
 5706               	 ;  174 "usb/usb.h" 1
 5707 170a 02E2      		ldi r16, 34
 5708 170c 0693      		.dc.w 0x9306
 5709               		
 5710               	 ;  0 "" 2
 5711               	.LVL336:
 5712               	/* #NOAPP */
 5713               	.L148:
 5714               	.LBE1779:
 5715               	.LBE1778:
 5716               	.LBE1777:
 5717               	.LBE1776:
 5718               	.LBB1783:
 5719               	.LBB1784:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 5720               		.loc 4 72 0
 5721 170e 4150      		subi r20,lo8(-(-1))
 5722 1710 4093 0000 		sts ep_in_pipe_data+4,r20
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 5723               		.loc 4 73 0
 5724 1714 805C      		subi r24,lo8(-(64))
 5725 1716 9F4F      		sbci r25,hi8(-(64))
 5726 1718 8093 0000 		sts ep_in_pipe_data,r24
 5727 171c 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 5728               		.loc 4 75 0
 5729 1720 A0E0      		ldi r26,hi8(ep_in_pipe_buffer+512)
 5730 1722 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 5731 1724 9A07      		cpc r25,r26
 5732 1726 01F0      		breq .L228
 5733               	.LVL337:
 5734               	.L144:
 5735               	.LBE1784:
 5736               	.LBE1783:
 5737               	.LBB1786:
 5738               	.LBB1787:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 5739               		.loc 3 70 0
 5740 1728 6FBF      		out __SREG__,r22
 5741               		.loc 3 71 0
 5742               	.LVL338:
 5743               	.LBE1787:
 5744               	.LBE1786:
 5745               	.LBE1767:
 5746               	.LBE1766:
 5747               	.LBE1765:
 5748               	.LBB1809:
 5749               	.LBB1810:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 5750               		.loc 3 70 0
 5751 172a 7FBF      		out __SREG__,r23
 5752               		.loc 3 71 0
 5753 172c 00C0      		rjmp .L142
 5754               	.LVL339:
 5755               	.L147:
 5756               	.LBE1810:
 5757               	.LBE1809:
 5758               	.LBB1811:
 5759               	.LBB1807:
 5760               	.LBB1805:
 5761               	.LBB1788:
 5762               	.LBB1782:
 5763               	.LBB1780:
 5764               	.LBB1781:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5765               		.loc 5 168 0
 5766 172e 8093 0000 		sts endpoints+20,r24
 5767 1732 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5768               		.loc 5 169 0
 5769 1736 20E4      		ldi r18,lo8(64)
 5770 1738 30E0      		ldi r19,hi8(64)
 5771               	.LVL340:
 5772 173a 2093 0000 		sts endpoints+18,r18
 5773 173e 3093 0000 		sts endpoints+18+1,r19
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 5774               		.loc 5 176 0
 5775 1742 E0E0      		ldi r30,lo8(endpoints+24)
 5776 1744 F0E0      		ldi r31,hi8(endpoints+24)
 5777               	/* #APP */
 5778               	 ;  176 "usb/usb.h" 1
 5779 1746 04E1      		ldi r16, 20
 5780 1748 0693      		.dc.w 0x9306
 5781               		
 5782               	 ;  0 "" 2
 5783               	/* #NOAPP */
 5784 174a 00C0      		rjmp .L148
 5785               	.LVL341:
 5786               	.L145:
 5787               	.LBE1781:
 5788               	.LBE1780:
 5789               	.LBE1782:
 5790               	.LBE1788:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 5791               		.loc 2 87 0
 5792 174c 8091 0000 		lds r24,ep_in_data+1
 5793 1750 8130      		cpi r24,lo8(1)
 5794 1752 01F0      		breq .L229
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 5795               		.loc 2 91 0
 5796 1754 8230      		cpi r24,lo8(2)
 5797 1756 01F4      		brne .L144
 5798               	.LVL342:
 5799               	.LBB1789:
 5800               	.LBB1790:
 5801               	.LBB1791:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 5802               		.loc 5 228 0
 5803 1758 8091 0000 		lds r24,endpoints+24
 5804 175c 8670      		andi r24,lo8(6)
 5805               	.LBE1791:
 5806               	.LBE1790:
 5807               	.LBE1789:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 5808               		.loc 2 91 0
 5809 175e 8630      		cpi r24,lo8(6)
 5810 1760 01F4      		brne .L144
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 5811               		.loc 2 92 0
 5812 1762 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 5813               		.loc 2 93 0
 5814 1766 1092 0000 		sts ep_in_data+2,__zero_reg__
 5815 176a 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 5816               	.LBB1792:
 5817               	.LBB1793:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 5818               		.loc 4 90 0
 5819 176e 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 5820               		.loc 4 91 0
 5821 1772 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 5822 1774 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 5823 1776 8093 0000 		sts ep_in_pipe_data+2,r24
 5824 177a 9093 0000 		sts ep_in_pipe_data+2+1,r25
 5825 177e 8093 0000 		sts ep_in_pipe_data,r24
 5826 1782 9093 0000 		sts ep_in_pipe_data+1,r25
 5827               	.LVL343:
 5828 1786 00C0      		rjmp .L144
 5829               	.LVL344:
 5830               	.L228:
 5831               	.LBE1793:
 5832               	.LBE1792:
 5833               	.LBB1794:
 5834               	.LBB1785:
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 5835               		.loc 4 76 0
 5836 1788 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 5837 178a 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 5838 178c 8093 0000 		sts ep_in_pipe_data,r24
 5839 1790 9093 0000 		sts ep_in_pipe_data+1,r25
 5840 1794 00C0      		rjmp .L144
 5841               	.LVL345:
 5842               	.L229:
 5843               	.LBE1785:
 5844               	.LBE1794:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 5845               		.loc 2 88 0
 5846 1796 82E0      		ldi r24,lo8(2)
 5847 1798 8093 0000 		sts ep_in_data+1,r24
 5848               	.LBB1795:
 5849               	.LBB1796:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 5850               		.loc 4 62 0
 5851 179c 4091 0000 		lds r20,ep_in_pipe_data
 5852 17a0 5091 0000 		lds r21,ep_in_pipe_data+1
 5853               	.LBE1796:
 5854               	.LBE1795:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 5855               		.loc 2 90 0
 5856 17a4 8091 0000 		lds r24,ep_in_data+2
 5857 17a8 9091 0000 		lds r25,ep_in_data+2+1
 5858               	.LVL346:
 5859               	.LBB1797:
 5860               	.LBB1798:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 5861               		.loc 2 68 0
 5862 17ac 2091 0000 		lds r18,ep_in_data
 5863               	.LVL347:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 5864               		.loc 2 69 0
 5865 17b0 31E0      		ldi r19,lo8(1)
 5866 17b2 2130      		cpi r18,lo8(1)
 5867 17b4 01F4      		brne .L151
 5868 17b6 30E0      		ldi r19,lo8(0)
 5869               	.L151:
 5870 17b8 3093 0000 		sts ep_in_data,r19
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 5871               		.loc 2 72 0
 5872 17bc 2223      		tst r18
 5873 17be 01F4      		brne .L152
 5874               	.LVL348:
 5875               	.LBB1799:
 5876               	.LBB1800:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5877               		.loc 5 168 0
 5878 17c0 4093 0000 		sts endpoints+28,r20
 5879 17c4 5093 0000 		sts endpoints+28+1,r21
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5880               		.loc 5 169 0
 5881 17c8 8093 0000 		sts endpoints+26,r24
 5882 17cc 9093 0000 		sts endpoints+26+1,r25
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 5883               		.loc 5 174 0
 5884 17d0 E0E0      		ldi r30,lo8(endpoints+24)
 5885 17d2 F0E0      		ldi r31,hi8(endpoints+24)
 5886               	.LVL349:
 5887               	/* #APP */
 5888               	 ;  174 "usb/usb.h" 1
 5889 17d4 02E2      		ldi r16, 34
 5890 17d6 0693      		.dc.w 0x9306
 5891               		
 5892               	 ;  0 "" 2
 5893               	/* #NOAPP */
 5894 17d8 00C0      		rjmp .L144
 5895               	.LVL350:
 5896               	.L177:
 5897               	.LBE1800:
 5898               	.LBE1799:
 5899               	.LBE1798:
 5900               	.LBE1797:
 5901               	.LBE1805:
 5902               	.LBE1807:
 5903               	.LBE1811:
 5904               	.LBE1760:
 5905               	.LBE1759:
 5906               	.LBE1758:
 5907               	.LBE1757:
 5908               	.LBE1818:
 5909               	.LBE1926:
 5910               	.LBE1930:
 5911               	.LBB1931:
 5912               	.LBB1461:
 5913               	.LBB1458:
 5914               	.LBB1430:
 5915               	.LBB1427:
 5916               	.LBB1424:
 5917               	.LBB1421:
 5918               	.LBB1418:
 5919               	.LBB1417:
 5920               	.LBB1415:
 5921               	.LBB1416:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5922               		.loc 5 168 0
 5923 17da 262F      		mov r18,r22
 5924               	.LVL351:
 5925 17dc 342F      		mov r19,r20
 5926 17de 2093 0000 		sts endpoints+20,r18
 5927 17e2 3093 0000 		sts endpoints+20+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5928               		.loc 5 169 0
 5929 17e6 8093 0000 		sts endpoints+18,r24
 5930 17ea 9093 0000 		sts endpoints+18+1,r25
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 5931               		.loc 5 176 0
 5932 17ee E0E0      		ldi r30,lo8(endpoints+24)
 5933 17f0 F0E0      		ldi r31,hi8(endpoints+24)
 5934               	/* #APP */
 5935               	 ;  176 "usb/usb.h" 1
 5936 17f2 04E1      		ldi r16, 20
 5937 17f4 0693      		.dc.w 0x9306
 5938               		
 5939               	 ;  0 "" 2
 5940               	/* #NOAPP */
 5941 17f6 00C0      		rjmp .L169
 5942               	.LVL352:
 5943               	.L122:
 5944               	.LBE1416:
 5945               	.LBE1415:
 5946               	.LBE1417:
 5947               	.LBE1418:
 5948               	.LBE1421:
 5949               	.LBE1424:
 5950               	.LBE1427:
 5951               	.LBE1430:
 5952               	.LBE1458:
 5953               	.LBE1461:
 5954               	.LBE1931:
 5955               	.LBB1932:
 5956               	.LBB1927:
 5957               	.LBB1642:
 5958               	.LBB1639:
 5959               	.LBB1638:
 5960               	.LBB1637:
 5961               	.LBB1636:
 5962               	.LBB1635:
 5963               	.LBB1631:
 5964               	.LBB1629:
 5965               	.LBB1627:
 5966               	.LBB1626:
 5967               	.LBB1624:
 5968               	.LBB1625:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 5969               		.loc 5 168 0
 5970 17f8 352F      		mov r19,r21
 5971               	.LVL353:
 5972 17fa 2093 0000 		sts endpoints+20,r18
 5973 17fe 3093 0000 		sts endpoints+20+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 5974               		.loc 5 169 0
 5975 1802 8093 0000 		sts endpoints+18,r24
 5976 1806 9093 0000 		sts endpoints+18+1,r25
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 5977               		.loc 5 176 0
 5978 180a E0E0      		ldi r30,lo8(endpoints+24)
 5979 180c F0E0      		ldi r31,hi8(endpoints+24)
 5980               	/* #APP */
 5981               	 ;  176 "usb/usb.h" 1
 5982 180e 04E1      		ldi r16, 20
 5983 1810 0693      		.dc.w 0x9306
 5984               		
 5985               	 ;  0 "" 2
 5986               	/* #NOAPP */
 5987 1812 00C0      		rjmp .L114
 5988               	.LVL354:
 5989               	.L152:
 5990               	.LBE1625:
 5991               	.LBE1624:
 5992               	.LBE1626:
 5993               	.LBE1627:
 5994               	.LBE1629:
 5995               	.LBE1631:
 5996               	.LBE1635:
 5997               	.LBE1636:
 5998               	.LBE1637:
 5999               	.LBE1638:
 6000               	.LBE1639:
 6001               	.LBE1642:
 6002               	.LBE1927:
 6003               	.LBB1928:
 6004               	.LBB1819:
 6005               	.LBB1816:
 6006               	.LBB1815:
 6007               	.LBB1814:
 6008               	.LBB1813:
 6009               	.LBB1812:
 6010               	.LBB1808:
 6011               	.LBB1806:
 6012               	.LBB1804:
 6013               	.LBB1803:
 6014               	.LBB1801:
 6015               	.LBB1802:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 6016               		.loc 5 168 0
 6017 1814 4093 0000 		sts endpoints+20,r20
 6018 1818 5093 0000 		sts endpoints+20+1,r21
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 6019               		.loc 5 169 0
 6020 181c 8093 0000 		sts endpoints+18,r24
 6021 1820 9093 0000 		sts endpoints+18+1,r25
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 6022               		.loc 5 176 0
 6023 1824 E0E0      		ldi r30,lo8(endpoints+24)
 6024 1826 F0E0      		ldi r31,hi8(endpoints+24)
 6025               	/* #APP */
 6026               	 ;  176 "usb/usb.h" 1
 6027 1828 04E1      		ldi r16, 20
 6028 182a 0693      		.dc.w 0x9306
 6029               		
 6030               	 ;  0 "" 2
 6031               	/* #NOAPP */
 6032 182c 00C0      		rjmp .L144
 6033               	.LBE1802:
 6034               	.LBE1801:
 6035               	.LBE1803:
 6036               	.LBE1804:
 6037               	.LBE1806:
 6038               	.LBE1808:
 6039               	.LBE1812:
 6040               	.LBE1813:
 6041               	.LBE1814:
 6042               	.LBE1815:
 6043               	.LBE1816:
 6044               	.LBE1819:
 6045               	.LBE1928:
 6046               	.LBE1932:
 6047               		.cfi_endproc
 6048               	.LFE65:
 6050               	.global	uart_putchar
 6052               	uart_putchar:
 6053               	.LFB66:
 6054               		.file 9 "uart/uart.h"
   1:uart/uart.h   **** #include "Framework.h"
   2:uart/uart.h   **** #include <stdio.h>
   3:uart/uart.h   **** #include <stdlib.h>
   4:uart/uart.h   **** #include <string.h>
   5:uart/uart.h   **** 
   6:uart/uart.h   **** uint8_t debug = 0;
   7:uart/uart.h   **** 
   8:uart/uart.h   **** int uart_putchar(char c, USART_t* USART); 
   9:uart/uart.h   **** char uart_getchar(USART_t* USART);
  10:uart/uart.h   **** void send_uart(char*, USART_t* USART);
  11:uart/uart.h   **** 
  12:uart/uart.h   **** // code for communicating with the gprs module via uart
  13:uart/uart.h   **** int uart_putchar (char c, USART_t* USART) { 
 6055               		.loc 9 13 0
 6056               		.cfi_startproc
 6057               	.LVL355:
 6058               	/* prologue: function */
 6059               	/* frame size = 0 */
 6060               	/* stack size = 0 */
 6061               	.L__stack_usage = 0
 6062 182e FB01      		movw r30,r22
  14:uart/uart.h   ****     if (c == '\n') 
 6063               		.loc 9 14 0
 6064 1830 8A30      		cpi r24,lo8(10)
 6065 1832 01F0      		breq .L235
 6066               	.L234:
  15:uart/uart.h   ****         uart_putchar('\r', USART); 
  16:uart/uart.h   **** 
  17:uart/uart.h   ****     // Wait for the transmit buffer to be empty 
  18:uart/uart.h   ****     while ( !( USART->STATUS & USART_DREIF_bm) ); 
 6067               		.loc 9 18 0 discriminator 1
 6068 1834 9181      		ldd r25,Z+1
 6069 1836 95FF      		sbrs r25,5
 6070 1838 00C0      		rjmp .L234
  19:uart/uart.h   **** 
  20:uart/uart.h   ****     // Put our character into the transmit buffer 
  21:uart/uart.h   ****     USART->DATA = c; 
 6071               		.loc 9 21 0
 6072 183a 8083      		st Z,r24
  22:uart/uart.h   **** 
  23:uart/uart.h   ****     return 0; 
  24:uart/uart.h   **** } 
 6073               		.loc 9 24 0
 6074 183c 80E0      		ldi r24,lo8(0)
 6075 183e 90E0      		ldi r25,hi8(0)
 6076               	.LVL356:
 6077               	/* epilogue start */
 6078 1840 0895      		ret
 6079               	.LVL357:
 6080               	.L235:
 6081               	.LBB1949:
 6082               	.LBB1950:
  18:uart/uart.h   ****     while ( !( USART->STATUS & USART_DREIF_bm) ); 
 6083               		.loc 9 18 0
 6084 1842 9181      		ldd r25,Z+1
 6085 1844 95FF      		sbrs r25,5
 6086 1846 00C0      		rjmp .L235
  21:uart/uart.h   ****     USART->DATA = c; 
 6087               		.loc 9 21 0
 6088 1848 9DE0      		ldi r25,lo8(13)
 6089 184a 9083      		st Z,r25
 6090 184c 00C0      		rjmp .L234
 6091               	.LBE1950:
 6092               	.LBE1949:
 6093               		.cfi_endproc
 6094               	.LFE66:
 6096               	.global	uart_getchar
 6098               	uart_getchar:
 6099               	.LFB67:
  25:uart/uart.h   **** 
  26:uart/uart.h   **** // code for communicating with the gprs module via uart
  27:uart/uart.h   **** char uart_getchar (USART_t* USART) { 
 6100               		.loc 9 27 0
 6101               		.cfi_startproc
 6102               	.LVL358:
 6103               	/* prologue: function */
 6104               	/* frame size = 0 */
 6105               	/* stack size = 0 */
 6106               	.L__stack_usage = 0
 6107 184e FC01      		movw r30,r24
 6108               	.LVL359:
 6109               	.L239:
  28:uart/uart.h   **** 
  29:uart/uart.h   ****     // Wait for the receive buffer to be empty 
  30:uart/uart.h   ****     while ( !( USART->STATUS & USART_RXCIF_bm) ); 
 6110               		.loc 9 30 0 discriminator 1
 6111 1850 8181      		ldd r24,Z+1
 6112 1852 87FF      		sbrs r24,7
 6113 1854 00C0      		rjmp .L239
  31:uart/uart.h   **** 
  32:uart/uart.h   ****     // Receive char from receive buffer 
  33:uart/uart.h   ****     return USART->DATA; 
 6114               		.loc 9 33 0
 6115 1856 8081      		ld r24,Z
 6116               	/* epilogue start */
  34:uart/uart.h   **** } 
 6117               		.loc 9 34 0
 6118 1858 0895      		ret
 6119               		.cfi_endproc
 6120               	.LFE67:
 6122               	.global	send_uart
 6124               	send_uart:
 6125               	.LFB68:
  35:uart/uart.h   **** 
  36:uart/uart.h   **** void send_uart(char* text, USART_t* USART) {
 6126               		.loc 9 36 0
 6127               		.cfi_startproc
 6128               	.LVL360:
 6129 185a 4F92      		push r4
 6130               	.LCFI90:
 6131               		.cfi_def_cfa_offset 3
 6132               		.cfi_offset 4, -2
 6133 185c 5F92      		push r5
 6134               	.LCFI91:
 6135               		.cfi_def_cfa_offset 4
 6136               		.cfi_offset 5, -3
 6137 185e 6F92      		push r6
 6138               	.LCFI92:
 6139               		.cfi_def_cfa_offset 5
 6140               		.cfi_offset 6, -4
 6141 1860 7F92      		push r7
 6142               	.LCFI93:
 6143               		.cfi_def_cfa_offset 6
 6144               		.cfi_offset 7, -5
 6145 1862 8F92      		push r8
 6146               	.LCFI94:
 6147               		.cfi_def_cfa_offset 7
 6148               		.cfi_offset 8, -6
 6149 1864 9F92      		push r9
 6150               	.LCFI95:
 6151               		.cfi_def_cfa_offset 8
 6152               		.cfi_offset 9, -7
 6153 1866 AF92      		push r10
 6154               	.LCFI96:
 6155               		.cfi_def_cfa_offset 9
 6156               		.cfi_offset 10, -8
 6157 1868 BF92      		push r11
 6158               	.LCFI97:
 6159               		.cfi_def_cfa_offset 10
 6160               		.cfi_offset 11, -9
 6161 186a CF92      		push r12
 6162               	.LCFI98:
 6163               		.cfi_def_cfa_offset 11
 6164               		.cfi_offset 12, -10
 6165 186c DF92      		push r13
 6166               	.LCFI99:
 6167               		.cfi_def_cfa_offset 12
 6168               		.cfi_offset 13, -11
 6169 186e EF92      		push r14
 6170               	.LCFI100:
 6171               		.cfi_def_cfa_offset 13
 6172               		.cfi_offset 14, -12
 6173 1870 FF92      		push r15
 6174               	.LCFI101:
 6175               		.cfi_def_cfa_offset 14
 6176               		.cfi_offset 15, -13
 6177 1872 0F93      		push r16
 6178               	.LCFI102:
 6179               		.cfi_def_cfa_offset 15
 6180               		.cfi_offset 16, -14
 6181 1874 1F93      		push r17
 6182               	.LCFI103:
 6183               		.cfi_def_cfa_offset 16
 6184               		.cfi_offset 17, -15
 6185 1876 CF93      		push r28
 6186               	.LCFI104:
 6187               		.cfi_def_cfa_offset 17
 6188               		.cfi_offset 28, -16
 6189 1878 DF93      		push r29
 6190               	.LCFI105:
 6191               		.cfi_def_cfa_offset 18
 6192               		.cfi_offset 29, -17
 6193               	/* prologue: function */
 6194               	/* frame size = 0 */
 6195               	/* stack size = 16 */
 6196               	.L__stack_usage = 16
 6197 187a EC01      		movw r28,r24
 6198 187c 7B01      		movw r14,r22
 6199               	.LVL361:
 6200               	.LBB2122:
 6201               	.LBB2123:
  15:concat/concat.h ****     char *result = malloc(strlen(s1)+strlen(s2)+1);
 6202               		.loc 7 15 0
 6203 187e DC01      		movw r26,r24
 6204 1880 0D90      		ld __tmp_reg__,X+
 6205 1882 0020      		tst __tmp_reg__
 6206 1884 01F4      		brne .-6
 6207 1886 CD01      		movw r24,r26
 6208               	.LVL362:
 6209 1888 8C1B      		sub r24,r28
 6210 188a 9D0B      		sbc r25,r29
 6211 188c 0196      		adiw r24,1
 6212 188e 0E94 0000 		call malloc
 6213               	.LVL363:
 6214 1892 A92E      		mov r10,r25
 6215 1894 C82E      		mov r12,r24
 6216 1896 D92E      		mov r13,r25
 6217               	.LVL364:
  17:concat/concat.h ****     strcpy(result, s1);
 6218               		.loc 7 17 0
 6219 1898 C601      		movw r24,r12
 6220 189a BE01      		movw r22,r28
 6221 189c 0E94 0000 		call strcpy
  18:concat/concat.h ****     strcat(result, s2);
 6222               		.loc 7 18 0
 6223 18a0 AC2D      		mov r26,r12
 6224 18a2 BA2D      		mov r27,r10
 6225 18a4 FD01      		movw r30,r26
 6226 18a6 0190      		ld __tmp_reg__,Z+
 6227 18a8 0020      		tst __tmp_reg__
 6228 18aa 01F4      		brne .-6
 6229 18ac 3197      		sbiw r30,1
 6230 18ae EA1B      		sub r30,r26
 6231 18b0 FB0B      		sbc r31,r27
 6232 18b2 EC0D      		add r30,r12
 6233 18b4 FD1D      		adc r31,r13
 6234 18b6 8DE0      		ldi r24,lo8(13)
 6235 18b8 90E0      		ldi r25,hi8(13)
 6236 18ba 8083      		st Z,r24
 6237 18bc 9183      		std Z+1,r25
 6238               	.LBE2123:
 6239               	.LBE2122:
 6240               	.LBB2124:
 6241               	.LBB2125:
 6242               	.LBB2126:
 6243               	.LBB2127:
 6244               	.LBB2128:
 6245               	.LBB2129:
 6246               	.LBB2130:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 6247               		.loc 4 57 0
 6248 18be D6E0      		ldi r29,lo8(6)
 6249               	.LBE2130:
 6250               	.LBE2129:
 6251               	.LBE2128:
 6252               	.LBE2127:
 6253               	.LBE2126:
 6254               	.LBB2141:
 6255               	.LBB2142:
 6256               	.LBB2143:
 6257               	.LBB2144:
 6258               	.LBB2145:
 6259               	.LBB2146:
 6260               	.LBB2147:
 6261               	.LBB2148:
 6262               	.LBB2149:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 6263               		.loc 5 220 0
 6264 18c0 C0E0      		ldi r28,lo8(endpoints+24)
 6265 18c2 6C2E      		mov r6,r28
 6266 18c4 C0E0      		ldi r28,hi8(endpoints+24)
 6267 18c6 7C2E      		mov r7,r28
 6268               	.LVL365:
 6269               	.LBE2149:
 6270               	.LBE2148:
 6271               	.LBB2151:
 6272               	.LBB2152:
 6273               		.loc 4 91 0
 6274 18c8 10E0      		ldi r17,lo8(ep_in_pipe_buffer)
 6275 18ca 412E      		mov r4,r17
 6276 18cc 10E0      		ldi r17,hi8(ep_in_pipe_buffer)
 6277 18ce 512E      		mov r5,r17
 6278               	.LBE2152:
 6279               	.LBE2151:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 6280               		.loc 2 88 0
 6281 18d0 12E0      		ldi r17,lo8(2)
 6282               	.LBB2155:
 6283               	.LBB2156:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 6284               		.loc 2 69 0
 6285 18d2 01E0      		ldi r16,lo8(1)
 6286 18d4 A02E      		mov r10,r16
 6287 18d6 B12C      		mov r11,__zero_reg__
 6288               	.LBE2156:
 6289               	.LBE2155:
 6290               	.LBB2166:
 6291               	.LBB2167:
 6292               	.LBB2168:
 6293               	.LBB2169:
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 6294               		.loc 5 169 0
 6295 18d8 20E4      		ldi r18,lo8(64)
 6296 18da 822E      		mov r8,r18
 6297 18dc 912C      		mov r9,__zero_reg__
 6298               	.LVL366:
 6299               	.L285:
 6300               	.LBE2169:
 6301               	.LBE2168:
 6302               	.LBE2167:
 6303               	.LBE2166:
 6304               	.LBE2147:
 6305               	.LBE2146:
 6306               	.LBE2145:
 6307               	.LBE2144:
 6308               	.LBE2143:
 6309               	.LBE2142:
 6310               	.LBE2141:
 6311               	.LBE2125:
 6312               	.LBE2124:
  37:uart/uart.h   ****   char c;
  38:uart/uart.h   ****   char* new_text = concat(text, "\r");
  39:uart/uart.h   ****   while (*new_text != '\0') {  
 6313               		.loc 9 39 0 discriminator 1
 6314 18de D601      		movw r26,r12
 6315 18e0 CD91      		ld r28,X+
 6316 18e2 6D01      		movw r12,r26
 6317 18e4 CC23      		tst r28
 6318 18e6 01F4      		brne .+2
 6319 18e8 00C0      		rjmp .L287
 6320               	.L260:
 6321               	.LVL367:
 6322               	.LBB2231:
 6323               	.LBB2232:
  14:uart/uart.h   ****     if (c == '\n') 
 6324               		.loc 9 14 0
 6325 18ea CA30      		cpi r28,lo8(10)
 6326 18ec 01F4      		brne .+2
 6327 18ee 00C0      		rjmp .L288
 6328               	.L279:
  18:uart/uart.h   ****     while ( !( USART->STATUS & USART_DREIF_bm) ); 
 6329               		.loc 9 18 0
 6330 18f0 F701      		movw r30,r14
 6331 18f2 8181      		ldd r24,Z+1
 6332 18f4 85FF      		sbrs r24,5
 6333 18f6 00C0      		rjmp .L279
  21:uart/uart.h   ****     USART->DATA = c; 
 6334               		.loc 9 21 0
 6335 18f8 C083      		st Z,r28
 6336               	.LBE2232:
 6337               	.LBE2231:
  40:uart/uart.h   ****     uart_putchar(*new_text, USART);
  41:uart/uart.h   ****     new_text++;
  42:uart/uart.h   **** 
  43:uart/uart.h   ****     if (debug == 1) {
 6338               		.loc 9 43 0
 6339 18fa 8091 0000 		lds r24,debug
 6340 18fe 8130      		cpi r24,lo8(1)
 6341 1900 01F4      		brne .L285
 6342               	.L278:
 6343               	.LBB2234:
 6344               	.LBB2235:
  30:uart/uart.h   ****     while ( !( USART->STATUS & USART_RXCIF_bm) ); 
 6345               		.loc 9 30 0
 6346 1902 D701      		movw r26,r14
 6347 1904 1196      		adiw r26,1
 6348 1906 8C91      		ld r24,X
 6349 1908 1197      		sbiw r26,1
 6350 190a 87FF      		sbrs r24,7
 6351 190c 00C0      		rjmp .L278
  33:uart/uart.h   ****     return USART->DATA; 
 6352               		.loc 9 33 0
 6353 190e 2C91      		ld r18,X
 6354               	.LVL368:
 6355               	.L249:
 6356               	.LBE2235:
 6357               	.LBE2234:
 6358               	.LBB2236:
 6359               	.LBB2228:
 6360               	.LBB2221:
 6361               	.LBB2139:
 6362               	.LBB2137:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 6363               		.loc 2 123 0
 6364 1910 9FB7      		in r25,__SREG__
 6365               	.LVL369:
 6366               	.LBB2132:
 6367               	.LBB2133:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 6368               		.loc 3 50 0
 6369               	/* #APP */
 6370               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 6371 1912 F894      		cli
 6372               	 ;  0 "" 2
 6373               	.LVL370:
 6374               	/* #NOAPP */
 6375               	.LBE2133:
 6376               	.LBE2132:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 6377               		.loc 2 124 0
 6378 1914 8091 0000 		lds r24,ep_in_data+1
 6379 1918 8823      		tst r24
 6380 191a 01F4      		brne .+2
 6381 191c 00C0      		rjmp .L289
 6382               	.L275:
 125:usb/usb_pipe.h **** 			r = false;
 6383               		.loc 2 125 0
 6384 191e 80E0      		ldi r24,lo8(0)
 6385               	.L247:
 6386               	.LBB2134:
 6387               	.LBB2135:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 6388               		.loc 3 70 0
 6389 1920 9FBF      		out __SREG__,r25
 6390               		.loc 3 71 0
 6391               	.LBE2135:
 6392               	.LBE2134:
 6393               	.LBE2137:
 6394               	.LBE2139:
 6395               	.LBE2221:
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
 6396               		.loc 1 20 0
 6397 1922 8823      		tst r24
 6398 1924 01F0      		breq .L249
 6399               	.LVL371:
 6400               	.LBB2222:
 6401               	.LBB2223:
 175:usb/usb_pipe.h **** 	p->pipe->data->write_ptr[p->data->packet_offset++] = v;
 6402               		.loc 2 175 0
 6403 1926 8091 0000 		lds r24,ep_in_data+2
 6404 192a 9091 0000 		lds r25,ep_in_data+2+1
 6405 192e E091 0000 		lds r30,ep_in_pipe_data+2
 6406 1932 F091 0000 		lds r31,ep_in_pipe_data+2+1
 6407 1936 E80F      		add r30,r24
 6408 1938 F91F      		adc r31,r25
 6409 193a 2083      		st Z,r18
 6410 193c 0196      		adiw r24,1
 6411 193e 8093 0000 		sts ep_in_data+2,r24
 6412 1942 9093 0000 		sts ep_in_data+2+1,r25
 176:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 6413               		.loc 2 176 0
 6414 1946 8034      		cpi r24,64
 6415 1948 9105      		cpc r25,__zero_reg__
 6416 194a 01F4      		brne .L285
 6417               	.LBE2223:
 6418               	.LBE2222:
 6419               	.LBB2224:
 6420               	.LBB2218:
 6421               	.LBB2215:
 6422               	.LBB2212:
 177:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 6423               		.loc 2 177 0
 6424 194c AFB7      		in r26,__SREG__
 6425               	.LVL372:
 6426               	.LBB2203:
 6427               	.LBB2204:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 6428               		.loc 3 50 0
 6429               	/* #APP */
 6430               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 6431 194e F894      		cli
 6432               	 ;  0 "" 2
 6433               	.LVL373:
 6434               	/* #NOAPP */
 6435               	.LBE2204:
 6436               	.LBE2203:
 6437               		.loc 2 178 0
 6438 1950 1092 0000 		sts ep_in_data+2,__zero_reg__
 6439 1954 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 6440               	.LVL374:
 6441               	.LBB2205:
 6442               	.LBB2206:
  81:usb/pipe.h    **** 	pipe->data->count += 1;
 6443               		.loc 4 81 0
 6444 1958 8091 0000 		lds r24,ep_in_pipe_data+4
 6445 195c 8F5F      		subi r24,lo8(-(1))
 6446 195e 8093 0000 		sts ep_in_pipe_data+4,r24
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
 6447               		.loc 4 82 0
 6448 1962 8091 0000 		lds r24,ep_in_pipe_data+2
 6449 1966 9091 0000 		lds r25,ep_in_pipe_data+2+1
 6450 196a 805C      		subi r24,lo8(-(64))
 6451 196c 9F4F      		sbci r25,hi8(-(64))
 6452 196e 8093 0000 		sts ep_in_pipe_data+2,r24
 6453 1972 9093 0000 		sts ep_in_pipe_data+2+1,r25
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
 6454               		.loc 4 84 0
 6455 1976 B0E0      		ldi r27,hi8(ep_in_pipe_buffer+512)
 6456 1978 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 6457 197a 9B07      		cpc r25,r27
 6458 197c 01F4      		brne .L250
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
 6459               		.loc 4 85 0
 6460 197e 4092 0000 		sts ep_in_pipe_data+2,r4
 6461 1982 5092 0000 		sts ep_in_pipe_data+2+1,r5
 6462               	.L250:
 6463               	.LVL375:
 6464               	.LBE2206:
 6465               	.LBE2205:
 6466               	.LBB2207:
 6467               	.LBB2200:
 6468               	.LBB2197:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 6469               		.loc 2 80 0
 6470 1986 5FB7      		in r21,__SREG__
 6471               	.LVL376:
 6472               	.LBB2176:
 6473               	.LBB2177:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 6474               		.loc 3 50 0
 6475               	/* #APP */
 6476               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 6477 1988 F894      		cli
 6478               	 ;  0 "" 2
 6479               	.LVL377:
 6480               	/* #NOAPP */
 6481               	.LBE2177:
 6482               	.LBE2176:
 6483               	.LBB2178:
 6484               	.LBB2150:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 6485               		.loc 5 220 0
 6486 198a 8091 0000 		lds r24,endpoints+24
 6487 198e 8670      		andi r24,lo8(6)
 6488               	.LBE2150:
 6489               	.LBE2178:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 6490               		.loc 2 82 0
 6491 1990 01F4      		brne .L290
 6492               	.LVL378:
 6493               	.L251:
 6494               	.LBB2179:
 6495               	.LBB2180:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 6496               		.loc 3 70 0
 6497 1992 5FBF      		out __SREG__,r21
 6498               		.loc 3 71 0
 6499               	.LVL379:
 6500               	.LBE2180:
 6501               	.LBE2179:
 6502               	.LBE2197:
 6503               	.LBE2200:
 6504               	.LBE2207:
 6505               	.LBB2208:
 6506               	.LBB2209:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 6507               		.loc 3 70 0
 6508 1994 AFBF      		out __SREG__,r26
 6509               		.loc 3 71 0
 6510               	.LBE2209:
 6511               	.LBE2208:
 6512               	.LBE2212:
 6513               	.LBE2215:
 6514               	.LBE2218:
 6515               	.LBE2224:
 6516               	.LBE2228:
 6517               	.LBE2236:
  39:uart/uart.h   ****   while (*new_text != '\0') {  
 6518               		.loc 9 39 0
 6519 1996 D601      		movw r26,r12
 6520               	.LVL380:
 6521 1998 CD91      		ld r28,X+
 6522               	.LVL381:
 6523 199a 6D01      		movw r12,r26
 6524 199c CC23      		tst r28
 6525 199e 01F0      		breq .+2
 6526 19a0 00C0      		rjmp .L260
 6527               	.LVL382:
 6528               	.L287:
  44:uart/uart.h   ****       c = uart_getchar(USART);
  45:uart/uart.h   ****       send_byte(c);
  46:uart/uart.h   ****     }
  47:uart/uart.h   ****   }
  48:uart/uart.h   ****   if (debug == 1) {
 6529               		.loc 9 48 0
 6530 19a2 8091 0000 		lds r24,debug
 6531 19a6 8130      		cpi r24,lo8(1)
 6532 19a8 01F4      		brne .+2
 6533 19aa 00C0      		rjmp .L291
 6534               	.L241:
 6535               	/* epilogue start */
  49:uart/uart.h   ****     break_and_flush();
  50:uart/uart.h   ****   }
  51:uart/uart.h   **** }
 6536               		.loc 9 51 0
 6537 19ac DF91      		pop r29
 6538 19ae CF91      		pop r28
 6539 19b0 1F91      		pop r17
 6540 19b2 0F91      		pop r16
 6541 19b4 FF90      		pop r15
 6542 19b6 EF90      		pop r14
 6543               	.LVL383:
 6544 19b8 DF90      		pop r13
 6545 19ba CF90      		pop r12
 6546 19bc BF90      		pop r11
 6547 19be AF90      		pop r10
 6548 19c0 9F90      		pop r9
 6549 19c2 8F90      		pop r8
 6550 19c4 7F90      		pop r7
 6551 19c6 6F90      		pop r6
 6552 19c8 5F90      		pop r5
 6553 19ca 4F90      		pop r4
 6554 19cc 0895      		ret
 6555               	.LVL384:
 6556               	.L289:
 6557               	.LBB2237:
 6558               	.LBB2229:
 6559               	.LBB2225:
 6560               	.LBB2140:
 6561               	.LBB2138:
 6562               	.LBB2136:
 6563               	.LBB2131:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 6564               		.loc 4 57 0
 6565 19ce 8091 0000 		lds r24,ep_in_pipe_data+4
 6566 19d2 3D2F      		mov r19,r29
 6567 19d4 381B      		sub r19,r24
 6568               	.LBE2131:
 6569               	.LBE2136:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 6570               		.loc 2 127 0
 6571 19d6 81E0      		ldi r24,lo8(1)
 6572 19d8 1316      		cp __zero_reg__,r19
 6573 19da 04F4      		brge .+2
 6574 19dc 00C0      		rjmp .L247
 6575 19de 00C0      		rjmp .L275
 6576               	.LVL385:
 6577               	.L290:
 6578               	.LBE2138:
 6579               	.LBE2140:
 6580               	.LBE2225:
 6581               	.LBB2226:
 6582               	.LBB2219:
 6583               	.LBB2216:
 6584               	.LBB2213:
 6585               	.LBB2210:
 6586               	.LBB2201:
 6587               	.LBB2198:
 6588               	.LBB2181:
 6589               	.LBB2182:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 6590               		.loc 4 51 0
 6591 19e0 4091 0000 		lds r20,ep_in_pipe_data+4
 6592               	.LBE2182:
 6593               	.LBE2181:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 6594               		.loc 2 83 0
 6595 19e4 1416      		cp __zero_reg__,r20
 6596 19e6 04F0      		brlt .+2
 6597 19e8 00C0      		rjmp .L252
 6598               	.LBB2183:
 6599               	.LBB2184:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 6600               		.loc 4 62 0
 6601 19ea 2091 0000 		lds r18,ep_in_pipe_data
 6602 19ee 3091 0000 		lds r19,ep_in_pipe_data+1
 6603               	.LVL386:
 6604               	.LBE2184:
 6605               	.LBE2183:
 6606               	.LBB2185:
 6607               	.LBB2174:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 6608               		.loc 2 68 0
 6609 19f2 6091 0000 		lds r22,ep_in_data
 6610               	.LVL387:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 6611               		.loc 2 69 0
 6612 19f6 862F      		mov r24,r22
 6613 19f8 90E0      		ldi r25,lo8(0)
 6614               	.LVL388:
 6615 19fa 71E0      		ldi r23,lo8(1)
 6616 19fc 8A15      		cp r24,r10
 6617 19fe 9B05      		cpc r25,r11
 6618 1a00 01F4      		brne .L253
 6619 1a02 70E0      		ldi r23,lo8(0)
 6620               	.L253:
 6621 1a04 7093 0000 		sts ep_in_data,r23
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 6622               		.loc 2 72 0
 6623 1a08 6623      		tst r22
 6624 1a0a 01F4      		brne .L254
 6625               	.LVL389:
 6626               	.LBB2171:
 6627               	.LBB2172:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 6628               		.loc 5 168 0
 6629 1a0c 2093 0000 		sts endpoints+28,r18
 6630 1a10 3093 0000 		sts endpoints+28+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 6631               		.loc 5 169 0
 6632 1a14 8092 0000 		sts endpoints+26,r8
 6633 1a18 9092 0000 		sts endpoints+26+1,r9
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 6634               		.loc 5 174 0
 6635 1a1c F301      		movw r30,r6
 6636               	.LVL390:
 6637               	/* #APP */
 6638               	 ;  174 "usb/usb.h" 1
 6639 1a1e 02E2      		ldi r16, 34
 6640 1a20 0693      		.dc.w 0x9306
 6641               		
 6642               	 ;  0 "" 2
 6643               	.LVL391:
 6644               	/* #NOAPP */
 6645               	.L255:
 6646               	.LBE2172:
 6647               	.LBE2171:
 6648               	.LBE2174:
 6649               	.LBE2185:
 6650               	.LBB2186:
 6651               	.LBB2187:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 6652               		.loc 4 72 0
 6653 1a22 4150      		subi r20,lo8(-(-1))
 6654 1a24 4093 0000 		sts ep_in_pipe_data+4,r20
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 6655               		.loc 4 73 0
 6656 1a28 C901      		movw r24,r18
 6657 1a2a 805C      		subi r24,lo8(-(64))
 6658 1a2c 9F4F      		sbci r25,hi8(-(64))
 6659 1a2e 8093 0000 		sts ep_in_pipe_data,r24
 6660 1a32 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 6661               		.loc 4 75 0
 6662 1a36 F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 6663 1a38 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 6664 1a3a 9F07      		cpc r25,r31
 6665 1a3c 01F0      		breq .+2
 6666 1a3e 00C0      		rjmp .L251
 6667               	.LBE2187:
 6668               	.LBE2186:
 6669               	.LBB2188:
 6670               	.LBB2153:
 6671               		.loc 4 91 0
 6672 1a40 4092 0000 		sts ep_in_pipe_data,r4
 6673 1a44 5092 0000 		sts ep_in_pipe_data+1,r5
 6674               	.LVL392:
 6675 1a48 00C0      		rjmp .L251
 6676               	.LVL393:
 6677               	.L254:
 6678               	.LBE2153:
 6679               	.LBE2188:
 6680               	.LBB2189:
 6681               	.LBB2175:
 6682               	.LBB2173:
 6683               	.LBB2170:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 6684               		.loc 5 168 0
 6685 1a4a 2093 0000 		sts endpoints+20,r18
 6686 1a4e 3093 0000 		sts endpoints+20+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 6687               		.loc 5 169 0
 6688 1a52 8092 0000 		sts endpoints+18,r8
 6689 1a56 9092 0000 		sts endpoints+18+1,r9
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 6690               		.loc 5 176 0
 6691 1a5a F301      		movw r30,r6
 6692               	.LVL394:
 6693               	/* #APP */
 6694               	 ;  176 "usb/usb.h" 1
 6695 1a5c 04E1      		ldi r16, 20
 6696 1a5e 0693      		.dc.w 0x9306
 6697               		
 6698               	 ;  0 "" 2
 6699               	/* #NOAPP */
 6700 1a60 00C0      		rjmp .L255
 6701               	.LVL395:
 6702               	.L252:
 6703               	.LBE2170:
 6704               	.LBE2173:
 6705               	.LBE2175:
 6706               	.LBE2189:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 6707               		.loc 2 87 0
 6708 1a62 8091 0000 		lds r24,ep_in_data+1
 6709 1a66 8130      		cpi r24,lo8(1)
 6710 1a68 01F0      		breq .L292
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 6711               		.loc 2 91 0
 6712 1a6a 8230      		cpi r24,lo8(2)
 6713 1a6c 01F0      		breq .+2
 6714 1a6e 00C0      		rjmp .L251
 6715               	.LVL396:
 6716               	.LBB2190:
 6717               	.LBB2191:
 6718               	.LBB2192:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 6719               		.loc 5 228 0
 6720 1a70 8091 0000 		lds r24,endpoints+24
 6721 1a74 8670      		andi r24,lo8(6)
 6722               	.LBE2192:
 6723               	.LBE2191:
 6724               	.LBE2190:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 6725               		.loc 2 91 0
 6726 1a76 8630      		cpi r24,lo8(6)
 6727 1a78 01F0      		breq .+2
 6728 1a7a 00C0      		rjmp .L251
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 6729               		.loc 2 92 0
 6730 1a7c 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 6731               		.loc 2 93 0
 6732 1a80 1092 0000 		sts ep_in_data+2,__zero_reg__
 6733 1a84 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 6734               	.LBB2193:
 6735               	.LBB2154:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 6736               		.loc 4 90 0
 6737 1a88 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 6738               		.loc 4 91 0
 6739 1a8c 4092 0000 		sts ep_in_pipe_data+2,r4
 6740 1a90 5092 0000 		sts ep_in_pipe_data+2+1,r5
 6741 1a94 4092 0000 		sts ep_in_pipe_data,r4
 6742 1a98 5092 0000 		sts ep_in_pipe_data+1,r5
 6743               	.LVL397:
 6744 1a9c 00C0      		rjmp .L251
 6745               	.LVL398:
 6746               	.L288:
 6747               	.LBE2154:
 6748               	.LBE2193:
 6749               	.LBE2198:
 6750               	.LBE2201:
 6751               	.LBE2210:
 6752               	.LBE2213:
 6753               	.LBE2216:
 6754               	.LBE2219:
 6755               	.LBE2226:
 6756               	.LBE2229:
 6757               	.LBE2237:
 6758               	.LBB2238:
 6759               	.LBB2233:
  15:uart/uart.h   ****         uart_putchar('\r', USART); 
 6760               		.loc 9 15 0
 6761 1a9e 8DE0      		ldi r24,lo8(13)
 6762 1aa0 B701      		movw r22,r14
 6763 1aa2 0E94 0000 		call uart_putchar
 6764 1aa6 00C0      		rjmp .L279
 6765               	.LVL399:
 6766               	.L292:
 6767               	.LBE2233:
 6768               	.LBE2238:
 6769               	.LBB2239:
 6770               	.LBB2230:
 6771               	.LBB2227:
 6772               	.LBB2220:
 6773               	.LBB2217:
 6774               	.LBB2214:
 6775               	.LBB2211:
 6776               	.LBB2202:
 6777               	.LBB2199:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 6778               		.loc 2 88 0
 6779 1aa8 1093 0000 		sts ep_in_data+1,r17
 6780               	.LBB2194:
 6781               	.LBB2195:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 6782               		.loc 4 62 0
 6783 1aac 7091 0000 		lds r23,ep_in_pipe_data
 6784 1ab0 E091 0000 		lds r30,ep_in_pipe_data+1
 6785               	.LBE2195:
 6786               	.LBE2194:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 6787               		.loc 2 90 0
 6788 1ab4 2091 0000 		lds r18,ep_in_data+2
 6789 1ab8 3091 0000 		lds r19,ep_in_data+2+1
 6790               	.LVL400:
 6791               	.LBB2196:
 6792               	.LBB2165:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 6793               		.loc 2 68 0
 6794 1abc 6091 0000 		lds r22,ep_in_data
 6795               	.LVL401:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 6796               		.loc 2 69 0
 6797 1ac0 862F      		mov r24,r22
 6798 1ac2 90E0      		ldi r25,lo8(0)
 6799               	.LVL402:
 6800 1ac4 41E0      		ldi r20,lo8(1)
 6801 1ac6 8A15      		cp r24,r10
 6802 1ac8 9B05      		cpc r25,r11
 6803 1aca 01F0      		breq .L293
 6804 1acc 4093 0000 		sts ep_in_data,r20
 6805               	.LBB2157:
 6806               	.LBB2158:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 6807               		.loc 5 168 0
 6808 1ad0 872F      		mov r24,r23
 6809 1ad2 9E2F      		mov r25,r30
 6810               	.LBE2158:
 6811               	.LBE2157:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 6812               		.loc 2 72 0
 6813 1ad4 6623      		tst r22
 6814 1ad6 01F4      		brne .L259
 6815               	.L294:
 6816               	.LVL403:
 6817               	.LBB2161:
 6818               	.LBB2159:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 6819               		.loc 5 168 0
 6820 1ad8 8093 0000 		sts endpoints+28,r24
 6821 1adc 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 6822               		.loc 5 169 0
 6823 1ae0 2093 0000 		sts endpoints+26,r18
 6824 1ae4 3093 0000 		sts endpoints+26+1,r19
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 6825               		.loc 5 174 0
 6826 1ae8 F301      		movw r30,r6
 6827               	/* #APP */
 6828               	 ;  174 "usb/usb.h" 1
 6829 1aea 02E2      		ldi r16, 34
 6830 1aec 0693      		.dc.w 0x9306
 6831               		
 6832               	 ;  0 "" 2
 6833               	/* #NOAPP */
 6834 1aee 00C0      		rjmp .L251
 6835               	.LVL404:
 6836               	.L259:
 6837               	.LBE2159:
 6838               	.LBE2161:
 6839               	.LBB2162:
 6840               	.LBB2163:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 6841               		.loc 5 168 0
 6842 1af0 8093 0000 		sts endpoints+20,r24
 6843 1af4 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 6844               		.loc 5 169 0
 6845 1af8 2093 0000 		sts endpoints+18,r18
 6846 1afc 3093 0000 		sts endpoints+18+1,r19
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 6847               		.loc 5 176 0
 6848 1b00 F301      		movw r30,r6
 6849               	/* #APP */
 6850               	 ;  176 "usb/usb.h" 1
 6851 1b02 04E1      		ldi r16, 20
 6852 1b04 0693      		.dc.w 0x9306
 6853               		
 6854               	 ;  0 "" 2
 6855               	/* #NOAPP */
 6856 1b06 00C0      		rjmp .L251
 6857               	.LVL405:
 6858               	.L293:
 6859               	.LBE2163:
 6860               	.LBE2162:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 6861               		.loc 2 69 0
 6862 1b08 40E0      		ldi r20,lo8(0)
 6863 1b0a 4093 0000 		sts ep_in_data,r20
 6864               	.LBB2164:
 6865               	.LBB2160:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 6866               		.loc 5 168 0
 6867 1b0e 872F      		mov r24,r23
 6868 1b10 9E2F      		mov r25,r30
 6869               	.LBE2160:
 6870               	.LBE2164:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 6871               		.loc 2 72 0
 6872 1b12 6623      		tst r22
 6873 1b14 01F4      		brne .L259
 6874 1b16 00C0      		rjmp .L294
 6875               	.LVL406:
 6876               	.L291:
 6877               	.LBE2165:
 6878               	.LBE2196:
 6879               	.LBE2199:
 6880               	.LBE2202:
 6881               	.LBE2211:
 6882               	.LBE2214:
 6883               	.LBE2217:
 6884               	.LBE2220:
 6885               	.LBE2227:
 6886               	.LBE2230:
 6887               	.LBE2239:
 6888               	.LBB2240:
 6889               	.LBB2241:
 6890               	.LBB2242:
 6891               	.LBB2243:
 110:usb/usb_pipe.h **** 	p->data->flush = 1;
 6892               		.loc 2 110 0
 6893 1b18 8093 0000 		sts ep_in_data+1,r24
 6894               	.LVL407:
 6895               	.LBB2244:
 6896               	.LBB2245:
 6897               	.LBB2246:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 6898               		.loc 2 80 0
 6899 1b1c 2FB7      		in r18,__SREG__
 6900               	.LVL408:
 6901               	.LBB2247:
 6902               	.LBB2248:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 6903               		.loc 3 50 0
 6904               	/* #APP */
 6905               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 6906 1b1e F894      		cli
 6907               	 ;  0 "" 2
 6908               	.LVL409:
 6909               	/* #NOAPP */
 6910               	.LBE2248:
 6911               	.LBE2247:
 6912               	.LBB2249:
 6913               	.LBB2250:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 6914               		.loc 5 220 0
 6915 1b20 8091 0000 		lds r24,endpoints+24
 6916 1b24 8670      		andi r24,lo8(6)
 6917               	.LBE2250:
 6918               	.LBE2249:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 6919               		.loc 2 82 0
 6920 1b26 01F0      		breq .+2
 6921 1b28 00C0      		rjmp .L295
 6922               	.LVL410:
 6923               	.L262:
 6924               	.LBB2251:
 6925               	.LBB2252:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 6926               		.loc 3 70 0
 6927 1b2a 2FBF      		out __SREG__,r18
 6928               		.loc 3 71 0
 6929               	.LBE2252:
 6930               	.LBE2251:
 6931               	.LBE2246:
 6932               	.LBE2245:
 6933               	.LBE2244:
 6934               	.LBE2243:
 6935               	.LBE2242:
  27:Framework.h   ****     USB.INTFLAGSBSET = USB_TRNIF_bm;
 6936               		.loc 1 27 0
 6937 1b2c 82E0      		ldi r24,lo8(2)
 6938 1b2e E0EC      		ldi r30,lo8(1216)
 6939 1b30 F4E0      		ldi r31,hi8(1216)
 6940 1b32 8587      		std Z+13,r24
 6941               	.LBB2284:
 6942               	.LBB2285:
 6943               	.LBB2286:
 6944               	.LBB2287:
 6945               	.LBB2288:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 6946               		.loc 4 57 0
 6947 1b34 36E0      		ldi r19,lo8(6)
 6948               	.LVL411:
 6949               	.L271:
 6950               	.LBE2288:
 6951               	.LBE2287:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 6952               		.loc 2 123 0
 6953 1b36 9FB7      		in r25,__SREG__
 6954               	.LVL412:
 6955               	.LBB2290:
 6956               	.LBB2291:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 6957               		.loc 3 50 0
 6958               	/* #APP */
 6959               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 6960 1b38 F894      		cli
 6961               	 ;  0 "" 2
 6962               	.LVL413:
 6963               	/* #NOAPP */
 6964               	.LBE2291:
 6965               	.LBE2290:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 6966               		.loc 2 124 0
 6967 1b3a 8091 0000 		lds r24,ep_in_data+1
 6968 1b3e 8823      		tst r24
 6969 1b40 01F0      		breq .L296
 6970               	.L276:
 125:usb/usb_pipe.h **** 			r = false;
 6971               		.loc 2 125 0
 6972 1b42 80E0      		ldi r24,lo8(0)
 6973               	.L272:
 6974               	.LBB2292:
 6975               	.LBB2293:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 6976               		.loc 3 70 0
 6977 1b44 9FBF      		out __SREG__,r25
 6978               		.loc 3 71 0
 6979               	.LBE2293:
 6980               	.LBE2292:
 6981               	.LBE2286:
 6982               	.LBE2285:
 6983               	.LBE2284:
  28:Framework.h   ****     while (!usb_pipe_can_write(&ep_in)){
 6984               		.loc 1 28 0
 6985 1b46 8823      		tst r24
 6986 1b48 01F0      		breq .+2
 6987 1b4a 00C0      		rjmp .L241
  29:Framework.h   ****         if (timeout_or_sampling_no_longer_enabled){
 6988               		.loc 1 29 0
 6989 1b4c 8091 0000 		lds r24,timeout_or_sampling_no_longer_enabled
 6990 1b50 8823      		tst r24
 6991 1b52 01F0      		breq .L271
 6992               	.LVL414:
 6993               	.LBB2297:
 6994               	.LBB2298:
 6995               	.LBB2299:
  54:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 6996               		.loc 2 54 0
 6997 1b54 2FB7      		in r18,__SREG__
 6998               	.LVL415:
 6999               	.LBB2300:
 7000               	.LBB2301:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 7001               		.loc 3 50 0
 7002               	/* #APP */
 7003               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 7004 1b56 F894      		cli
 7005               	 ;  0 "" 2
 7006               	.LVL416:
 7007               	/* #NOAPP */
 7008               	.LBE2301:
 7009               	.LBE2300:
 7010               	.LBB2302:
 7011               	.LBB2303:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 7012               		.loc 4 90 0
 7013 1b58 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 7014               		.loc 4 91 0
 7015 1b5c 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 7016 1b5e 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 7017 1b60 8093 0000 		sts ep_in_pipe_data+2,r24
 7018 1b64 9093 0000 		sts ep_in_pipe_data+2+1,r25
 7019 1b68 8093 0000 		sts ep_in_pipe_data,r24
 7020 1b6c 9093 0000 		sts ep_in_pipe_data+1,r25
 7021               	.LVL417:
 7022               	.LBE2303:
 7023               	.LBE2302:
 7024               	.LBB2304:
 7025               	.LBB2305:
 158:usb/usb.h     **** 		LASR16(&e->STATUS, USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 7026               		.loc 5 158 0
 7027 1b70 E0E0      		ldi r30,lo8(endpoints+24)
 7028 1b72 F0E0      		ldi r31,hi8(endpoints+24)
 7029               	/* #APP */
 7030               	 ;  158 "usb/usb.h" 1
 7031 1b74 06E0      		ldi r16, 6
 7032 1b76 0593      		.dc.w 0x9305
 7033               		
 7034               	 ;  0 "" 2
 159:usb/usb.h     **** 		LACR16(&e->STATUS, USB_EP_BANK_bm);
 7035               		.loc 5 159 0
 7036               	 ;  159 "usb/usb.h" 1
 7037 1b78 08E0      		ldi r16, 8
 7038 1b7a 0693      		.dc.w 0x9306
 7039               		
 7040               	 ;  0 "" 2
 7041               	/* #NOAPP */
 7042               	.LBE2305:
 7043               	.LBE2304:
  57:usb/usb_pipe.h **** 		p->data->flush = 0;
 7044               		.loc 2 57 0
 7045 1b7c 1092 0000 		sts ep_in_data+1,__zero_reg__
  58:usb/usb_pipe.h **** 		p->data->packet_offset = 0;
 7046               		.loc 2 58 0
 7047 1b80 1092 0000 		sts ep_in_data+2,__zero_reg__
 7048 1b84 1092 0000 		sts ep_in_data+2+1,__zero_reg__
  59:usb/usb_pipe.h **** 		p->data->bank = 0;
 7049               		.loc 2 59 0
 7050 1b88 1092 0000 		sts ep_in_data,__zero_reg__
 7051               	.LVL418:
 7052               	.LBB2306:
 7053               	.LBB2307:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 7054               		.loc 3 70 0
 7055 1b8c 2FBF      		out __SREG__,r18
 7056               		.loc 3 71 0
 7057 1b8e 00C0      		rjmp .L241
 7058               	.LVL419:
 7059               	.L296:
 7060               	.LBE2307:
 7061               	.LBE2306:
 7062               	.LBE2299:
 7063               	.LBE2298:
 7064               	.LBE2297:
 7065               	.LBB2308:
 7066               	.LBB2296:
 7067               	.LBB2295:
 7068               	.LBB2294:
 7069               	.LBB2289:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 7070               		.loc 4 57 0
 7071 1b90 8091 0000 		lds r24,ep_in_pipe_data+4
 7072 1b94 232F      		mov r18,r19
 7073 1b96 281B      		sub r18,r24
 7074               	.LBE2289:
 7075               	.LBE2294:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 7076               		.loc 2 127 0
 7077 1b98 81E0      		ldi r24,lo8(1)
 7078 1b9a 1216      		cp __zero_reg__,r18
 7079 1b9c 04F0      		brlt .L272
 7080 1b9e 00C0      		rjmp .L276
 7081               	.LVL420:
 7082               	.L295:
 7083               	.LBE2295:
 7084               	.LBE2296:
 7085               	.LBE2308:
 7086               	.LBB2309:
 7087               	.LBB2283:
 7088               	.LBB2282:
 7089               	.LBB2281:
 7090               	.LBB2280:
 7091               	.LBB2253:
 7092               	.LBB2254:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 7093               		.loc 4 51 0
 7094 1ba0 3091 0000 		lds r19,ep_in_pipe_data+4
 7095               	.LBE2254:
 7096               	.LBE2253:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 7097               		.loc 2 83 0
 7098 1ba4 1316      		cp __zero_reg__,r19
 7099 1ba6 04F0      		brlt .+2
 7100 1ba8 00C0      		rjmp .L263
 7101               	.LBB2255:
 7102               	.LBB2256:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 7103               		.loc 4 62 0
 7104 1baa 8091 0000 		lds r24,ep_in_pipe_data
 7105 1bae 9091 0000 		lds r25,ep_in_pipe_data+1
 7106               	.LVL421:
 7107               	.LBE2256:
 7108               	.LBE2255:
 7109               	.LBB2257:
 7110               	.LBB2258:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 7111               		.loc 2 68 0
 7112 1bb2 4091 0000 		lds r20,ep_in_data
 7113               	.LVL422:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 7114               		.loc 2 69 0
 7115 1bb6 51E0      		ldi r21,lo8(1)
 7116 1bb8 4130      		cpi r20,lo8(1)
 7117 1bba 01F4      		brne .L264
 7118 1bbc 50E0      		ldi r21,lo8(0)
 7119               	.L264:
 7120 1bbe 5093 0000 		sts ep_in_data,r21
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 7121               		.loc 2 72 0
 7122 1bc2 4423      		tst r20
 7123 1bc4 01F4      		brne .L265
 7124               	.LVL423:
 7125               	.LBB2259:
 7126               	.LBB2260:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 7127               		.loc 5 168 0
 7128 1bc6 8093 0000 		sts endpoints+28,r24
 7129 1bca 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 7130               		.loc 5 169 0
 7131 1bce 40E4      		ldi r20,lo8(64)
 7132 1bd0 50E0      		ldi r21,hi8(64)
 7133 1bd2 4093 0000 		sts endpoints+26,r20
 7134 1bd6 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 7135               		.loc 5 174 0
 7136 1bda E0E0      		ldi r30,lo8(endpoints+24)
 7137 1bdc F0E0      		ldi r31,hi8(endpoints+24)
 7138               	/* #APP */
 7139               	 ;  174 "usb/usb.h" 1
 7140 1bde 02E2      		ldi r16, 34
 7141 1be0 0693      		.dc.w 0x9306
 7142               		
 7143               	 ;  0 "" 2
 7144               	.LVL424:
 7145               	/* #NOAPP */
 7146               	.L266:
 7147               	.LBE2260:
 7148               	.LBE2259:
 7149               	.LBE2258:
 7150               	.LBE2257:
 7151               	.LBB2264:
 7152               	.LBB2265:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 7153               		.loc 4 72 0
 7154 1be2 3150      		subi r19,lo8(-(-1))
 7155 1be4 3093 0000 		sts ep_in_pipe_data+4,r19
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 7156               		.loc 4 73 0
 7157 1be8 805C      		subi r24,lo8(-(64))
 7158 1bea 9F4F      		sbci r25,hi8(-(64))
 7159 1bec 8093 0000 		sts ep_in_pipe_data,r24
 7160 1bf0 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 7161               		.loc 4 75 0
 7162 1bf4 B0E0      		ldi r27,hi8(ep_in_pipe_buffer+512)
 7163 1bf6 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 7164 1bf8 9B07      		cpc r25,r27
 7165 1bfa 01F0      		breq .+2
 7166 1bfc 00C0      		rjmp .L262
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 7167               		.loc 4 76 0
 7168 1bfe 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 7169 1c00 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 7170 1c02 8093 0000 		sts ep_in_pipe_data,r24
 7171 1c06 9093 0000 		sts ep_in_pipe_data+1,r25
 7172 1c0a 00C0      		rjmp .L262
 7173               	.LVL425:
 7174               	.L265:
 7175               	.LBE2265:
 7176               	.LBE2264:
 7177               	.LBB2266:
 7178               	.LBB2263:
 7179               	.LBB2261:
 7180               	.LBB2262:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 7181               		.loc 5 168 0
 7182 1c0c 8093 0000 		sts endpoints+20,r24
 7183 1c10 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 7184               		.loc 5 169 0
 7185 1c14 40E4      		ldi r20,lo8(64)
 7186 1c16 50E0      		ldi r21,hi8(64)
 7187 1c18 4093 0000 		sts endpoints+18,r20
 7188 1c1c 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 7189               		.loc 5 176 0
 7190 1c20 E0E0      		ldi r30,lo8(endpoints+24)
 7191 1c22 F0E0      		ldi r31,hi8(endpoints+24)
 7192               	/* #APP */
 7193               	 ;  176 "usb/usb.h" 1
 7194 1c24 04E1      		ldi r16, 20
 7195 1c26 0693      		.dc.w 0x9306
 7196               		
 7197               	 ;  0 "" 2
 7198               	/* #NOAPP */
 7199 1c28 00C0      		rjmp .L266
 7200               	.LVL426:
 7201               	.L263:
 7202               	.LBE2262:
 7203               	.LBE2261:
 7204               	.LBE2263:
 7205               	.LBE2266:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 7206               		.loc 2 87 0
 7207 1c2a 8091 0000 		lds r24,ep_in_data+1
 7208 1c2e 8130      		cpi r24,lo8(1)
 7209 1c30 01F0      		breq .L297
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 7210               		.loc 2 91 0
 7211 1c32 8230      		cpi r24,lo8(2)
 7212 1c34 01F0      		breq .+2
 7213 1c36 00C0      		rjmp .L262
 7214               	.LVL427:
 7215               	.LBB2267:
 7216               	.LBB2268:
 7217               	.LBB2269:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 7218               		.loc 5 228 0
 7219 1c38 8091 0000 		lds r24,endpoints+24
 7220 1c3c 8670      		andi r24,lo8(6)
 7221               	.LBE2269:
 7222               	.LBE2268:
 7223               	.LBE2267:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 7224               		.loc 2 91 0
 7225 1c3e 8630      		cpi r24,lo8(6)
 7226 1c40 01F0      		breq .+2
 7227 1c42 00C0      		rjmp .L262
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 7228               		.loc 2 92 0
 7229 1c44 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 7230               		.loc 2 93 0
 7231 1c48 1092 0000 		sts ep_in_data+2,__zero_reg__
 7232 1c4c 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 7233               	.LBB2270:
 7234               	.LBB2271:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 7235               		.loc 4 90 0
 7236 1c50 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 7237               		.loc 4 91 0
 7238 1c54 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 7239 1c56 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 7240 1c58 8093 0000 		sts ep_in_pipe_data+2,r24
 7241 1c5c 9093 0000 		sts ep_in_pipe_data+2+1,r25
 7242 1c60 8093 0000 		sts ep_in_pipe_data,r24
 7243 1c64 9093 0000 		sts ep_in_pipe_data+1,r25
 7244               	.LVL428:
 7245 1c68 00C0      		rjmp .L262
 7246               	.LVL429:
 7247               	.L297:
 7248               	.LBE2271:
 7249               	.LBE2270:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 7250               		.loc 2 88 0
 7251 1c6a 82E0      		ldi r24,lo8(2)
 7252 1c6c 8093 0000 		sts ep_in_data+1,r24
 7253               	.LBB2272:
 7254               	.LBB2273:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 7255               		.loc 4 62 0
 7256 1c70 6091 0000 		lds r22,ep_in_pipe_data
 7257 1c74 3091 0000 		lds r19,ep_in_pipe_data+1
 7258               	.LBE2273:
 7259               	.LBE2272:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 7260               		.loc 2 90 0
 7261 1c78 4091 0000 		lds r20,ep_in_data+2
 7262 1c7c 5091 0000 		lds r21,ep_in_data+2+1
 7263               	.LVL430:
 7264               	.LBB2274:
 7265               	.LBB2275:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 7266               		.loc 2 68 0
 7267 1c80 8091 0000 		lds r24,ep_in_data
 7268               	.LVL431:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 7269               		.loc 2 69 0
 7270 1c84 91E0      		ldi r25,lo8(1)
 7271 1c86 8130      		cpi r24,lo8(1)
 7272 1c88 01F4      		brne .L269
 7273 1c8a 90E0      		ldi r25,lo8(0)
 7274               	.L269:
 7275 1c8c 9093 0000 		sts ep_in_data,r25
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 7276               		.loc 2 72 0
 7277 1c90 8823      		tst r24
 7278 1c92 01F4      		brne .L270
 7279               	.LVL432:
 7280               	.LBB2276:
 7281               	.LBB2277:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 7282               		.loc 5 168 0
 7283 1c94 862F      		mov r24,r22
 7284 1c96 932F      		mov r25,r19
 7285 1c98 8093 0000 		sts endpoints+28,r24
 7286 1c9c 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 7287               		.loc 5 169 0
 7288 1ca0 4093 0000 		sts endpoints+26,r20
 7289 1ca4 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 7290               		.loc 5 174 0
 7291 1ca8 E0E0      		ldi r30,lo8(endpoints+24)
 7292 1caa F0E0      		ldi r31,hi8(endpoints+24)
 7293               	/* #APP */
 7294               	 ;  174 "usb/usb.h" 1
 7295 1cac 02E2      		ldi r16, 34
 7296 1cae 0693      		.dc.w 0x9306
 7297               		
 7298               	 ;  0 "" 2
 7299               	/* #NOAPP */
 7300 1cb0 00C0      		rjmp .L262
 7301               	.LVL433:
 7302               	.L270:
 7303               	.LBE2277:
 7304               	.LBE2276:
 7305               	.LBB2278:
 7306               	.LBB2279:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 7307               		.loc 5 168 0
 7308 1cb2 862F      		mov r24,r22
 7309 1cb4 932F      		mov r25,r19
 7310 1cb6 8093 0000 		sts endpoints+20,r24
 7311 1cba 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 7312               		.loc 5 169 0
 7313 1cbe 4093 0000 		sts endpoints+18,r20
 7314 1cc2 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 7315               		.loc 5 176 0
 7316 1cc6 E0E0      		ldi r30,lo8(endpoints+24)
 7317 1cc8 F0E0      		ldi r31,hi8(endpoints+24)
 7318               	/* #APP */
 7319               	 ;  176 "usb/usb.h" 1
 7320 1cca 04E1      		ldi r16, 20
 7321 1ccc 0693      		.dc.w 0x9306
 7322               		
 7323               	 ;  0 "" 2
 7324               	/* #NOAPP */
 7325 1cce 00C0      		rjmp .L262
 7326               	.LBE2279:
 7327               	.LBE2278:
 7328               	.LBE2275:
 7329               	.LBE2274:
 7330               	.LBE2280:
 7331               	.LBE2281:
 7332               	.LBE2282:
 7333               	.LBE2283:
 7334               	.LBE2309:
 7335               	.LBE2241:
 7336               	.LBE2240:
 7337               		.cfi_endproc
 7338               	.LFE68:
 7340               		.data
 7341               	.LC4:
 7342 0045 4265 6769 		.string	"Begin"
 7342      6E00 
 7343               	.LC5:
 7344 004b 4465 6C61 		.string	"Delay complete"
 7344      7920 636F 
 7344      6D70 6C65 
 7344      7465 00
 7345               	.LC6:
 7346 005a 5761 6B65 		.string	"Wake up gps"
 7346      2075 7020 
 7346      6770 7300 
 7347               		.text
 7348               	.global	turn_on_gps
 7350               	turn_on_gps:
 7351               	.LFB69:
 7352               		.file 10 "gps/gps.h"
   1:gps/gps.h     **** void gps_init (void);
   2:gps/gps.h     **** void turn_on_gps(void);
   3:gps/gps.h     **** void wake_up_gps(void);
   4:gps/gps.h     **** 
   5:gps/gps.h     **** #define ON_OFF 5
   6:gps/gps.h     **** #define RESET 4
   7:gps/gps.h     **** 
   8:gps/gps.h     **** void turn_on_gps(void) {
 7353               		.loc 10 8 0
 7354               		.cfi_startproc
 7355 1cd0 CF93      		push r28
 7356               	.LCFI106:
 7357               		.cfi_def_cfa_offset 3
 7358               		.cfi_offset 28, -2
 7359 1cd2 DF93      		push r29
 7360               	.LCFI107:
 7361               		.cfi_def_cfa_offset 4
 7362               		.cfi_offset 29, -3
 7363               	/* prologue: function */
 7364               	/* frame size = 0 */
 7365               	/* stack size = 2 */
 7366               	.L__stack_usage = 2
 7367               	.LVL434:
 7368               	.LBB2316:
 7369               	.LBB2317:
 7370               		.file 11 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h"
   1:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    Copyright (c) 2004,2005,2007 Joerg Wunsch
   3:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    Copyright (c) 2007  Florin-Viorel Petrov
   4:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    All rights reserved.
   5:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
   6:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    Redistribution and use in source and binary forms, with or without
   7:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    modification, are permitted provided that the following conditions are met:
   8:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
   9:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    * Redistributions of source code must retain the above copyright
  10:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer.
  11:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  12:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    * Redistributions in binary form must reproduce the above copyright
  13:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer in
  14:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****      the documentation and/or other materials provided with the
  15:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****      distribution.
  16:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  17:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    * Neither the name of the copyright holders nor the names of
  18:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****      contributors may be used to endorse or promote products derived
  19:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****      from this software without specific prior written permission.
  20:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  21:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  22:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  23:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  24:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  25:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  26:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  27:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  30:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  31:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   POSSIBILITY OF SUCH DAMAGE. */
  32:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  33:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** /* $Id: delay.h.in 2251 2011-09-14 08:20:33Z joerg_wunsch $ */
  34:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  35:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #ifndef _UTIL_DELAY_H_
  36:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #define _UTIL_DELAY_H_ 1
  37:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  38:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #ifndef __HAS_DELAY_CYCLES
  39:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #define __HAS_DELAY_CYCLES 1
  40:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #endif
  41:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  42:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #include <inttypes.h>
  43:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #include <util/delay_basic.h>
  44:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #include <math.h>
  45:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  46:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** /** \file */
  47:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** /** \defgroup util_delay <util/delay.h>: Convenience functions for busy-wait delay loops
  48:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     \code
  49:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     #define F_CPU 1000000UL  // 1 MHz
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     //#define F_CPU 14.7456E6
  51:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     #include <util/delay.h>
  52:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     \endcode
  53:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  54:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     \note As an alternative method, it is possible to pass the
  55:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     F_CPU macro down to the compiler from the Makefile.
  56:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     Obviously, in that case, no \c \#define statement should be
  57:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     used.
  58:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  59:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     The functions in this header file are wrappers around the basic
  60:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     busy-wait functions from <util/delay_basic.h>.  They are meant as
  61:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     convenience functions where actual time values can be specified
  62:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     rather than a number of cycles to wait for.  The idea behind is
  63:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     that compile-time constant expressions will be eliminated by
  64:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     compiler optimization so floating-point expressions can be used
  65:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     to calculate the number of delay cycles needed based on the CPU
  66:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     frequency passed by the macro F_CPU.
  67:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  68:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     \note In order for these functions to work as intended, compiler
  69:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     optimizations <em>must</em> be enabled, and the delay time
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     <em>must</em> be an expression that is a known constant at
  71:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     compile-time.  If these requirements are not met, the resulting
  72:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     delay will be much longer (and basically unpredictable), and
  73:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     applications that otherwise do not use floating-point calculations
  74:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     will experience severe code bloat by the floating-point library
  75:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     routines linked into the application.
  76:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  77:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     The functions available allow the specification of microsecond, and
  78:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     millisecond delays directly, using the application-supplied macro
  79:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     F_CPU as the CPU clock frequency (in Hertz).
  80:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  81:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** */
  82:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  83:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #if !defined(__DOXYGEN__)
  84:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** static inline void _delay_us(double __us) __attribute__((always_inline));
  85:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** static inline void _delay_ms(double __ms) __attribute__((always_inline));
  86:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #endif
  87:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  88:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #ifndef F_CPU
  89:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** /* prevent compiler error by supplying a default */
  90:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** # warning "F_CPU not defined for <util/delay.h>"
  91:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** # define F_CPU 1000000UL
  92:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #endif
  93:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  94:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #ifndef __OPTIMIZE__
  95:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** # warning "Compiler optimizations disabled; functions from <util/delay.h> won't work as designed"
  96:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #endif
  97:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
  98:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
  99:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 100:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   __STDC_HOSTED__
 101:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #  include <math.h>
 102:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #endif
 103:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 104:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** /**
 105:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    \ingroup util_delay
 106:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 107:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    Perform a delay of \c __ms milliseconds, using _delay_loop_2().
 108:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 109:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 110:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 111:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 112:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    The maximal possible delay is 262.14 ms / F_CPU in MHz.
 113:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 114:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    When the user request delay which exceed the maximum possible one,
 115:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    _delay_ms() provides a decreased resolution functionality. In this
 116:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    mode _delay_ms() will work with a resolution of 1/10 ms, providing
 117:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    delays up to 6.5535 seconds (independent from CPU frequency).  The
 118:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    user will not be informed about decreased resolution.
 119:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 120:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles(unsigned long)
 121:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 ms/ F_CPU in MHz. For
 122:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    values greater than the maximal possible delay, overflows results in
 123:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    no delay i.e., 0ms.
 124:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 125:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    Conversion of __us into clock cycles may not always result in integer.
 126:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    By default, the clock cycles rounded up to next integer. This ensures that
 127:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    the user gets atleast __us microseconds of delay.
 128:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 129:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    Alternatively, user can define __DELAY_ROUND_DOWN__ and __DELAY_ROUND_CLOSEST__
 130:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    to round down and round to closest integer.
 131:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 132:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    Note: The new implementation of _delay_ms(double __ms) with 
 133:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****     __builtin_avr_delay_cycles(unsigned long) support is not backward compatible. 
 134:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    User can define __DELAY_BACKWARD_COMPATIBLE__ to get a backward compatible delay.
 135:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    Also, the backward compatible
 136:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    algorithm will be chosen if the code is compiled in a <em>freestanding
 137:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    environment</em> (GCC option \c -ffreestanding), as the math functions
 138:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****    required for rounding are not available to the compiler then.
 139:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 140:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****  */
 141:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** void
 142:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** _delay_ms(double __ms)
 143:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** {
 144:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	uint16_t __ticks;
 145:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	double __tmp ; 
 146:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 147:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 148:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h ****   __STDC_HOSTED__
 149:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 150:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 151:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e3) * __ms;
 152:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 153:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 154:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 155:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 156:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 157:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 158:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 159:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	#else
 160:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 		//round up by default
 161:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 162:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	#endif
 163:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 
 164:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 7371               		.loc 11 164 0
 7372 1cd4 8FEF      		 ldi r24,lo8(6399999)
 7373 1cd6 97EA      	    ldi r25,hi8(6399999)
 7374 1cd8 A1E6      	    ldi r26,hlo8(6399999)
 7375 1cda 8150      	    1:subi r24,1
 7376 1cdc 9040      	    sbci r25,0
 7377 1cde A040      	    sbci r26,0
 7378 1ce0 01F4      	    brne 1b
 7379 1ce2 00C0      		rjmp .
 7380 1ce4 0000      		nop
 7381               	.LBE2317:
 7382               	.LBE2316:
   9:gps/gps.h     ****   // wait one second after powering on, as recommended by a2235-h data sheet
  10:gps/gps.h     ****   _delay_ms(1000);
  11:gps/gps.h     **** 
  12:gps/gps.h     ****   send_string("Begin");
 7383               		.loc 10 12 0
 7384 1ce6 80E0      		ldi r24,lo8(.LC4)
 7385 1ce8 90E0      		ldi r25,hi8(.LC4)
 7386 1cea 0E94 0000 		call send_string
  13:gps/gps.h     ****   // pinMode(AXE, OUTPUT);
  14:gps/gps.h     ****   // pinMode(LIFESUPPORT , OUTPUT);
  15:gps/gps.h     **** 
  16:gps/gps.h     ****   // digitalWrite(AXE , 0);
  17:gps/gps.h     ****   // digitalWrite(LIFESUPPORT , 1);
  18:gps/gps.h     **** 
  19:gps/gps.h     ****   // Set PD5 direction to output
  20:gps/gps.h     ****   PORTD.DIRSET |= PIN5_bm;
 7387               		.loc 10 20 0
 7388 1cee C0E6      		ldi r28,lo8(1632)
 7389 1cf0 D6E0      		ldi r29,hi8(1632)
 7390 1cf2 8981      		ldd r24,Y+1
 7391 1cf4 8062      		ori r24,lo8(32)
 7392 1cf6 8983      		std Y+1,r24
  21:gps/gps.h     **** 
  22:gps/gps.h     ****   // PIN 5 -- ON_OFF
  23:gps/gps.h     ****   // Set PD5 to low
  24:gps/gps.h     ****   PORTD.OUTSET &= (~PIN5_bm);
 7393               		.loc 10 24 0
 7394 1cf8 8D81      		ldd r24,Y+5
 7395 1cfa 8F7D      		andi r24,lo8(-33)
 7396 1cfc 8D83      		std Y+5,r24
  25:gps/gps.h     **** 
  26:gps/gps.h     ****   // PIN 4 -- NRST
  27:gps/gps.h     ****   // Set PD5 direction to output
  28:gps/gps.h     ****   PORTD.DIRSET |= PIN4_bm;
 7397               		.loc 10 28 0
 7398 1cfe 8981      		ldd r24,Y+1
 7399 1d00 8061      		ori r24,lo8(16)
 7400 1d02 8983      		std Y+1,r24
  29:gps/gps.h     **** 
  30:gps/gps.h     ****   // Set PD4 to high
  31:gps/gps.h     ****   PORTD.OUTSET |= PIN5_bm;
 7401               		.loc 10 31 0
 7402 1d04 8D81      		ldd r24,Y+5
 7403 1d06 8062      		ori r24,lo8(32)
 7404 1d08 8D83      		std Y+5,r24
 7405               	.LVL435:
 7406               	.LBB2318:
 7407               	.LBB2319:
 7408               		.loc 11 164 0
 7409 1d0a 8FEF      		 ldi r24,lo8(15999999)
 7410 1d0c 93E2      	    ldi r25,hi8(15999999)
 7411 1d0e A4EF      	    ldi r26,hlo8(15999999)
 7412 1d10 B0E0      	    ldi r27,hhi8(15999999)
 7413 1d12 8150      	    1:subi r24,1
 7414 1d14 9040      	    sbci r25,0
 7415 1d16 A040      	    sbci r26,0
 7416 1d18 B040      	    sbci r27,0
 7417 1d1a 01F4      	    brne 1b
 7418 1d1c 00C0      		rjmp .
 7419 1d1e 0000      		nop
 7420               	.LBE2319:
 7421               	.LBE2318:
  32:gps/gps.h     **** 
  33:gps/gps.h     ****   _delay_ms(3000);
  34:gps/gps.h     **** 
  35:gps/gps.h     ****   send_string("Delay complete");
 7422               		.loc 10 35 0
 7423 1d20 80E0      		ldi r24,lo8(.LC5)
 7424 1d22 90E0      		ldi r25,hi8(.LC5)
 7425 1d24 0E94 0000 		call send_string
  36:gps/gps.h     **** 
  37:gps/gps.h     ****   // LOW/HIGH transmission of PD5 to wakeup gps module 
  38:gps/gps.h     ****   PORTD.OUTTGL = PIN5_bm;
 7426               		.loc 10 38 0
 7427 1d28 80E2      		ldi r24,lo8(32)
 7428 1d2a 8F83      		std Y+7,r24
 7429               	.LVL436:
 7430               	.LBB2320:
 7431               	.LBB2321:
 7432               		.loc 11 164 0
 7433 1d2c 8FEF      		 ldi r24,lo8(6399999)
 7434 1d2e 97EA      	    ldi r25,hi8(6399999)
 7435 1d30 A1E6      	    ldi r26,hlo8(6399999)
 7436 1d32 8150      	    1:subi r24,1
 7437 1d34 9040      	    sbci r25,0
 7438 1d36 A040      	    sbci r26,0
 7439 1d38 01F4      	    brne 1b
 7440 1d3a 00C0      		rjmp .
 7441 1d3c 0000      		nop
 7442               	.LBE2321:
 7443               	.LBE2320:
  39:gps/gps.h     ****   _delay_ms(1000);
  40:gps/gps.h     **** 
  41:gps/gps.h     ****   send_string("Wake up gps");
 7444               		.loc 10 41 0
 7445 1d3e 80E0      		ldi r24,lo8(.LC6)
 7446 1d40 90E0      		ldi r25,hi8(.LC6)
 7447 1d42 0E94 0000 		call send_string
  42:gps/gps.h     **** 
  43:gps/gps.h     ****   // Set the TxD pin as an output - set PORTD OUT register bit 3 to 1 
  44:gps/gps.h     ****   PORTD.DIRSET |= PIN3_bm; 
 7448               		.loc 10 44 0
 7449 1d46 8981      		ldd r24,Y+1
 7450 1d48 8860      		ori r24,lo8(8)
 7451 1d4a 8983      		std Y+1,r24
  45:gps/gps.h     **** 
  46:gps/gps.h     ****   // Set the TxD pin high - set PORTD DIR register bit 3 to 1 
  47:gps/gps.h     ****   PORTD.OUTSET |= PIN3_bm; 
 7452               		.loc 10 47 0
 7453 1d4c 8D81      		ldd r24,Y+5
 7454 1d4e 8860      		ori r24,lo8(8)
 7455 1d50 8D83      		std Y+5,r24
 7456               	/* epilogue start */
  48:gps/gps.h     **** 
  49:gps/gps.h     **** }
 7457               		.loc 10 49 0
 7458 1d52 DF91      		pop r29
 7459 1d54 CF91      		pop r28
 7460 1d56 0895      		ret
 7461               		.cfi_endproc
 7462               	.LFE69:
 7464               	.global	power_off_gps
 7466               	power_off_gps:
 7467               	.LFB70:
  50:gps/gps.h     **** 
  51:gps/gps.h     **** void power_off_gps()
  52:gps/gps.h     **** {
 7468               		.loc 10 52 0
 7469               		.cfi_startproc
 7470               	/* prologue: function */
 7471               	/* frame size = 0 */
 7472               	/* stack size = 0 */
 7473               	.L__stack_usage = 0
  53:gps/gps.h     ****   // Set PD5 direction to output
  54:gps/gps.h     ****   PORTD.DIRSET |= PIN5_bm;
 7474               		.loc 10 54 0
 7475 1d58 E0E6      		ldi r30,lo8(1632)
 7476 1d5a F6E0      		ldi r31,hi8(1632)
 7477 1d5c 8181      		ldd r24,Z+1
 7478 1d5e 8062      		ori r24,lo8(32)
 7479 1d60 8183      		std Z+1,r24
  55:gps/gps.h     **** 
  56:gps/gps.h     ****   // LOW/HIGH transmission of PD5 to wakeup gps module 
  57:gps/gps.h     ****   PORTD.OUTTGL |= PIN5_bm;
 7480               		.loc 10 57 0
 7481 1d62 8781      		ldd r24,Z+7
 7482 1d64 8062      		ori r24,lo8(32)
 7483 1d66 8783      		std Z+7,r24
 7484               	.LVL437:
 7485               	.LBB2322:
 7486               	.LBB2323:
 7487               		.loc 11 164 0
 7488 1d68 8FEF      		 ldi r24,lo8(6399999)
 7489 1d6a 97EA      	    ldi r25,hi8(6399999)
 7490 1d6c A1E6      	    ldi r26,hlo8(6399999)
 7491 1d6e 8150      	    1:subi r24,1
 7492 1d70 9040      	    sbci r25,0
 7493 1d72 A040      	    sbci r26,0
 7494 1d74 01F4      	    brne 1b
 7495 1d76 00C0      		rjmp .
 7496 1d78 0000      		nop
 7497               	/* epilogue start */
 7498               	.LBE2323:
 7499               	.LBE2322:
  58:gps/gps.h     ****   _delay_ms(1000);
  59:gps/gps.h     **** }
 7500               		.loc 10 59 0
 7501 1d7a 0895      		ret
 7502               		.cfi_endproc
 7503               	.LFE70:
 7505               		.data
 7506               	.LC7:
 7507 0066 4368 6172 		.string	"Characters sent to change baud rate"
 7507      6163 7465 
 7507      7273 2073 
 7507      656E 7420 
 7507      746F 2063 
 7508               	.LC0:
 7509 008a A0        		.byte	-96
 7510 008b A2        		.byte	-94
 7511 008c 00        		.byte	0
 7512 008d 18        		.byte	24
 7513 008e 81        		.byte	-127
 7514 008f 02        		.byte	2
 7515 0090 01        		.byte	1
 7516 0091 01        		.byte	1
 7517 0092 00        		.byte	0
 7518 0093 01        		.byte	1
 7519 0094 01        		.byte	1
 7520 0095 01        		.byte	1
 7521 0096 05        		.byte	5
 7522 0097 01        		.byte	1
 7523 0098 01        		.byte	1
 7524 0099 01        		.byte	1
 7525 009a 00        		.byte	0
 7526 009b 01        		.byte	1
 7527 009c 00        		.byte	0
 7528 009d 01        		.byte	1
 7529 009e 00        		.byte	0
 7530 009f 01        		.byte	1
 7531 00a0 00        		.byte	0
 7532 00a1 01        		.byte	1
 7533 00a2 00        		.byte	0
 7534 00a3 01        		.byte	1
 7535 00a4 25        		.byte	37
 7536 00a5 80        		.byte	-128
 7537 00a6 01        		.byte	1
 7538 00a7 3A        		.byte	58
 7539 00a8 B0        		.byte	-80
 7540 00a9 B3        		.byte	-77
 7541               		.text
 7542               	.global	gps_init
 7544               	gps_init:
 7545               	.LFB71:
  60:gps/gps.h     **** 
  61:gps/gps.h     **** void gps_init(void) {
 7546               		.loc 10 61 0
 7547               		.cfi_startproc
 7548 1d7c 0F93      		push r16
 7549               	.LCFI108:
 7550               		.cfi_def_cfa_offset 3
 7551               		.cfi_offset 16, -2
 7552 1d7e 1F93      		push r17
 7553               	.LCFI109:
 7554               		.cfi_def_cfa_offset 4
 7555               		.cfi_offset 17, -3
 7556 1d80 CF93      		push r28
 7557               	.LCFI110:
 7558               		.cfi_def_cfa_offset 5
 7559               		.cfi_offset 28, -4
 7560 1d82 DF93      		push r29
 7561               	.LCFI111:
 7562               		.cfi_def_cfa_offset 6
 7563               		.cfi_offset 29, -5
 7564 1d84 CDB7      		in r28,__SP_L__
 7565 1d86 DEB7      		in r29,__SP_H__
 7566 1d88 A097      		sbiw r28,32
 7567               	.LCFI112:
 7568               		.cfi_def_cfa 28, 38
 7569 1d8a CDBF      		out __SP_L__,r28
 7570 1d8c DEBF      		out __SP_H__,r29
 7571               	/* prologue: function */
 7572               	/* frame size = 32 */
 7573               	/* stack size = 36 */
 7574               	.L__stack_usage = 36
 7575               	.LVL438:
 7576               	.LBB2333:
 7577               	.LBB2334:
 7578               	.LBB2335:
 7579               	.LBB2336:
 7580               		.loc 11 164 0
 7581 1d8e 8FEF      		 ldi r24,lo8(6399999)
 7582 1d90 97EA      	    ldi r25,hi8(6399999)
 7583 1d92 A1E6      	    ldi r26,hlo8(6399999)
 7584 1d94 8150      	    1:subi r24,1
 7585 1d96 9040      	    sbci r25,0
 7586 1d98 A040      	    sbci r26,0
 7587 1d9a 01F4      	    brne 1b
 7588 1d9c 00C0      		rjmp .
 7589 1d9e 0000      		nop
 7590               	.LBE2336:
 7591               	.LBE2335:
  12:gps/gps.h     ****   send_string("Begin");
 7592               		.loc 10 12 0
 7593 1da0 80E0      		ldi r24,lo8(.LC4)
 7594 1da2 90E0      		ldi r25,hi8(.LC4)
 7595 1da4 0E94 0000 		call send_string
  20:gps/gps.h     ****   PORTD.DIRSET |= PIN5_bm;
 7596               		.loc 10 20 0
 7597 1da8 00E6      		ldi r16,lo8(1632)
 7598 1daa 16E0      		ldi r17,hi8(1632)
 7599 1dac 8091 6106 		lds r24,1633
 7600 1db0 8062      		ori r24,lo8(32)
 7601 1db2 D801      		movw r26,r16
 7602 1db4 1196      		adiw r26,1
 7603 1db6 8C93      		st X,r24
 7604 1db8 1197      		sbiw r26,1
  24:gps/gps.h     ****   PORTD.OUTSET &= (~PIN5_bm);
 7605               		.loc 10 24 0
 7606 1dba 8091 6506 		lds r24,1637
 7607 1dbe 8F7D      		andi r24,lo8(-33)
 7608 1dc0 1596      		adiw r26,5
 7609 1dc2 8C93      		st X,r24
 7610 1dc4 1597      		sbiw r26,5
  28:gps/gps.h     ****   PORTD.DIRSET |= PIN4_bm;
 7611               		.loc 10 28 0
 7612 1dc6 8091 6106 		lds r24,1633
 7613 1dca 8061      		ori r24,lo8(16)
 7614 1dcc 1196      		adiw r26,1
 7615 1dce 8C93      		st X,r24
 7616 1dd0 1197      		sbiw r26,1
  31:gps/gps.h     ****   PORTD.OUTSET |= PIN5_bm;
 7617               		.loc 10 31 0
 7618 1dd2 8091 6506 		lds r24,1637
 7619 1dd6 8062      		ori r24,lo8(32)
 7620 1dd8 1596      		adiw r26,5
 7621 1dda 8C93      		st X,r24
 7622               	.LVL439:
 7623               	.LBB2337:
 7624               	.LBB2338:
 7625               		.loc 11 164 0
 7626 1ddc 8FEF      		 ldi r24,lo8(15999999)
 7627 1dde 93E2      	    ldi r25,hi8(15999999)
 7628 1de0 A4EF      	    ldi r26,hlo8(15999999)
 7629 1de2 B0E0      	    ldi r27,hhi8(15999999)
 7630 1de4 8150      	    1:subi r24,1
 7631 1de6 9040      	    sbci r25,0
 7632 1de8 A040      	    sbci r26,0
 7633 1dea B040      	    sbci r27,0
 7634 1dec 01F4      	    brne 1b
 7635 1dee 00C0      		rjmp .
 7636 1df0 0000      		nop
 7637               	.LBE2338:
 7638               	.LBE2337:
  35:gps/gps.h     ****   send_string("Delay complete");
 7639               		.loc 10 35 0
 7640 1df2 80E0      		ldi r24,lo8(.LC5)
 7641 1df4 90E0      		ldi r25,hi8(.LC5)
 7642 1df6 0E94 0000 		call send_string
  38:gps/gps.h     ****   PORTD.OUTTGL = PIN5_bm;
 7643               		.loc 10 38 0
 7644 1dfa 80E2      		ldi r24,lo8(32)
 7645 1dfc D801      		movw r26,r16
 7646 1dfe 1796      		adiw r26,7
 7647 1e00 8C93      		st X,r24
 7648               	.LVL440:
 7649               	.LBB2339:
 7650               	.LBB2340:
 7651               		.loc 11 164 0
 7652 1e02 8FEF      		 ldi r24,lo8(6399999)
 7653 1e04 97EA      	    ldi r25,hi8(6399999)
 7654 1e06 A1E6      	    ldi r26,hlo8(6399999)
 7655 1e08 8150      	    1:subi r24,1
 7656 1e0a 9040      	    sbci r25,0
 7657 1e0c A040      	    sbci r26,0
 7658 1e0e 01F4      	    brne 1b
 7659 1e10 00C0      		rjmp .
 7660 1e12 0000      		nop
 7661               	.LBE2340:
 7662               	.LBE2339:
  41:gps/gps.h     ****   send_string("Wake up gps");
 7663               		.loc 10 41 0
 7664 1e14 80E0      		ldi r24,lo8(.LC6)
 7665 1e16 90E0      		ldi r25,hi8(.LC6)
 7666 1e18 0E94 0000 		call send_string
  44:gps/gps.h     ****   PORTD.DIRSET |= PIN3_bm; 
 7667               		.loc 10 44 0
 7668 1e1c 8091 6106 		lds r24,1633
 7669 1e20 8860      		ori r24,lo8(8)
 7670 1e22 D801      		movw r26,r16
 7671 1e24 1196      		adiw r26,1
 7672 1e26 8C93      		st X,r24
 7673 1e28 1197      		sbiw r26,1
  47:gps/gps.h     ****   PORTD.OUTSET |= PIN3_bm; 
 7674               		.loc 10 47 0
 7675 1e2a 8091 6506 		lds r24,1637
 7676 1e2e 8860      		ori r24,lo8(8)
 7677 1e30 1596      		adiw r26,5
 7678 1e32 8C93      		st X,r24
 7679               	.LVL441:
 7680               	.LBE2334:
 7681               	.LBE2333:
  62:gps/gps.h     ****   /*
  63:gps/gps.h     ****   
  64:gps/gps.h     ****   Port numbers, baud rate, etc will need to be changed when switching 
  65:gps/gps.h     ****   to a different port.  This is a bit complex to abstract out to a new 
  66:gps/gps.h     ****   code layer at the moment (too many inputs required for things to work right)
  67:gps/gps.h     ****   so we'll have to keep it as is.  
  68:gps/gps.h     **** 
  69:gps/gps.h     ****   Specifically, we'll have to change PORTD, USARTDO, BSEL, BSCALE, and the Tx bitmask
  70:gps/gps.h     **** 
  71:gps/gps.h     ****   */
  72:gps/gps.h     **** 
  73:gps/gps.h     ****   turn_on_gps();
  74:gps/gps.h     **** 
  75:gps/gps.h     ****   //Baud rate of 115200
  76:gps/gps.h     ****   uint16_t BSEL = 11;
  77:gps/gps.h     ****   uint8_t BSCALE = -7;
  78:gps/gps.h     ****   USARTD0_BAUDCTRLA = BSEL & 0XFF;
 7682               		.loc 10 78 0
 7683 1e34 8BE0      		ldi r24,lo8(11)
 7684 1e36 8093 A609 		sts 2470,r24
  79:gps/gps.h     ****   USARTD0_BAUDCTRLB = (BSCALE << 4) | (BSEL & 0xF000) >> 8;
 7685               		.loc 10 79 0
 7686 1e3a 80E9      		ldi r24,lo8(-112)
 7687 1e3c 8093 A709 		sts 2471,r24
  80:gps/gps.h     **** 
  81:gps/gps.h     ****   // no interrupts
  82:gps/gps.h     ****   // can't overwrite bits 7:6
  83:gps/gps.h     ****   USARTD0.CTRLA = 0x00;
 7688               		.loc 10 83 0
 7689 1e40 E0EA      		ldi r30,lo8(2464)
 7690 1e42 F9E0      		ldi r31,hi8(2464)
 7691 1e44 1382      		std Z+3,__zero_reg__
  84:gps/gps.h     **** 
  85:gps/gps.h     ****   // Enable transmitter and receiver
  86:gps/gps.h     ****   USARTD0.CTRLB = USART_TXEN_bm | USART_RXEN_bm;  
 7692               		.loc 10 86 0
 7693 1e46 88E1      		ldi r24,lo8(24)
 7694 1e48 8483      		std Z+4,r24
  87:gps/gps.h     **** 
  88:gps/gps.h     ****   // async, no parity, 1 stop bit, 8 bit data,
  89:gps/gps.h     ****   // 00     00         00          11    
  90:gps/gps.h     ****   USARTD0.CTRLC = 0x03;  
 7695               		.loc 10 90 0
 7696 1e4a 83E0      		ldi r24,lo8(3)
 7697 1e4c 8583      		std Z+5,r24
  91:gps/gps.h     **** 
  92:gps/gps.h     ****   uint8_t characters[32] = {0xA0, 0xA2, 0x00, 0x18, 0x81, 0x02, 0x01, 0x01, 0x00, 0x01, 0x01, 0x01,
 7698               		.loc 10 92 0
 7699 1e4e DE01      		movw r26,r28
 7700 1e50 1196      		adiw r26,1
 7701 1e52 E0E0      		ldi r30,lo8(.LC0)
 7702 1e54 F0E0      		ldi r31,hi8(.LC0)
 7703 1e56 80E2      		ldi r24,lo8(32)
 7704               	.L301:
 7705 1e58 0190      		ld r0,Z+
 7706 1e5a 0D92      		st X+,r0
 7707 1e5c 8150      		subi r24,lo8(-(-1))
 7708 1e5e 01F4      		brne .L301
 7709               	.LVL442:
  93:gps/gps.h     ****   for (int c = 0; c < 32; c++) {
 7710               		.loc 10 93 0
 7711 1e60 00E0      		ldi r16,lo8(0)
 7712 1e62 10E0      		ldi r17,hi8(0)
 7713               	.LVL443:
 7714               	.L302:
 7715               	.LBB2341:
  94:gps/gps.h     ****     send_uart((char *) &characters[c], &USARTD0);
 7716               		.loc 10 94 0 discriminator 2
 7717 1e64 81E0      		ldi r24,lo8(1)
 7718 1e66 90E0      		ldi r25,hi8(1)
 7719 1e68 8C0F      		add r24,r28
 7720 1e6a 9D1F      		adc r25,r29
 7721 1e6c 800F      		add r24,r16
 7722 1e6e 911F      		adc r25,r17
 7723 1e70 60EA      		ldi r22,lo8(2464)
 7724 1e72 79E0      		ldi r23,hi8(2464)
 7725 1e74 0E94 0000 		call send_uart
  93:gps/gps.h     ****   for (int c = 0; c < 32; c++) {
 7726               		.loc 10 93 0 discriminator 2
 7727 1e78 0F5F      		subi r16,lo8(-(1))
 7728 1e7a 1F4F      		sbci r17,hi8(-(1))
 7729               	.LVL444:
 7730 1e7c 0032      		cpi r16,32
 7731 1e7e 1105      		cpc r17,__zero_reg__
 7732 1e80 01F4      		brne .L302
 7733               	.LBE2341:
  95:gps/gps.h     ****   }
  96:gps/gps.h     **** 
  97:gps/gps.h     ****   send_string("Characters sent to change baud rate");
 7734               		.loc 10 97 0
 7735 1e82 80E0      		ldi r24,lo8(.LC7)
 7736 1e84 90E0      		ldi r25,hi8(.LC7)
 7737 1e86 0E94 0000 		call send_string
 7738               	.LVL445:
  98:gps/gps.h     **** 
  99:gps/gps.h     ****   //Baud rate of 9600 for nmea string communication
 100:gps/gps.h     ****   BSEL = 12;
 101:gps/gps.h     ****   BSCALE = 0;
 102:gps/gps.h     ****   USARTD0_BAUDCTRLA = BSEL & 0XFF;
 7739               		.loc 10 102 0
 7740 1e8a 8CE0      		ldi r24,lo8(12)
 7741 1e8c 8093 A609 		sts 2470,r24
 103:gps/gps.h     ****   USARTD0_BAUDCTRLB = (BSCALE << 4) | (BSEL & 0xF000) >> 8;
 7742               		.loc 10 103 0
 7743 1e90 1092 A709 		sts 2471,__zero_reg__
 7744               	/* epilogue start */
 104:gps/gps.h     **** 
 105:gps/gps.h     **** }
 7745               		.loc 10 105 0
 7746 1e94 A096      		adiw r28,32
 7747 1e96 CDBF      		out __SP_L__,r28
 7748 1e98 DEBF      		out __SP_H__,r29
 7749 1e9a DF91      		pop r29
 7750 1e9c CF91      		pop r28
 7751 1e9e 1F91      		pop r17
 7752 1ea0 0F91      		pop r16
 7753               	.LVL446:
 7754 1ea2 0895      		ret
 7755               		.cfi_endproc
 7756               	.LFE71:
 7758               		.data
 7759               	.LC8:
 7760 00aa 5265 6365 		.string	"Receive characters"
 7760      6976 6520 
 7760      6368 6172 
 7760      6163 7465 
 7760      7273 00
 7761               		.text
 7762               	.global	gps_receive
 7764               	gps_receive:
 7765               	.LFB72:
 106:gps/gps.h     **** 
 107:gps/gps.h     **** void gps_receive() {
 7766               		.loc 10 107 0
 7767               		.cfi_startproc
 7768 1ea4 AF92      		push r10
 7769               	.LCFI113:
 7770               		.cfi_def_cfa_offset 3
 7771               		.cfi_offset 10, -2
 7772 1ea6 BF92      		push r11
 7773               	.LCFI114:
 7774               		.cfi_def_cfa_offset 4
 7775               		.cfi_offset 11, -3
 7776 1ea8 CF92      		push r12
 7777               	.LCFI115:
 7778               		.cfi_def_cfa_offset 5
 7779               		.cfi_offset 12, -4
 7780 1eaa DF92      		push r13
 7781               	.LCFI116:
 7782               		.cfi_def_cfa_offset 6
 7783               		.cfi_offset 13, -5
 7784 1eac EF92      		push r14
 7785               	.LCFI117:
 7786               		.cfi_def_cfa_offset 7
 7787               		.cfi_offset 14, -6
 7788 1eae FF92      		push r15
 7789               	.LCFI118:
 7790               		.cfi_def_cfa_offset 8
 7791               		.cfi_offset 15, -7
 7792 1eb0 0F93      		push r16
 7793               	.LCFI119:
 7794               		.cfi_def_cfa_offset 9
 7795               		.cfi_offset 16, -8
 7796 1eb2 1F93      		push r17
 7797               	.LCFI120:
 7798               		.cfi_def_cfa_offset 10
 7799               		.cfi_offset 17, -9
 7800 1eb4 CF93      		push r28
 7801               	.LCFI121:
 7802               		.cfi_def_cfa_offset 11
 7803               		.cfi_offset 28, -10
 7804 1eb6 DF93      		push r29
 7805               	.LCFI122:
 7806               		.cfi_def_cfa_offset 12
 7807               		.cfi_offset 29, -11
 7808               	/* prologue: function */
 7809               	/* frame size = 0 */
 7810               	/* stack size = 10 */
 7811               	.L__stack_usage = 10
 108:gps/gps.h     ****   // // while (digitalRead(KILLSWITCH)) {
 109:gps/gps.h     ****   //   _delay_ms(10);
 110:gps/gps.h     ****   //   // if (GPS_SERIAL.available()) {
 111:gps/gps.h     ****   //       _delay_ms(10);
 112:gps/gps.h     ****   //       // while(GPS_SERIAL.available()) {
 113:gps/gps.h     ****   //           c = uart_getchar(&USARTD0);
 114:gps/gps.h     ****   //           send_byte(c);
 115:gps/gps.h     ****   //           delay(2);
 116:gps/gps.h     ****   //       }
 117:gps/gps.h     ****   //   }
 118:gps/gps.h     ****   // }
 119:gps/gps.h     ****   send_string("Receive characters");
 7812               		.loc 10 119 0
 7813 1eb8 80E0      		ldi r24,lo8(.LC8)
 7814 1eba 90E0      		ldi r25,hi8(.LC8)
 7815 1ebc 0E94 0000 		call send_string
 7816               	.LVL447:
 7817 1ec0 35E0      		ldi r19,lo8(5)
 7818 1ec2 C32E      		mov r12,r19
 7819 1ec4 D12C      		mov r13,__zero_reg__
 7820               	.LBB2510:
 7821               	.LBB2511:
 7822               	.LBB2512:
 7823               	.LBB2513:
 7824               	.LBB2514:
 7825               	.LBB2515:
 7826               	.LBB2516:
 7827               	.LBB2517:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 7828               		.loc 4 57 0
 7829 1ec6 46E0      		ldi r20,lo8(6)
 7830               	.LBE2517:
 7831               	.LBE2516:
 7832               	.LBE2515:
 7833               	.LBE2514:
 7834               	.LBE2513:
 7835               	.LBB2528:
 7836               	.LBB2529:
 7837               	.LBB2530:
 7838               	.LBB2531:
 7839               	.LBB2532:
 7840               	.LBB2533:
 7841               	.LBB2534:
 7842               	.LBB2535:
 7843               	.LBB2536:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 7844               		.loc 5 220 0
 7845 1ec8 60E0      		ldi r22,lo8(endpoints+24)
 7846 1eca 70E0      		ldi r23,hi8(endpoints+24)
 7847               	.LBE2536:
 7848               	.LBE2535:
 7849               	.LBB2538:
 7850               	.LBB2539:
 7851               		.loc 4 91 0
 7852 1ecc 50E0      		ldi r21,lo8(ep_in_pipe_buffer)
 7853 1ece A52E      		mov r10,r21
 7854 1ed0 50E0      		ldi r21,hi8(ep_in_pipe_buffer)
 7855 1ed2 B52E      		mov r11,r21
 7856               	.LBE2539:
 7857               	.LBE2538:
 7858               	.LBB2542:
 7859               	.LBB2543:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 7860               		.loc 2 69 0
 7861 1ed4 C1E0      		ldi r28,lo8(1)
 7862 1ed6 D0E0      		ldi r29,hi8(1)
 7863               	.LBE2543:
 7864               	.LBE2542:
 7865               	.LBB2552:
 7866               	.LBB2553:
 7867               	.LBB2554:
 7868               	.LBB2555:
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 7869               		.loc 5 169 0
 7870 1ed8 E0E4      		ldi r30,lo8(64)
 7871 1eda EE2E      		mov r14,r30
 7872 1edc F12C      		mov r15,__zero_reg__
 7873               	.LVL448:
 7874               	.L342:
 7875               	.LBE2555:
 7876               	.LBE2554:
 7877               	.LBE2553:
 7878               	.LBE2552:
 7879               	.LBE2534:
 7880               	.LBE2533:
 7881               	.LBE2532:
 7882               	.LBE2531:
 7883               	.LBE2530:
 7884               	.LBE2529:
 7885               	.LBE2528:
 7886               	.LBE2512:
 7887               	.LBE2511:
 7888               	.LBB2629:
 7889               	.LBB2630:
  30:uart/uart.h   ****     while ( !( USART->STATUS & USART_RXCIF_bm) ); 
 7890               		.loc 9 30 0
 7891 1ede 8091 A109 		lds r24,2465
 7892 1ee2 87FF      		sbrs r24,7
 7893 1ee4 00C0      		rjmp .L342
  33:uart/uart.h   ****     return USART->DATA; 
 7894               		.loc 9 33 0
 7895 1ee6 2091 A009 		lds r18,2464
 7896               	.LVL449:
 7897               	.L309:
 7898               	.LBE2630:
 7899               	.LBE2629:
 7900               	.LBB2631:
 7901               	.LBB2624:
 7902               	.LBB2616:
 7903               	.LBB2526:
 7904               	.LBB2524:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 7905               		.loc 2 123 0
 7906 1eea 9FB7      		in r25,__SREG__
 7907               	.LVL450:
 7908               	.LBB2519:
 7909               	.LBB2520:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 7910               		.loc 3 50 0
 7911               	/* #APP */
 7912               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 7913 1eec F894      		cli
 7914               	 ;  0 "" 2
 7915               	.LVL451:
 7916               	/* #NOAPP */
 7917               	.LBE2520:
 7918               	.LBE2519:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 7919               		.loc 2 124 0
 7920 1eee 8091 0000 		lds r24,ep_in_data+1
 7921 1ef2 8823      		tst r24
 7922 1ef4 01F4      		brne .+2
 7923 1ef6 00C0      		rjmp .L344
 7924               	.L336:
 125:usb/usb_pipe.h **** 			r = false;
 7925               		.loc 2 125 0
 7926 1ef8 80E0      		ldi r24,lo8(0)
 7927               	.L307:
 7928               	.LBB2521:
 7929               	.LBB2522:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 7930               		.loc 3 70 0
 7931 1efa 9FBF      		out __SREG__,r25
 7932               		.loc 3 71 0
 7933               	.LBE2522:
 7934               	.LBE2521:
 7935               	.LBE2524:
 7936               	.LBE2526:
 7937               	.LBE2616:
  20:Framework.h   ****     while (!usb_pipe_can_write(&ep_in));
 7938               		.loc 1 20 0
 7939 1efc 8823      		tst r24
 7940 1efe 01F0      		breq .L309
 7941               	.LVL452:
 7942               	.LBB2617:
 7943               	.LBB2618:
 175:usb/usb_pipe.h **** 	p->pipe->data->write_ptr[p->data->packet_offset++] = v;
 7944               		.loc 2 175 0
 7945 1f00 8091 0000 		lds r24,ep_in_data+2
 7946 1f04 9091 0000 		lds r25,ep_in_data+2+1
 7947 1f08 E091 0000 		lds r30,ep_in_pipe_data+2
 7948 1f0c F091 0000 		lds r31,ep_in_pipe_data+2+1
 7949 1f10 E80F      		add r30,r24
 7950 1f12 F91F      		adc r31,r25
 7951 1f14 2083      		st Z,r18
 7952 1f16 0196      		adiw r24,1
 7953 1f18 8093 0000 		sts ep_in_data+2,r24
 7954 1f1c 9093 0000 		sts ep_in_data+2+1,r25
 176:usb/usb_pipe.h **** 	if (p->data->packet_offset == p->pipe->size){
 7955               		.loc 2 176 0
 7956 1f20 8034      		cpi r24,64
 7957 1f22 9105      		cpc r25,__zero_reg__
 7958 1f24 01F4      		brne .+2
 7959 1f26 00C0      		rjmp .L345
 7960               	.LVL453:
 7961               	.L310:
 7962               	.LBE2618:
 7963               	.LBE2617:
 7964               	.LBB2619:
 7965               	.LBB2612:
 7966               	.LBB2608:
 7967               	.LBB2604:
 7968               	.LBB2592:
 7969               	.LBB2593:
 7970               		.loc 3 71 0
 7971 1f28 0894      		sec
 7972 1f2a C108      		sbc r12,__zero_reg__
 7973 1f2c D108      		sbc r13,__zero_reg__
 7974               	.LBE2593:
 7975               	.LBE2592:
 7976               	.LBE2604:
 7977               	.LBE2608:
 7978               	.LBE2612:
 7979               	.LBE2619:
 7980               	.LBE2624:
 7981               	.LBE2631:
 120:gps/gps.h     ****   char c;
 121:gps/gps.h     ****   for (int i=0; i<5; i++) {
 7982               		.loc 10 121 0
 7983 1f2e C114      		cp r12,__zero_reg__
 7984 1f30 D104      		cpc r13,__zero_reg__
 7985 1f32 01F4      		brne .L342
 7986               	.LVL454:
 7987               	.LBE2510:
 7988               	.LBB2636:
 7989               	.LBB2637:
 7990               	.LBB2638:
 7991               	.LBB2639:
 110:usb/usb_pipe.h **** 	p->data->flush = 1;
 7992               		.loc 2 110 0
 7993 1f34 81E0      		ldi r24,lo8(1)
 7994 1f36 8093 0000 		sts ep_in_data+1,r24
 7995               	.LVL455:
 7996               	.LBB2640:
 7997               	.LBB2641:
 7998               	.LBB2642:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 7999               		.loc 2 80 0
 8000 1f3a 2FB7      		in r18,__SREG__
 8001               	.LVL456:
 8002               	.LBB2643:
 8003               	.LBB2644:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 8004               		.loc 3 50 0
 8005               	/* #APP */
 8006               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 8007 1f3c F894      		cli
 8008               	 ;  0 "" 2
 8009               	.LVL457:
 8010               	/* #NOAPP */
 8011               	.LBE2644:
 8012               	.LBE2643:
 8013               	.LBB2645:
 8014               	.LBB2646:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 8015               		.loc 5 220 0
 8016 1f3e 8091 0000 		lds r24,endpoints+24
 8017 1f42 8670      		andi r24,lo8(6)
 8018               	.LBE2646:
 8019               	.LBE2645:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 8020               		.loc 2 82 0
 8021 1f44 01F0      		breq .+2
 8022 1f46 00C0      		rjmp .L346
 8023               	.LVL458:
 8024               	.L322:
 8025               	.LBB2647:
 8026               	.LBB2648:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 8027               		.loc 3 70 0
 8028 1f48 2FBF      		out __SREG__,r18
 8029               		.loc 3 71 0
 8030               	.LBE2648:
 8031               	.LBE2647:
 8032               	.LBE2642:
 8033               	.LBE2641:
 8034               	.LBE2640:
 8035               	.LBE2639:
 8036               	.LBE2638:
  27:Framework.h   ****     USB.INTFLAGSBSET = USB_TRNIF_bm;
 8037               		.loc 1 27 0
 8038 1f4a 82E0      		ldi r24,lo8(2)
 8039 1f4c E0EC      		ldi r30,lo8(1216)
 8040 1f4e F4E0      		ldi r31,hi8(1216)
 8041 1f50 8587      		std Z+13,r24
 8042               	.LBB2688:
 8043               	.LBB2689:
 8044               	.LBB2690:
 8045               	.LBB2691:
 8046               	.LBB2692:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 8047               		.loc 4 57 0
 8048 1f52 36E0      		ldi r19,lo8(6)
 8049               	.LVL459:
 8050               	.L331:
 8051               	.LBE2692:
 8052               	.LBE2691:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 8053               		.loc 2 123 0
 8054 1f54 9FB7      		in r25,__SREG__
 8055               	.LVL460:
 8056               	.LBB2694:
 8057               	.LBB2695:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 8058               		.loc 3 50 0
 8059               	/* #APP */
 8060               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 8061 1f56 F894      		cli
 8062               	 ;  0 "" 2
 8063               	.LVL461:
 8064               	/* #NOAPP */
 8065               	.LBE2695:
 8066               	.LBE2694:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 8067               		.loc 2 124 0
 8068 1f58 8091 0000 		lds r24,ep_in_data+1
 8069 1f5c 8823      		tst r24
 8070 1f5e 01F4      		brne .+2
 8071 1f60 00C0      		rjmp .L347
 8072               	.L337:
 125:usb/usb_pipe.h **** 			r = false;
 8073               		.loc 2 125 0
 8074 1f62 80E0      		ldi r24,lo8(0)
 8075               	.L333:
 8076               	.LBB2696:
 8077               	.LBB2697:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 8078               		.loc 3 70 0
 8079 1f64 9FBF      		out __SREG__,r25
 8080               		.loc 3 71 0
 8081               	.LBE2697:
 8082               	.LBE2696:
 8083               	.LBE2690:
 8084               	.LBE2689:
 8085               	.LBE2688:
  28:Framework.h   ****     while (!usb_pipe_can_write(&ep_in)){
 8086               		.loc 1 28 0
 8087 1f66 8823      		tst r24
 8088 1f68 01F4      		brne .L305
  29:Framework.h   ****         if (timeout_or_sampling_no_longer_enabled){
 8089               		.loc 1 29 0
 8090 1f6a 8091 0000 		lds r24,timeout_or_sampling_no_longer_enabled
 8091 1f6e 8823      		tst r24
 8092 1f70 01F0      		breq .L331
 8093               	.LVL462:
 8094               	.LBB2701:
 8095               	.LBB2702:
 8096               	.LBB2703:
  54:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 8097               		.loc 2 54 0
 8098 1f72 2FB7      		in r18,__SREG__
 8099               	.LVL463:
 8100               	.LBB2704:
 8101               	.LBB2705:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 8102               		.loc 3 50 0
 8103               	/* #APP */
 8104               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 8105 1f74 F894      		cli
 8106               	 ;  0 "" 2
 8107               	.LVL464:
 8108               	/* #NOAPP */
 8109               	.LBE2705:
 8110               	.LBE2704:
 8111               	.LBB2706:
 8112               	.LBB2707:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 8113               		.loc 4 90 0
 8114 1f76 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 8115               		.loc 4 91 0
 8116 1f7a 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 8117 1f7c 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 8118 1f7e 8093 0000 		sts ep_in_pipe_data+2,r24
 8119 1f82 9093 0000 		sts ep_in_pipe_data+2+1,r25
 8120 1f86 8093 0000 		sts ep_in_pipe_data,r24
 8121 1f8a 9093 0000 		sts ep_in_pipe_data+1,r25
 8122               	.LVL465:
 8123               	.LBE2707:
 8124               	.LBE2706:
 8125               	.LBB2708:
 8126               	.LBB2709:
 158:usb/usb.h     **** 		LASR16(&e->STATUS, USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 8127               		.loc 5 158 0
 8128 1f8e E0E0      		ldi r30,lo8(endpoints+24)
 8129 1f90 F0E0      		ldi r31,hi8(endpoints+24)
 8130               	/* #APP */
 8131               	 ;  158 "usb/usb.h" 1
 8132 1f92 06E0      		ldi r16, 6
 8133 1f94 0593      		.dc.w 0x9305
 8134               		
 8135               	 ;  0 "" 2
 159:usb/usb.h     **** 		LACR16(&e->STATUS, USB_EP_BANK_bm);
 8136               		.loc 5 159 0
 8137               	 ;  159 "usb/usb.h" 1
 8138 1f96 08E0      		ldi r16, 8
 8139 1f98 0693      		.dc.w 0x9306
 8140               		
 8141               	 ;  0 "" 2
 8142               	/* #NOAPP */
 8143               	.LBE2709:
 8144               	.LBE2708:
  57:usb/usb_pipe.h **** 		p->data->flush = 0;
 8145               		.loc 2 57 0
 8146 1f9a 1092 0000 		sts ep_in_data+1,__zero_reg__
  58:usb/usb_pipe.h **** 		p->data->packet_offset = 0;
 8147               		.loc 2 58 0
 8148 1f9e 1092 0000 		sts ep_in_data+2,__zero_reg__
 8149 1fa2 1092 0000 		sts ep_in_data+2+1,__zero_reg__
  59:usb/usb_pipe.h **** 		p->data->bank = 0;
 8150               		.loc 2 59 0
 8151 1fa6 1092 0000 		sts ep_in_data,__zero_reg__
 8152               	.LVL466:
 8153               	.LBB2710:
 8154               	.LBB2711:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 8155               		.loc 3 70 0
 8156 1faa 2FBF      		out __SREG__,r18
 8157               		.loc 3 71 0
 8158               	.LVL467:
 8159               	.L305:
 8160               	/* epilogue start */
 8161               	.LBE2711:
 8162               	.LBE2710:
 8163               	.LBE2703:
 8164               	.LBE2702:
 8165               	.LBE2701:
 8166               	.LBE2637:
 8167               	.LBE2636:
 122:gps/gps.h     ****     c = uart_getchar(&USARTD0);
 123:gps/gps.h     ****     send_byte(c);
 124:gps/gps.h     ****   }
 125:gps/gps.h     ****   break_and_flush();
 126:gps/gps.h     **** }...
 8168               		.loc 10 126 0
 8169 1fac DF91      		pop r29
 8170 1fae CF91      		pop r28
 8171 1fb0 1F91      		pop r17
 8172 1fb2 0F91      		pop r16
 8173 1fb4 FF90      		pop r15
 8174 1fb6 EF90      		pop r14
 8175 1fb8 DF90      		pop r13
 8176 1fba CF90      		pop r12
 8177 1fbc BF90      		pop r11
 8178 1fbe AF90      		pop r10
 8179 1fc0 0895      		ret
 8180               	.LVL468:
 8181               	.L344:
 8182               	.LBB2720:
 8183               	.LBB2632:
 8184               	.LBB2625:
 8185               	.LBB2620:
 8186               	.LBB2527:
 8187               	.LBB2525:
 8188               	.LBB2523:
 8189               	.LBB2518:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 8190               		.loc 4 57 0
 8191 1fc2 8091 0000 		lds r24,ep_in_pipe_data+4
 8192 1fc6 342F      		mov r19,r20
 8193 1fc8 381B      		sub r19,r24
 8194               	.LBE2518:
 8195               	.LBE2523:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 8196               		.loc 2 127 0
 8197 1fca 81E0      		ldi r24,lo8(1)
 8198 1fcc 1316      		cp __zero_reg__,r19
 8199 1fce 04F4      		brge .+2
 8200 1fd0 00C0      		rjmp .L307
 8201 1fd2 00C0      		rjmp .L336
 8202               	.LVL469:
 8203               	.L347:
 8204               	.LBE2525:
 8205               	.LBE2527:
 8206               	.LBE2620:
 8207               	.LBE2625:
 8208               	.LBE2632:
 8209               	.LBE2720:
 8210               	.LBB2721:
 8211               	.LBB2716:
 8212               	.LBB2712:
 8213               	.LBB2700:
 8214               	.LBB2699:
 8215               	.LBB2698:
 8216               	.LBB2693:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 8217               		.loc 4 57 0
 8218 1fd4 8091 0000 		lds r24,ep_in_pipe_data+4
 8219 1fd8 232F      		mov r18,r19
 8220 1fda 281B      		sub r18,r24
 8221               	.LBE2693:
 8222               	.LBE2698:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 8223               		.loc 2 127 0
 8224 1fdc 81E0      		ldi r24,lo8(1)
 8225 1fde 1216      		cp __zero_reg__,r18
 8226 1fe0 04F4      		brge .+2
 8227 1fe2 00C0      		rjmp .L333
 8228 1fe4 00C0      		rjmp .L337
 8229               	.LVL470:
 8230               	.L345:
 8231               	.LBE2699:
 8232               	.LBE2700:
 8233               	.LBE2712:
 8234               	.LBE2716:
 8235               	.LBE2721:
 8236               	.LBB2722:
 8237               	.LBB2633:
 8238               	.LBB2626:
 8239               	.LBB2621:
 8240               	.LBB2613:
 8241               	.LBB2609:
 8242               	.LBB2605:
 177:usb/usb_pipe.h **** 		ATOMIC_BLOCK(PIPE_ATOMIC){
 8243               		.loc 2 177 0
 8244 1fe6 BFB7      		in r27,__SREG__
 8245               	.LVL471:
 8246               	.LBB2595:
 8247               	.LBB2596:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 8248               		.loc 3 50 0
 8249               	/* #APP */
 8250               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 8251 1fe8 F894      		cli
 8252               	 ;  0 "" 2
 8253               	.LVL472:
 8254               	/* #NOAPP */
 8255               	.LBE2596:
 8256               	.LBE2595:
 8257               		.loc 2 178 0
 8258 1fea 1092 0000 		sts ep_in_data+2,__zero_reg__
 8259 1fee 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 8260               	.LVL473:
 8261               	.LBB2597:
 8262               	.LBB2598:
  81:usb/pipe.h    **** 	pipe->data->count += 1;
 8263               		.loc 4 81 0
 8264 1ff2 8091 0000 		lds r24,ep_in_pipe_data+4
 8265 1ff6 8F5F      		subi r24,lo8(-(1))
 8266 1ff8 8093 0000 		sts ep_in_pipe_data+4,r24
  82:usb/pipe.h    **** 	pipe->data->write_ptr += pipe->size;
 8267               		.loc 4 82 0
 8268 1ffc 8091 0000 		lds r24,ep_in_pipe_data+2
 8269 2000 9091 0000 		lds r25,ep_in_pipe_data+2+1
 8270 2004 805C      		subi r24,lo8(-(64))
 8271 2006 9F4F      		sbci r25,hi8(-(64))
 8272 2008 8093 0000 		sts ep_in_pipe_data+2,r24
 8273 200c 9093 0000 		sts ep_in_pipe_data+2+1,r25
  84:usb/pipe.h    **** 	if (pipe->data->write_ptr == &pipe->buffer[pipe->slots*pipe->size])
 8274               		.loc 4 84 0
 8275 2010 20E0      		ldi r18,hi8(ep_in_pipe_buffer+512)
 8276 2012 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 8277 2014 9207      		cpc r25,r18
 8278               	.LVL474:
 8279 2016 01F4      		brne .L311
  85:usb/pipe.h    **** 		pipe->data->write_ptr = &pipe->buffer[0];
 8280               		.loc 4 85 0
 8281 2018 A092 0000 		sts ep_in_pipe_data+2,r10
 8282 201c B092 0000 		sts ep_in_pipe_data+2+1,r11
 8283               	.L311:
 8284               	.LVL475:
 8285               	.LBE2598:
 8286               	.LBE2597:
 8287               	.LBB2599:
 8288               	.LBB2588:
 8289               	.LBB2584:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 8290               		.loc 2 80 0
 8291 2020 5FB7      		in r21,__SREG__
 8292               	.LVL476:
 8293               	.LBB2562:
 8294               	.LBB2563:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 8295               		.loc 3 50 0
 8296               	/* #APP */
 8297               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 8298 2022 F894      		cli
 8299               	 ;  0 "" 2
 8300               	.LVL477:
 8301               	/* #NOAPP */
 8302               	.LBE2563:
 8303               	.LBE2562:
 8304               	.LBB2564:
 8305               	.LBB2537:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 8306               		.loc 5 220 0
 8307 2024 8091 0000 		lds r24,endpoints+24
 8308 2028 8670      		andi r24,lo8(6)
 8309               	.LBE2537:
 8310               	.LBE2564:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 8311               		.loc 2 82 0
 8312 202a 01F4      		brne .L348
 8313               	.LVL478:
 8314               	.L312:
 8315               	.LBB2565:
 8316               	.LBB2566:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 8317               		.loc 3 70 0
 8318 202c 5FBF      		out __SREG__,r21
 8319               		.loc 3 71 0
 8320               	.LVL479:
 8321               	.LBE2566:
 8322               	.LBE2565:
 8323               	.LBE2584:
 8324               	.LBE2588:
 8325               	.LBE2599:
 8326               	.LBB2600:
 8327               	.LBB2594:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 8328               		.loc 3 70 0
 8329 202e BFBF      		out __SREG__,r27
 8330               		.loc 3 71 0
 8331 2030 00C0      		rjmp .L310
 8332               	.LVL480:
 8333               	.L348:
 8334               	.LBE2594:
 8335               	.LBE2600:
 8336               	.LBB2601:
 8337               	.LBB2589:
 8338               	.LBB2585:
 8339               	.LBB2567:
 8340               	.LBB2568:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 8341               		.loc 4 51 0
 8342 2032 A091 0000 		lds r26,ep_in_pipe_data+4
 8343               	.LBE2568:
 8344               	.LBE2567:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 8345               		.loc 2 83 0
 8346 2036 1A16      		cp __zero_reg__,r26
 8347 2038 04F0      		brlt .+2
 8348 203a 00C0      		rjmp .L313
 8349               	.LBB2569:
 8350               	.LBB2570:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 8351               		.loc 4 62 0
 8352 203c 2091 0000 		lds r18,ep_in_pipe_data
 8353 2040 3091 0000 		lds r19,ep_in_pipe_data+1
 8354               	.LVL481:
 8355               	.LBE2570:
 8356               	.LBE2569:
 8357               	.LBB2571:
 8358               	.LBB2560:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 8359               		.loc 2 68 0
 8360 2044 E091 0000 		lds r30,ep_in_data
 8361               	.LVL482:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 8362               		.loc 2 69 0
 8363 2048 8E2F      		mov r24,r30
 8364 204a 90E0      		ldi r25,lo8(0)
 8365 204c F1E0      		ldi r31,lo8(1)
 8366 204e 8C17      		cp r24,r28
 8367 2050 9D07      		cpc r25,r29
 8368 2052 01F4      		brne .L314
 8369 2054 F0E0      		ldi r31,lo8(0)
 8370               	.L314:
 8371 2056 F093 0000 		sts ep_in_data,r31
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 8372               		.loc 2 72 0
 8373 205a EE23      		tst r30
 8374 205c 01F4      		brne .L315
 8375               	.LVL483:
 8376               	.LBB2557:
 8377               	.LBB2558:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8378               		.loc 5 168 0
 8379 205e 2093 0000 		sts endpoints+28,r18
 8380 2062 3093 0000 		sts endpoints+28+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 8381               		.loc 5 169 0
 8382 2066 E092 0000 		sts endpoints+26,r14
 8383 206a F092 0000 		sts endpoints+26+1,r15
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 8384               		.loc 5 174 0
 8385 206e FB01      		movw r30,r22
 8386               	/* #APP */
 8387               	 ;  174 "usb/usb.h" 1
 8388 2070 02E2      		ldi r16, 34
 8389 2072 0693      		.dc.w 0x9306
 8390               		
 8391               	 ;  0 "" 2
 8392               	.LVL484:
 8393               	/* #NOAPP */
 8394               	.L316:
 8395               	.LBE2558:
 8396               	.LBE2557:
 8397               	.LBE2560:
 8398               	.LBE2571:
 8399               	.LBB2572:
 8400               	.LBB2573:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 8401               		.loc 4 72 0
 8402 2074 A150      		subi r26,lo8(-(-1))
 8403 2076 A093 0000 		sts ep_in_pipe_data+4,r26
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 8404               		.loc 4 73 0
 8405 207a C901      		movw r24,r18
 8406 207c 805C      		subi r24,lo8(-(64))
 8407 207e 9F4F      		sbci r25,hi8(-(64))
 8408 2080 8093 0000 		sts ep_in_pipe_data,r24
 8409 2084 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 8410               		.loc 4 75 0
 8411 2088 F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 8412 208a 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 8413 208c 9F07      		cpc r25,r31
 8414 208e 01F4      		brne .L312
 8415               	.LBE2573:
 8416               	.LBE2572:
 8417               	.LBB2574:
 8418               	.LBB2540:
 8419               		.loc 4 91 0
 8420 2090 A092 0000 		sts ep_in_pipe_data,r10
 8421 2094 B092 0000 		sts ep_in_pipe_data+1,r11
 8422               	.LVL485:
 8423 2098 00C0      		rjmp .L312
 8424               	.LVL486:
 8425               	.L315:
 8426               	.LBE2540:
 8427               	.LBE2574:
 8428               	.LBB2575:
 8429               	.LBB2561:
 8430               	.LBB2559:
 8431               	.LBB2556:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8432               		.loc 5 168 0
 8433 209a 2093 0000 		sts endpoints+20,r18
 8434 209e 3093 0000 		sts endpoints+20+1,r19
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 8435               		.loc 5 169 0
 8436 20a2 E092 0000 		sts endpoints+18,r14
 8437 20a6 F092 0000 		sts endpoints+18+1,r15
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 8438               		.loc 5 176 0
 8439 20aa FB01      		movw r30,r22
 8440               	/* #APP */
 8441               	 ;  176 "usb/usb.h" 1
 8442 20ac 04E1      		ldi r16, 20
 8443 20ae 0693      		.dc.w 0x9306
 8444               		
 8445               	 ;  0 "" 2
 8446               	/* #NOAPP */
 8447 20b0 00C0      		rjmp .L316
 8448               	.LVL487:
 8449               	.L313:
 8450               	.LBE2556:
 8451               	.LBE2559:
 8452               	.LBE2561:
 8453               	.LBE2575:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 8454               		.loc 2 87 0
 8455 20b2 8091 0000 		lds r24,ep_in_data+1
 8456 20b6 8130      		cpi r24,lo8(1)
 8457 20b8 01F4      		brne .+2
 8458 20ba 00C0      		rjmp .L349
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 8459               		.loc 2 91 0
 8460 20bc 8230      		cpi r24,lo8(2)
 8461 20be 01F0      		breq .+2
 8462 20c0 00C0      		rjmp .L312
 8463               	.LVL488:
 8464               	.LBB2576:
 8465               	.LBB2577:
 8466               	.LBB2578:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 8467               		.loc 5 228 0
 8468 20c2 8091 0000 		lds r24,endpoints+24
 8469 20c6 8670      		andi r24,lo8(6)
 8470               	.LBE2578:
 8471               	.LBE2577:
 8472               	.LBE2576:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 8473               		.loc 2 91 0
 8474 20c8 8630      		cpi r24,lo8(6)
 8475 20ca 01F0      		breq .+2
 8476 20cc 00C0      		rjmp .L312
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 8477               		.loc 2 92 0
 8478 20ce 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 8479               		.loc 2 93 0
 8480 20d2 1092 0000 		sts ep_in_data+2,__zero_reg__
 8481 20d6 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 8482               	.LBB2579:
 8483               	.LBB2541:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 8484               		.loc 4 90 0
 8485 20da 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 8486               		.loc 4 91 0
 8487 20de A092 0000 		sts ep_in_pipe_data+2,r10
 8488 20e2 B092 0000 		sts ep_in_pipe_data+2+1,r11
 8489 20e6 A092 0000 		sts ep_in_pipe_data,r10
 8490 20ea B092 0000 		sts ep_in_pipe_data+1,r11
 8491               	.LVL489:
 8492 20ee 00C0      		rjmp .L312
 8493               	.LVL490:
 8494               	.L346:
 8495               	.LBE2541:
 8496               	.LBE2579:
 8497               	.LBE2585:
 8498               	.LBE2589:
 8499               	.LBE2601:
 8500               	.LBE2605:
 8501               	.LBE2609:
 8502               	.LBE2613:
 8503               	.LBE2621:
 8504               	.LBE2626:
 8505               	.LBE2633:
 8506               	.LBE2722:
 8507               	.LBB2723:
 8508               	.LBB2717:
 8509               	.LBB2713:
 8510               	.LBB2685:
 8511               	.LBB2682:
 8512               	.LBB2679:
 8513               	.LBB2676:
 8514               	.LBB2649:
 8515               	.LBB2650:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 8516               		.loc 4 51 0
 8517 20f0 3091 0000 		lds r19,ep_in_pipe_data+4
 8518               	.LBE2650:
 8519               	.LBE2649:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 8520               		.loc 2 83 0
 8521 20f4 1316      		cp __zero_reg__,r19
 8522 20f6 04F0      		brlt .+2
 8523 20f8 00C0      		rjmp .L323
 8524               	.LBB2651:
 8525               	.LBB2652:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 8526               		.loc 4 62 0
 8527 20fa 8091 0000 		lds r24,ep_in_pipe_data
 8528 20fe 9091 0000 		lds r25,ep_in_pipe_data+1
 8529               	.LVL491:
 8530               	.LBE2652:
 8531               	.LBE2651:
 8532               	.LBB2653:
 8533               	.LBB2654:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 8534               		.loc 2 68 0
 8535 2102 4091 0000 		lds r20,ep_in_data
 8536               	.LVL492:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 8537               		.loc 2 69 0
 8538 2106 51E0      		ldi r21,lo8(1)
 8539 2108 4130      		cpi r20,lo8(1)
 8540 210a 01F4      		brne .L324
 8541 210c 50E0      		ldi r21,lo8(0)
 8542               	.L324:
 8543 210e 5093 0000 		sts ep_in_data,r21
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 8544               		.loc 2 72 0
 8545 2112 4423      		tst r20
 8546 2114 01F0      		breq .+2
 8547 2116 00C0      		rjmp .L325
 8548               	.LVL493:
 8549               	.LBB2655:
 8550               	.LBB2656:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8551               		.loc 5 168 0
 8552 2118 8093 0000 		sts endpoints+28,r24
 8553 211c 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 8554               		.loc 5 169 0
 8555 2120 40E4      		ldi r20,lo8(64)
 8556 2122 50E0      		ldi r21,hi8(64)
 8557 2124 4093 0000 		sts endpoints+26,r20
 8558 2128 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 8559               		.loc 5 174 0
 8560 212c E0E0      		ldi r30,lo8(endpoints+24)
 8561 212e F0E0      		ldi r31,hi8(endpoints+24)
 8562               	/* #APP */
 8563               	 ;  174 "usb/usb.h" 1
 8564 2130 02E2      		ldi r16, 34
 8565 2132 0693      		.dc.w 0x9306
 8566               		
 8567               	 ;  0 "" 2
 8568               	.LVL494:
 8569               	/* #NOAPP */
 8570               	.L326:
 8571               	.LBE2656:
 8572               	.LBE2655:
 8573               	.LBE2654:
 8574               	.LBE2653:
 8575               	.LBB2660:
 8576               	.LBB2661:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 8577               		.loc 4 72 0
 8578 2134 3150      		subi r19,lo8(-(-1))
 8579 2136 3093 0000 		sts ep_in_pipe_data+4,r19
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 8580               		.loc 4 73 0
 8581 213a 805C      		subi r24,lo8(-(64))
 8582 213c 9F4F      		sbci r25,hi8(-(64))
 8583 213e 8093 0000 		sts ep_in_pipe_data,r24
 8584 2142 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 8585               		.loc 4 75 0
 8586 2146 F0E0      		ldi r31,hi8(ep_in_pipe_buffer+512)
 8587 2148 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 8588 214a 9F07      		cpc r25,r31
 8589 214c 01F0      		breq .+2
 8590 214e 00C0      		rjmp .L322
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 8591               		.loc 4 76 0
 8592 2150 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 8593 2152 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 8594 2154 8093 0000 		sts ep_in_pipe_data,r24
 8595 2158 9093 0000 		sts ep_in_pipe_data+1,r25
 8596 215c 00C0      		rjmp .L322
 8597               	.LVL495:
 8598               	.L349:
 8599               	.LBE2661:
 8600               	.LBE2660:
 8601               	.LBE2676:
 8602               	.LBE2679:
 8603               	.LBE2682:
 8604               	.LBE2685:
 8605               	.LBE2713:
 8606               	.LBE2717:
 8607               	.LBE2723:
 8608               	.LBB2724:
 8609               	.LBB2634:
 8610               	.LBB2627:
 8611               	.LBB2622:
 8612               	.LBB2614:
 8613               	.LBB2610:
 8614               	.LBB2606:
 8615               	.LBB2602:
 8616               	.LBB2590:
 8617               	.LBB2586:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 8618               		.loc 2 88 0
 8619 215e 22E0      		ldi r18,lo8(2)
 8620 2160 2093 0000 		sts ep_in_data+1,r18
 8621               	.LBB2580:
 8622               	.LBB2581:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 8623               		.loc 4 62 0
 8624 2164 A091 0000 		lds r26,ep_in_pipe_data
 8625 2168 1091 0000 		lds r17,ep_in_pipe_data+1
 8626               	.LBE2581:
 8627               	.LBE2580:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 8628               		.loc 2 90 0
 8629 216c 2091 0000 		lds r18,ep_in_data+2
 8630 2170 3091 0000 		lds r19,ep_in_data+2+1
 8631               	.LVL496:
 8632               	.LBB2582:
 8633               	.LBB2550:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 8634               		.loc 2 68 0
 8635 2174 F091 0000 		lds r31,ep_in_data
 8636               	.LVL497:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 8637               		.loc 2 69 0
 8638 2178 8F2F      		mov r24,r31
 8639 217a 90E0      		ldi r25,lo8(0)
 8640 217c E1E0      		ldi r30,lo8(1)
 8641               	.LVL498:
 8642 217e 8C17      		cp r24,r28
 8643 2180 9D07      		cpc r25,r29
 8644 2182 01F4      		brne .L319
 8645 2184 E0E0      		ldi r30,lo8(0)
 8646               	.L319:
 8647 2186 E093 0000 		sts ep_in_data,r30
 8648               	.LBB2544:
 8649               	.LBB2545:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8650               		.loc 5 168 0
 8651 218a 8A2F      		mov r24,r26
 8652 218c 912F      		mov r25,r17
 8653               	.LBE2545:
 8654               	.LBE2544:
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 8655               		.loc 2 72 0
 8656 218e FF23      		tst r31
 8657 2190 01F4      		brne .L320
 8658               	.LVL499:
 8659               	.LBB2547:
 8660               	.LBB2546:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8661               		.loc 5 168 0
 8662 2192 8093 0000 		sts endpoints+28,r24
 8663 2196 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 8664               		.loc 5 169 0
 8665 219a 2093 0000 		sts endpoints+26,r18
 8666 219e 3093 0000 		sts endpoints+26+1,r19
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 8667               		.loc 5 174 0
 8668 21a2 FB01      		movw r30,r22
 8669               	/* #APP */
 8670               	 ;  174 "usb/usb.h" 1
 8671 21a4 02E2      		ldi r16, 34
 8672 21a6 0693      		.dc.w 0x9306
 8673               		
 8674               	 ;  0 "" 2
 8675               	/* #NOAPP */
 8676 21a8 00C0      		rjmp .L312
 8677               	.LVL500:
 8678               	.L325:
 8679               	.LBE2546:
 8680               	.LBE2547:
 8681               	.LBE2550:
 8682               	.LBE2582:
 8683               	.LBE2586:
 8684               	.LBE2590:
 8685               	.LBE2602:
 8686               	.LBE2606:
 8687               	.LBE2610:
 8688               	.LBE2614:
 8689               	.LBE2622:
 8690               	.LBE2627:
 8691               	.LBE2634:
 8692               	.LBE2724:
 8693               	.LBB2725:
 8694               	.LBB2718:
 8695               	.LBB2714:
 8696               	.LBB2686:
 8697               	.LBB2683:
 8698               	.LBB2680:
 8699               	.LBB2677:
 8700               	.LBB2662:
 8701               	.LBB2659:
 8702               	.LBB2657:
 8703               	.LBB2658:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8704               		.loc 5 168 0
 8705 21aa 8093 0000 		sts endpoints+20,r24
 8706 21ae 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 8707               		.loc 5 169 0
 8708 21b2 40E4      		ldi r20,lo8(64)
 8709 21b4 50E0      		ldi r21,hi8(64)
 8710               	.LVL501:
 8711 21b6 4093 0000 		sts endpoints+18,r20
 8712 21ba 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 8713               		.loc 5 176 0
 8714 21be E0E0      		ldi r30,lo8(endpoints+24)
 8715 21c0 F0E0      		ldi r31,hi8(endpoints+24)
 8716               	/* #APP */
 8717               	 ;  176 "usb/usb.h" 1
 8718 21c2 04E1      		ldi r16, 20
 8719 21c4 0693      		.dc.w 0x9306
 8720               		
 8721               	 ;  0 "" 2
 8722               	/* #NOAPP */
 8723 21c6 00C0      		rjmp .L326
 8724               	.LVL502:
 8725               	.L320:
 8726               	.LBE2658:
 8727               	.LBE2657:
 8728               	.LBE2659:
 8729               	.LBE2662:
 8730               	.LBE2677:
 8731               	.LBE2680:
 8732               	.LBE2683:
 8733               	.LBE2686:
 8734               	.LBE2714:
 8735               	.LBE2718:
 8736               	.LBE2725:
 8737               	.LBB2726:
 8738               	.LBB2635:
 8739               	.LBB2628:
 8740               	.LBB2623:
 8741               	.LBB2615:
 8742               	.LBB2611:
 8743               	.LBB2607:
 8744               	.LBB2603:
 8745               	.LBB2591:
 8746               	.LBB2587:
 8747               	.LBB2583:
 8748               	.LBB2551:
 8749               	.LBB2548:
 8750               	.LBB2549:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8751               		.loc 5 168 0
 8752 21c8 8093 0000 		sts endpoints+20,r24
 8753 21cc 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 8754               		.loc 5 169 0
 8755 21d0 2093 0000 		sts endpoints+18,r18
 8756 21d4 3093 0000 		sts endpoints+18+1,r19
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 8757               		.loc 5 176 0
 8758 21d8 FB01      		movw r30,r22
 8759               	/* #APP */
 8760               	 ;  176 "usb/usb.h" 1
 8761 21da 04E1      		ldi r16, 20
 8762 21dc 0693      		.dc.w 0x9306
 8763               		
 8764               	 ;  0 "" 2
 8765               	/* #NOAPP */
 8766 21de 00C0      		rjmp .L312
 8767               	.LVL503:
 8768               	.L323:
 8769               	.LBE2549:
 8770               	.LBE2548:
 8771               	.LBE2551:
 8772               	.LBE2583:
 8773               	.LBE2587:
 8774               	.LBE2591:
 8775               	.LBE2603:
 8776               	.LBE2607:
 8777               	.LBE2611:
 8778               	.LBE2615:
 8779               	.LBE2623:
 8780               	.LBE2628:
 8781               	.LBE2635:
 8782               	.LBE2726:
 8783               	.LBB2727:
 8784               	.LBB2719:
 8785               	.LBB2715:
 8786               	.LBB2687:
 8787               	.LBB2684:
 8788               	.LBB2681:
 8789               	.LBB2678:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 8790               		.loc 2 87 0
 8791 21e0 8091 0000 		lds r24,ep_in_data+1
 8792 21e4 8130      		cpi r24,lo8(1)
 8793 21e6 01F0      		breq .L350
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 8794               		.loc 2 91 0
 8795 21e8 8230      		cpi r24,lo8(2)
 8796 21ea 01F0      		breq .+2
 8797 21ec 00C0      		rjmp .L322
 8798               	.LVL504:
 8799               	.LBB2663:
 8800               	.LBB2664:
 8801               	.LBB2665:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 8802               		.loc 5 228 0
 8803 21ee 8091 0000 		lds r24,endpoints+24
 8804 21f2 8670      		andi r24,lo8(6)
 8805               	.LBE2665:
 8806               	.LBE2664:
 8807               	.LBE2663:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 8808               		.loc 2 91 0
 8809 21f4 8630      		cpi r24,lo8(6)
 8810 21f6 01F0      		breq .+2
 8811 21f8 00C0      		rjmp .L322
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 8812               		.loc 2 92 0
 8813 21fa 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 8814               		.loc 2 93 0
 8815 21fe 1092 0000 		sts ep_in_data+2,__zero_reg__
 8816 2202 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 8817               	.LBB2666:
 8818               	.LBB2667:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 8819               		.loc 4 90 0
 8820 2206 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 8821               		.loc 4 91 0
 8822 220a 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 8823 220c 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 8824 220e 8093 0000 		sts ep_in_pipe_data+2,r24
 8825 2212 9093 0000 		sts ep_in_pipe_data+2+1,r25
 8826 2216 8093 0000 		sts ep_in_pipe_data,r24
 8827 221a 9093 0000 		sts ep_in_pipe_data+1,r25
 8828               	.LVL505:
 8829 221e 00C0      		rjmp .L322
 8830               	.LVL506:
 8831               	.L350:
 8832               	.LBE2667:
 8833               	.LBE2666:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 8834               		.loc 2 88 0
 8835 2220 82E0      		ldi r24,lo8(2)
 8836 2222 8093 0000 		sts ep_in_data+1,r24
 8837               	.LBB2668:
 8838               	.LBB2669:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 8839               		.loc 4 62 0
 8840 2226 6091 0000 		lds r22,ep_in_pipe_data
 8841 222a 3091 0000 		lds r19,ep_in_pipe_data+1
 8842               	.LBE2669:
 8843               	.LBE2668:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 8844               		.loc 2 90 0
 8845 222e 4091 0000 		lds r20,ep_in_data+2
 8846 2232 5091 0000 		lds r21,ep_in_data+2+1
 8847               	.LVL507:
 8848               	.LBB2670:
 8849               	.LBB2671:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 8850               		.loc 2 68 0
 8851 2236 8091 0000 		lds r24,ep_in_data
 8852               	.LVL508:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 8853               		.loc 2 69 0
 8854 223a 91E0      		ldi r25,lo8(1)
 8855 223c 8130      		cpi r24,lo8(1)
 8856 223e 01F4      		brne .L329
 8857 2240 90E0      		ldi r25,lo8(0)
 8858               	.L329:
 8859 2242 9093 0000 		sts ep_in_data,r25
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 8860               		.loc 2 72 0
 8861 2246 8823      		tst r24
 8862 2248 01F4      		brne .L330
 8863               	.LVL509:
 8864               	.LBB2672:
 8865               	.LBB2673:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8866               		.loc 5 168 0
 8867 224a 862F      		mov r24,r22
 8868 224c 932F      		mov r25,r19
 8869 224e 8093 0000 		sts endpoints+28,r24
 8870 2252 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 8871               		.loc 5 169 0
 8872 2256 4093 0000 		sts endpoints+26,r20
 8873 225a 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 8874               		.loc 5 174 0
 8875 225e E0E0      		ldi r30,lo8(endpoints+24)
 8876 2260 F0E0      		ldi r31,hi8(endpoints+24)
 8877               	.LVL510:
 8878               	/* #APP */
 8879               	 ;  174 "usb/usb.h" 1
 8880 2262 02E2      		ldi r16, 34
 8881 2264 0693      		.dc.w 0x9306
 8882               		
 8883               	 ;  0 "" 2
 8884               	/* #NOAPP */
 8885 2266 00C0      		rjmp .L322
 8886               	.LVL511:
 8887               	.L330:
 8888               	.LBE2673:
 8889               	.LBE2672:
 8890               	.LBB2674:
 8891               	.LBB2675:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 8892               		.loc 5 168 0
 8893 2268 862F      		mov r24,r22
 8894 226a 932F      		mov r25,r19
 8895 226c 8093 0000 		sts endpoints+20,r24
 8896 2270 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 8897               		.loc 5 169 0
 8898 2274 4093 0000 		sts endpoints+18,r20
 8899 2278 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 8900               		.loc 5 176 0
 8901 227c E0E0      		ldi r30,lo8(endpoints+24)
 8902 227e F0E0      		ldi r31,hi8(endpoints+24)
 8903               	/* #APP */
 8904               	 ;  176 "usb/usb.h" 1
 8905 2280 04E1      		ldi r16, 20
 8906 2282 0693      		.dc.w 0x9306
 8907               		
 8908               	 ;  0 "" 2
 8909               	/* #NOAPP */
 8910 2284 00C0      		rjmp .L322
 8911               	.LBE2675:
 8912               	.LBE2674:
 8913               	.LBE2671:
 8914               	.LBE2670:
 8915               	.LBE2678:
 8916               	.LBE2681:
 8917               	.LBE2684:
 8918               	.LBE2687:
 8919               	.LBE2715:
 8920               	.LBE2719:
 8921               	.LBE2727:
 8922               		.cfi_endproc
 8923               	.LFE72:
 8925               	.global	wake_up_gprs
 8927               	wake_up_gprs:
 8928               	.LFB73:
 8929               		.file 12 "gprs/gprs.h"
   1:gprs/gprs.h   **** void wake_up_gprs(void);
   2:gprs/gprs.h   **** void gprs_init(void);
   3:gprs/gprs.h   **** 
   4:gprs/gprs.h   **** void wake_up_gprs(void) {
 8930               		.loc 12 4 0
 8931               		.cfi_startproc
 8932               	/* prologue: function */
 8933               	/* frame size = 0 */
 8934               	/* stack size = 0 */
 8935               	.L__stack_usage = 0
 8936               	/* epilogue start */
   5:gprs/gprs.h   ****   // 
   6:gprs/gprs.h   **** }
 8937               		.loc 12 6 0
 8938 2286 0895      		ret
 8939               		.cfi_endproc
 8940               	.LFE73:
 8942               	.global	gprs_init
 8944               	gprs_init:
 8945               	.LFB74:
   7:gprs/gprs.h   **** 
   8:gprs/gprs.h   **** void gprs_init(void) {
 8946               		.loc 12 8 0
 8947               		.cfi_startproc
 8948               	/* prologue: function */
 8949               	/* frame size = 0 */
 8950               	/* stack size = 0 */
 8951               	.L__stack_usage = 0
   9:gprs/gprs.h   ****   //change port numbers when we get our proto board
  10:gprs/gprs.h   **** 
  11:gprs/gprs.h   ****   wake_up_gprs();
  12:gprs/gprs.h   ****   //Baud rate of 19200
  13:gprs/gprs.h   **** 
  14:gprs/gprs.h   ****   // Set the TxD pin as an output - set PORTD OUT register bit 3 to 1 
  15:gprs/gprs.h   ****   PORTD.DIRSET = PIN3_bm; 
 8952               		.loc 12 15 0
 8953 2288 E0E6      		ldi r30,lo8(1632)
 8954 228a F6E0      		ldi r31,hi8(1632)
 8955 228c 88E0      		ldi r24,lo8(8)
 8956 228e 8183      		std Z+1,r24
  16:gprs/gprs.h   **** 
  17:gprs/gprs.h   ****   // Set the TxD pin high - set PORTD DIR register bit 3 to 1 
  18:gprs/gprs.h   ****   PORTD.OUTSET = PIN3_bm; 
 8957               		.loc 12 18 0
 8958 2290 8583      		std Z+5,r24
 8959               	.LVL512:
  19:gprs/gprs.h   **** 
  20:gprs/gprs.h   ****   uint16_t BSEL = 6;
  21:gprs/gprs.h   ****   uint8_t BSCALE = 0;
  22:gprs/gprs.h   ****   USARTD0_BAUDCTRLA = BSEL & 0XFF;
 8960               		.loc 12 22 0
 8961 2292 86E0      		ldi r24,lo8(6)
 8962 2294 8093 A609 		sts 2470,r24
  23:gprs/gprs.h   ****   USARTD0_BAUDCTRLB = (BSCALE << 4) | (BSEL & 0xF000) >> 8;
 8963               		.loc 12 23 0
 8964 2298 1092 A709 		sts 2471,__zero_reg__
  24:gprs/gprs.h   **** 
  25:gprs/gprs.h   ****   // no interrupts
  26:gprs/gprs.h   ****   // can't overwrite bits 7:6
  27:gprs/gprs.h   ****   USARTD0.CTRLA = 0x00;
 8965               		.loc 12 27 0
 8966 229c E0EA      		ldi r30,lo8(2464)
 8967 229e F9E0      		ldi r31,hi8(2464)
 8968 22a0 1382      		std Z+3,__zero_reg__
  28:gprs/gprs.h   **** 
  29:gprs/gprs.h   ****   // Enable transmitter and receiver
  30:gprs/gprs.h   ****   USARTD0.CTRLB = USART_TXEN_bm | USART_RXEN_bm;  
 8969               		.loc 12 30 0
 8970 22a2 88E1      		ldi r24,lo8(24)
 8971 22a4 8483      		std Z+4,r24
  31:gprs/gprs.h   **** 
  32:gprs/gprs.h   ****   // async, no parity, 1 stop bit, 8 bit data,
  33:gprs/gprs.h   ****   // 00     00         00          11    
  34:gprs/gprs.h   ****   USARTD0.CTRLC = 0x03;  
 8972               		.loc 12 34 0
 8973 22a6 83E0      		ldi r24,lo8(3)
 8974 22a8 8583      		std Z+5,r24
 8975               	/* epilogue start */
  35:gprs/gprs.h   **** }...
 8976               		.loc 12 35 0
 8977 22aa 0895      		ret
 8978               		.cfi_endproc
 8979               	.LFE74:
 8981               		.data
 8982               	.LC9:
 8983 00bd 4154 2B43 		.string	"AT+CMGF=1"
 8983      4D47 463D 
 8983      3100 
 8984               	.LC10:
 8985 00c7 4154 2B43 		.string	"AT+CMGS=\""
 8985      4D47 533D 
 8985      2200 
 8986               		.text
 8987               	.global	send_message
 8989               	send_message:
 8990               	.LFB75:
 8991               		.file 13 "sms/sms.h"
   1:sms/sms.h     **** #include "Framework.h"
   2:sms/sms.h     **** #include <avr/io.h>
   3:sms/sms.h     **** #include <stdlib.h>
   4:sms/sms.h     **** #include <string.h>
   5:sms/sms.h     **** 
   6:sms/sms.h     **** void send_message(char*, char*, USART_t*);
   7:sms/sms.h     **** char* read_message(USART_t*);
   8:sms/sms.h     **** void delSMS(USART_t*);
   9:sms/sms.h     **** void GprsTextModeSMS(USART_t*);
  10:sms/sms.h     **** void ClearGprsMsg(void);
  11:sms/sms.h     **** void GprsReadSmsStore(char* SmsStorePos, USART_t* USART);
  12:sms/sms.h     **** void ProcessGprsMsg(USART_t*);
  13:sms/sms.h     **** void ProcessSms(char* sms);
  14:sms/sms.h     **** void ReceiveTextMessage(USART_t*);
  15:sms/sms.h     **** void SimpleReceive();
  16:sms/sms.h     **** 
  17:sms/sms.h     **** void send_message(char* number, char* text_message, USART_t* USART) {
 8992               		.loc 13 17 0
 8993               		.cfi_startproc
 8994               	.LVL513:
 8995 22ac BF92      		push r11
 8996               	.LCFI123:
 8997               		.cfi_def_cfa_offset 3
 8998               		.cfi_offset 11, -2
 8999 22ae CF92      		push r12
 9000               	.LCFI124:
 9001               		.cfi_def_cfa_offset 4
 9002               		.cfi_offset 12, -3
 9003 22b0 DF92      		push r13
 9004               	.LCFI125:
 9005               		.cfi_def_cfa_offset 5
 9006               		.cfi_offset 13, -4
 9007 22b2 EF92      		push r14
 9008               	.LCFI126:
 9009               		.cfi_def_cfa_offset 6
 9010               		.cfi_offset 14, -5
 9011 22b4 FF92      		push r15
 9012               	.LCFI127:
 9013               		.cfi_def_cfa_offset 7
 9014               		.cfi_offset 15, -6
 9015 22b6 0F93      		push r16
 9016               	.LCFI128:
 9017               		.cfi_def_cfa_offset 8
 9018               		.cfi_offset 16, -7
 9019 22b8 1F93      		push r17
 9020               	.LCFI129:
 9021               		.cfi_def_cfa_offset 9
 9022               		.cfi_offset 17, -8
 9023 22ba CF93      		push r28
 9024               	.LCFI130:
 9025               		.cfi_def_cfa_offset 10
 9026               		.cfi_offset 28, -9
 9027 22bc DF93      		push r29
 9028               	.LCFI131:
 9029               		.cfi_def_cfa_offset 11
 9030               		.cfi_offset 29, -10
 9031               	/* prologue: function */
 9032               	/* frame size = 0 */
 9033               	/* stack size = 9 */
 9034               	.L__stack_usage = 9
 9035 22be D82E      		mov r13,r24
 9036 22c0 C92E      		mov r12,r25
 9037 22c2 7B01      		movw r14,r22
 9038 22c4 EA01      		movw r28,r20
 9039               	.LVL514:
 9040               	.L354:
 9041               	.LBB2832:
 9042               	.LBB2833:
  18:uart/uart.h   ****     while ( !( USART->STATUS & USART_DREIF_bm) ); 
 9043               		.loc 9 18 0
 9044 22c6 8981      		ldd r24,Y+1
 9045 22c8 85FF      		sbrs r24,5
 9046 22ca 00C0      		rjmp .L354
  21:uart/uart.h   ****     USART->DATA = c; 
 9047               		.loc 9 21 0
 9048 22cc 8DE0      		ldi r24,lo8(13)
 9049 22ce 8883      		st Y,r24
 9050               	.LVL515:
 9051               	.LBE2833:
 9052               	.LBE2832:
 9053               	.LBB2834:
 9054               	.LBB2835:
 9055               		.loc 11 164 0
 9056 22d0 8FEF      		 ldi r24,lo8(639999)
 9057 22d2 93EC      	    ldi r25,hi8(639999)
 9058 22d4 A9E0      	    ldi r26,hlo8(639999)
 9059 22d6 8150      	    1:subi r24,1
 9060 22d8 9040      	    sbci r25,0
 9061 22da A040      	    sbci r26,0
 9062 22dc 01F4      	    brne 1b
 9063 22de 00C0      		rjmp .
 9064 22e0 0000      		nop
 9065               	.LVL516:
 9066               	.LBE2835:
 9067               	.LBE2834:
 9068               	.LBB2836:
 9069               	.LBB2837:
  18:sms/sms.h     **** 
  19:sms/sms.h     ****   uart_putchar('\r', USART);
  20:sms/sms.h     ****   _delay_ms(100);
  21:sms/sms.h     **** 
  22:sms/sms.h     ****   GprsTextModeSMS(USART);
  23:sms/sms.h     ****   _delay_ms(100);
  24:sms/sms.h     **** 
  25:sms/sms.h     ****   //build number string
  26:sms/sms.h     ****   char* number_string = concat(concat("AT+CMGS=\"", number), "\"");
  27:sms/sms.h     ****   send_uart(number_string, USART);
  28:sms/sms.h     ****   _delay_ms(100);
  29:sms/sms.h     **** 
  30:sms/sms.h     ****   send_uart(text_message, USART);
  31:sms/sms.h     ****   _delay_ms(100);
  32:sms/sms.h     **** 
  33:sms/sms.h     ****   uart_putchar(26, USART);
  34:sms/sms.h     ****   _delay_ms(100);
  35:sms/sms.h     ****   break_and_flush();
  36:sms/sms.h     **** }
  37:sms/sms.h     **** 
  38:sms/sms.h     **** void GprsTextModeSMS(USART_t* USART) {
  39:sms/sms.h     ****   send_uart("AT+CMGF=1", USART);
 9070               		.loc 13 39 0
 9071 22e2 80E0      		ldi r24,lo8(.LC9)
 9072 22e4 90E0      		ldi r25,hi8(.LC9)
 9073 22e6 BE01      		movw r22,r28
 9074 22e8 0E94 0000 		call send_uart
 9075               	.LVL517:
 9076               	.LBE2837:
 9077               	.LBE2836:
 9078               	.LBB2838:
 9079               	.LBB2839:
 9080               		.loc 11 164 0
 9081 22ec 8FEF      		 ldi r24,lo8(639999)
 9082 22ee 93EC      	    ldi r25,hi8(639999)
 9083 22f0 A9E0      	    ldi r26,hlo8(639999)
 9084 22f2 8150      	    1:subi r24,1
 9085 22f4 9040      	    sbci r25,0
 9086 22f6 A040      	    sbci r26,0
 9087 22f8 01F4      	    brne 1b
 9088 22fa 00C0      		rjmp .
 9089 22fc 0000      		nop
 9090               	.LVL518:
 9091               	.LBE2839:
 9092               	.LBE2838:
 9093               	.LBB2840:
 9094               	.LBB2841:
  15:concat/concat.h ****     char *result = malloc(strlen(s1)+strlen(s2)+1);
 9095               		.loc 7 15 0
 9096 22fe ED2D      		mov r30,r13
 9097 2300 FC2D      		mov r31,r12
 9098 2302 DF01      		movw r26,r30
 9099 2304 0D90      		ld __tmp_reg__,X+
 9100 2306 0020      		tst __tmp_reg__
 9101 2308 01F4      		brne .-6
 9102 230a CD01      		movw r24,r26
 9103 230c 8E1B      		sub r24,r30
 9104 230e 9F0B      		sbc r25,r31
 9105 2310 0996      		adiw r24,9
 9106 2312 0E94 0000 		call malloc
 9107 2316 182F      		mov r17,r24
 9108 2318 092F      		mov r16,r25
 9109               	.LVL519:
  17:concat/concat.h ****     strcpy(result, s1);
 9110               		.loc 7 17 0
 9111 231a E82F      		mov r30,r24
 9112 231c F92F      		mov r31,r25
 9113 231e A0E0      		ldi r26,lo8(.LC10)
 9114 2320 B0E0      		ldi r27,hi8(.LC10)
 9115 2322 8AE0      		ldi r24,lo8(10)
 9116               	.LVL520:
 9117               	.L355:
 9118 2324 0D90      		ld r0,X+
 9119 2326 0192      		st Z+,r0
 9120 2328 8150      		subi r24,lo8(-(-1))
 9121 232a 01F4      		brne .L355
  18:concat/concat.h ****     strcat(result, s2);
 9122               		.loc 7 18 0
 9123 232c 812F      		mov r24,r17
 9124 232e 902F      		mov r25,r16
 9125               	.LVL521:
 9126 2330 6D2D      		mov r22,r13
 9127 2332 7C2D      		mov r23,r12
 9128 2334 0E94 0000 		call strcat
 9129               	.LVL522:
 9130               	.LBE2841:
 9131               	.LBE2840:
 9132               	.LBB2842:
 9133               	.LBB2843:
  15:concat/concat.h ****     char *result = malloc(strlen(s1)+strlen(s2)+1);
 9134               		.loc 7 15 0
 9135 2338 E12F      		mov r30,r17
 9136 233a F02F      		mov r31,r16
 9137 233c DF01      		movw r26,r30
 9138 233e 0D90      		ld __tmp_reg__,X+
 9139 2340 0020      		tst __tmp_reg__
 9140 2342 01F4      		brne .-6
 9141 2344 CD01      		movw r24,r26
 9142 2346 8E1B      		sub r24,r30
 9143 2348 9F0B      		sbc r25,r31
 9144 234a 0196      		adiw r24,1
 9145 234c 0E94 0000 		call malloc
 9146 2350 B92E      		mov r11,r25
 9147 2352 C82E      		mov r12,r24
 9148               	.LVL523:
 9149 2354 D92E      		mov r13,r25
 9150               	.LVL524:
  17:concat/concat.h ****     strcpy(result, s1);
 9151               		.loc 7 17 0
 9152 2356 C601      		movw r24,r12
 9153 2358 612F      		mov r22,r17
 9154 235a 702F      		mov r23,r16
 9155 235c 0E94 0000 		call strcpy
  18:concat/concat.h ****     strcat(result, s2);
 9156               		.loc 7 18 0
 9157 2360 AC2D      		mov r26,r12
 9158 2362 BB2D      		mov r27,r11
 9159 2364 FD01      		movw r30,r26
 9160 2366 0190      		ld __tmp_reg__,Z+
 9161 2368 0020      		tst __tmp_reg__
 9162 236a 01F4      		brne .-6
 9163 236c 3197      		sbiw r30,1
 9164 236e EA1B      		sub r30,r26
 9165 2370 FB0B      		sbc r31,r27
 9166 2372 EC0D      		add r30,r12
 9167 2374 FD1D      		adc r31,r13
 9168 2376 82E2      		ldi r24,lo8(34)
 9169 2378 90E0      		ldi r25,hi8(34)
 9170 237a 8083      		st Z,r24
 9171 237c 9183      		std Z+1,r25
 9172               	.LBE2843:
 9173               	.LBE2842:
  27:sms/sms.h     ****   send_uart(number_string, USART);
 9174               		.loc 13 27 0
 9175 237e C601      		movw r24,r12
 9176 2380 BE01      		movw r22,r28
 9177 2382 0E94 0000 		call send_uart
 9178               	.LVL525:
 9179               	.LBB2844:
 9180               	.LBB2845:
 9181               		.loc 11 164 0
 9182 2386 8FEF      		 ldi r24,lo8(639999)
 9183 2388 93EC      	    ldi r25,hi8(639999)
 9184 238a A9E0      	    ldi r26,hlo8(639999)
 9185 238c 8150      	    1:subi r24,1
 9186 238e 9040      	    sbci r25,0
 9187 2390 A040      	    sbci r26,0
 9188 2392 01F4      	    brne 1b
 9189 2394 00C0      		rjmp .
 9190 2396 0000      		nop
 9191               	.LBE2845:
 9192               	.LBE2844:
  30:sms/sms.h     ****   send_uart(text_message, USART);
 9193               		.loc 13 30 0
 9194 2398 C701      		movw r24,r14
 9195 239a BE01      		movw r22,r28
 9196 239c 0E94 0000 		call send_uart
 9197               	.LVL526:
 9198               	.LBB2846:
 9199               	.LBB2847:
 9200               		.loc 11 164 0
 9201 23a0 8FEF      		 ldi r24,lo8(639999)
 9202 23a2 93EC      	    ldi r25,hi8(639999)
 9203 23a4 A9E0      	    ldi r26,hlo8(639999)
 9204 23a6 8150      	    1:subi r24,1
 9205 23a8 9040      	    sbci r25,0
 9206 23aa A040      	    sbci r26,0
 9207 23ac 01F4      	    brne 1b
 9208 23ae 00C0      		rjmp .
 9209 23b0 0000      		nop
 9210               	.LVL527:
 9211               	.L356:
 9212               	.LBE2847:
 9213               	.LBE2846:
 9214               	.LBB2848:
 9215               	.LBB2849:
  18:uart/uart.h   ****     while ( !( USART->STATUS & USART_DREIF_bm) ); 
 9216               		.loc 9 18 0
 9217 23b2 8981      		ldd r24,Y+1
 9218 23b4 85FF      		sbrs r24,5
 9219 23b6 00C0      		rjmp .L356
  21:uart/uart.h   ****     USART->DATA = c; 
 9220               		.loc 9 21 0
 9221 23b8 8AE1      		ldi r24,lo8(26)
 9222 23ba 8883      		st Y,r24
 9223               	.LVL528:
 9224               	.LBE2849:
 9225               	.LBE2848:
 9226               	.LBB2850:
 9227               	.LBB2851:
 9228               		.loc 11 164 0
 9229 23bc 8FEF      		 ldi r24,lo8(639999)
 9230 23be 93EC      	    ldi r25,hi8(639999)
 9231 23c0 A9E0      	    ldi r26,hlo8(639999)
 9232 23c2 8150      	    1:subi r24,1
 9233 23c4 9040      	    sbci r25,0
 9234 23c6 A040      	    sbci r26,0
 9235 23c8 01F4      	    brne 1b
 9236 23ca 00C0      		rjmp .
 9237 23cc 0000      		nop
 9238               	.LVL529:
 9239               	.LBE2851:
 9240               	.LBE2850:
 9241               	.LBB2852:
 9242               	.LBB2853:
 9243               	.LBB2854:
 9244               	.LBB2855:
 110:usb/usb_pipe.h **** 	p->data->flush = 1;
 9245               		.loc 2 110 0
 9246 23ce 81E0      		ldi r24,lo8(1)
 9247 23d0 8093 0000 		sts ep_in_data+1,r24
 9248               	.LVL530:
 9249               	.LBB2856:
 9250               	.LBB2857:
 9251               	.LBB2858:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 9252               		.loc 2 80 0
 9253 23d4 2FB7      		in r18,__SREG__
 9254               	.LVL531:
 9255               	.LBB2859:
 9256               	.LBB2860:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 9257               		.loc 3 50 0
 9258               	/* #APP */
 9259               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 9260 23d6 F894      		cli
 9261               	 ;  0 "" 2
 9262               	.LVL532:
 9263               	/* #NOAPP */
 9264               	.LBE2860:
 9265               	.LBE2859:
 9266               	.LBB2861:
 9267               	.LBB2862:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 9268               		.loc 5 220 0
 9269 23d8 8091 0000 		lds r24,endpoints+24
 9270 23dc 8670      		andi r24,lo8(6)
 9271               	.LBE2862:
 9272               	.LBE2861:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 9273               		.loc 2 82 0
 9274 23de 01F0      		breq .+2
 9275 23e0 00C0      		rjmp .L376
 9276               	.LVL533:
 9277               	.L357:
 9278               	.LBB2863:
 9279               	.LBB2864:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 9280               		.loc 3 70 0
 9281 23e2 2FBF      		out __SREG__,r18
 9282               		.loc 3 71 0
 9283               	.LBE2864:
 9284               	.LBE2863:
 9285               	.LBE2858:
 9286               	.LBE2857:
 9287               	.LBE2856:
 9288               	.LBE2855:
 9289               	.LBE2854:
  27:Framework.h   ****     USB.INTFLAGSBSET = USB_TRNIF_bm;
 9290               		.loc 1 27 0
 9291 23e4 82E0      		ldi r24,lo8(2)
 9292 23e6 E0EC      		ldi r30,lo8(1216)
 9293 23e8 F4E0      		ldi r31,hi8(1216)
 9294 23ea 8587      		std Z+13,r24
 9295               	.LBB2896:
 9296               	.LBB2897:
 9297               	.LBB2898:
 9298               	.LBB2899:
 9299               	.LBB2900:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 9300               		.loc 4 57 0
 9301 23ec 36E0      		ldi r19,lo8(6)
 9302               	.LVL534:
 9303               	.L366:
 9304               	.LBE2900:
 9305               	.LBE2899:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 9306               		.loc 2 123 0
 9307 23ee 9FB7      		in r25,__SREG__
 9308               	.LVL535:
 9309               	.LBB2902:
 9310               	.LBB2903:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 9311               		.loc 3 50 0
 9312               	/* #APP */
 9313               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 9314 23f0 F894      		cli
 9315               	 ;  0 "" 2
 9316               	.LVL536:
 9317               	/* #NOAPP */
 9318               	.LBE2903:
 9319               	.LBE2902:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 9320               		.loc 2 124 0
 9321 23f2 8091 0000 		lds r24,ep_in_data+1
 9322 23f6 8823      		tst r24
 9323 23f8 01F0      		breq .L377
 9324               	.L371:
 125:usb/usb_pipe.h **** 			r = false;
 9325               		.loc 2 125 0
 9326 23fa 80E0      		ldi r24,lo8(0)
 9327               	.L368:
 9328               	.LBB2904:
 9329               	.LBB2905:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 9330               		.loc 3 70 0
 9331 23fc 9FBF      		out __SREG__,r25
 9332               		.loc 3 71 0
 9333               	.LBE2905:
 9334               	.LBE2904:
 9335               	.LBE2898:
 9336               	.LBE2897:
 9337               	.LBE2896:
  28:Framework.h   ****     while (!usb_pipe_can_write(&ep_in)){
 9338               		.loc 1 28 0
 9339 23fe 8823      		tst r24
 9340 2400 01F4      		brne .L353
  29:Framework.h   ****         if (timeout_or_sampling_no_longer_enabled){
 9341               		.loc 1 29 0
 9342 2402 8091 0000 		lds r24,timeout_or_sampling_no_longer_enabled
 9343 2406 8823      		tst r24
 9344 2408 01F0      		breq .L366
 9345               	.LVL537:
 9346               	.LBB2909:
 9347               	.LBB2910:
 9348               	.LBB2911:
  54:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 9349               		.loc 2 54 0
 9350 240a 2FB7      		in r18,__SREG__
 9351               	.LVL538:
 9352               	.LBB2912:
 9353               	.LBB2913:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 9354               		.loc 3 50 0
 9355               	/* #APP */
 9356               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 9357 240c F894      		cli
 9358               	 ;  0 "" 2
 9359               	.LVL539:
 9360               	/* #NOAPP */
 9361               	.LBE2913:
 9362               	.LBE2912:
 9363               	.LBB2914:
 9364               	.LBB2915:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 9365               		.loc 4 90 0
 9366 240e 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 9367               		.loc 4 91 0
 9368 2412 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 9369 2414 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 9370 2416 8093 0000 		sts ep_in_pipe_data+2,r24
 9371 241a 9093 0000 		sts ep_in_pipe_data+2+1,r25
 9372 241e 8093 0000 		sts ep_in_pipe_data,r24
 9373 2422 9093 0000 		sts ep_in_pipe_data+1,r25
 9374               	.LVL540:
 9375               	.LBE2915:
 9376               	.LBE2914:
 9377               	.LBB2916:
 9378               	.LBB2917:
 158:usb/usb.h     **** 		LASR16(&e->STATUS, USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 9379               		.loc 5 158 0
 9380 2426 E0E0      		ldi r30,lo8(endpoints+24)
 9381 2428 F0E0      		ldi r31,hi8(endpoints+24)
 9382               	/* #APP */
 9383               	 ;  158 "usb/usb.h" 1
 9384 242a 06E0      		ldi r16, 6
 9385 242c 0593      		.dc.w 0x9305
 9386               		
 9387               	 ;  0 "" 2
 159:usb/usb.h     **** 		LACR16(&e->STATUS, USB_EP_BANK_bm);
 9388               		.loc 5 159 0
 9389               	 ;  159 "usb/usb.h" 1
 9390 242e 08E0      		ldi r16, 8
 9391 2430 0693      		.dc.w 0x9306
 9392               		
 9393               	 ;  0 "" 2
 9394               	/* #NOAPP */
 9395               	.LBE2917:
 9396               	.LBE2916:
  57:usb/usb_pipe.h **** 		p->data->flush = 0;
 9397               		.loc 2 57 0
 9398 2432 1092 0000 		sts ep_in_data+1,__zero_reg__
  58:usb/usb_pipe.h **** 		p->data->packet_offset = 0;
 9399               		.loc 2 58 0
 9400 2436 1092 0000 		sts ep_in_data+2,__zero_reg__
 9401 243a 1092 0000 		sts ep_in_data+2+1,__zero_reg__
  59:usb/usb_pipe.h **** 		p->data->bank = 0;
 9402               		.loc 2 59 0
 9403 243e 1092 0000 		sts ep_in_data,__zero_reg__
 9404               	.LVL541:
 9405               	.LBB2918:
 9406               	.LBB2919:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 9407               		.loc 3 70 0
 9408 2442 2FBF      		out __SREG__,r18
 9409               		.loc 3 71 0
 9410               	.LVL542:
 9411               	.L353:
 9412               	/* epilogue start */
 9413               	.LBE2919:
 9414               	.LBE2918:
 9415               	.LBE2911:
 9416               	.LBE2910:
 9417               	.LBE2909:
 9418               	.LBE2853:
 9419               	.LBE2852:
  36:sms/sms.h     **** }
 9420               		.loc 13 36 0
 9421 2444 DF91      		pop r29
 9422 2446 CF91      		pop r28
 9423               	.LVL543:
 9424 2448 1F91      		pop r17
 9425 244a 0F91      		pop r16
 9426 244c FF90      		pop r15
 9427 244e EF90      		pop r14
 9428               	.LVL544:
 9429 2450 DF90      		pop r13
 9430 2452 CF90      		pop r12
 9431               	.LVL545:
 9432 2454 BF90      		pop r11
 9433 2456 0895      		ret
 9434               	.LVL546:
 9435               	.L377:
 9436               	.LBB2923:
 9437               	.LBB2922:
 9438               	.LBB2920:
 9439               	.LBB2908:
 9440               	.LBB2907:
 9441               	.LBB2906:
 9442               	.LBB2901:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 9443               		.loc 4 57 0
 9444 2458 8091 0000 		lds r24,ep_in_pipe_data+4
 9445 245c 232F      		mov r18,r19
 9446 245e 281B      		sub r18,r24
 9447               	.LBE2901:
 9448               	.LBE2906:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 9449               		.loc 2 127 0
 9450 2460 81E0      		ldi r24,lo8(1)
 9451 2462 1216      		cp __zero_reg__,r18
 9452 2464 04F0      		brlt .L368
 9453 2466 00C0      		rjmp .L371
 9454               	.LVL547:
 9455               	.L376:
 9456               	.LBE2907:
 9457               	.LBE2908:
 9458               	.LBE2920:
 9459               	.LBB2921:
 9460               	.LBB2895:
 9461               	.LBB2894:
 9462               	.LBB2893:
 9463               	.LBB2892:
 9464               	.LBB2865:
 9465               	.LBB2866:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 9466               		.loc 4 51 0
 9467 2468 3091 0000 		lds r19,ep_in_pipe_data+4
 9468               	.LBE2866:
 9469               	.LBE2865:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 9470               		.loc 2 83 0
 9471 246c 1316      		cp __zero_reg__,r19
 9472 246e 04F0      		brlt .+2
 9473 2470 00C0      		rjmp .L358
 9474               	.LBB2867:
 9475               	.LBB2868:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 9476               		.loc 4 62 0
 9477 2472 8091 0000 		lds r24,ep_in_pipe_data
 9478 2476 9091 0000 		lds r25,ep_in_pipe_data+1
 9479               	.LVL548:
 9480               	.LBE2868:
 9481               	.LBE2867:
 9482               	.LBB2869:
 9483               	.LBB2870:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 9484               		.loc 2 68 0
 9485 247a 4091 0000 		lds r20,ep_in_data
 9486               	.LVL549:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 9487               		.loc 2 69 0
 9488 247e 51E0      		ldi r21,lo8(1)
 9489 2480 4130      		cpi r20,lo8(1)
 9490 2482 01F4      		brne .L359
 9491 2484 50E0      		ldi r21,lo8(0)
 9492               	.L359:
 9493 2486 5093 0000 		sts ep_in_data,r21
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 9494               		.loc 2 72 0
 9495 248a 4423      		tst r20
 9496 248c 01F4      		brne .L360
 9497               	.LVL550:
 9498               	.LBB2871:
 9499               	.LBB2872:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 9500               		.loc 5 168 0
 9501 248e 8093 0000 		sts endpoints+28,r24
 9502 2492 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 9503               		.loc 5 169 0
 9504 2496 40E4      		ldi r20,lo8(64)
 9505 2498 50E0      		ldi r21,hi8(64)
 9506 249a 4093 0000 		sts endpoints+26,r20
 9507 249e 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 9508               		.loc 5 174 0
 9509 24a2 E0E0      		ldi r30,lo8(endpoints+24)
 9510 24a4 F0E0      		ldi r31,hi8(endpoints+24)
 9511               	.LVL551:
 9512               	/* #APP */
 9513               	 ;  174 "usb/usb.h" 1
 9514 24a6 02E2      		ldi r16, 34
 9515 24a8 0693      		.dc.w 0x9306
 9516               		
 9517               	 ;  0 "" 2
 9518               	.LVL552:
 9519               	/* #NOAPP */
 9520               	.L361:
 9521               	.LBE2872:
 9522               	.LBE2871:
 9523               	.LBE2870:
 9524               	.LBE2869:
 9525               	.LBB2876:
 9526               	.LBB2877:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 9527               		.loc 4 72 0
 9528 24aa 3150      		subi r19,lo8(-(-1))
 9529 24ac 3093 0000 		sts ep_in_pipe_data+4,r19
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 9530               		.loc 4 73 0
 9531 24b0 805C      		subi r24,lo8(-(64))
 9532 24b2 9F4F      		sbci r25,hi8(-(64))
 9533 24b4 8093 0000 		sts ep_in_pipe_data,r24
 9534 24b8 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 9535               		.loc 4 75 0
 9536 24bc A0E0      		ldi r26,hi8(ep_in_pipe_buffer+512)
 9537 24be 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 9538 24c0 9A07      		cpc r25,r26
 9539 24c2 01F0      		breq .+2
 9540 24c4 00C0      		rjmp .L357
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 9541               		.loc 4 76 0
 9542 24c6 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 9543 24c8 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 9544 24ca 8093 0000 		sts ep_in_pipe_data,r24
 9545 24ce 9093 0000 		sts ep_in_pipe_data+1,r25
 9546 24d2 00C0      		rjmp .L357
 9547               	.LVL553:
 9548               	.L360:
 9549               	.LBE2877:
 9550               	.LBE2876:
 9551               	.LBB2878:
 9552               	.LBB2875:
 9553               	.LBB2873:
 9554               	.LBB2874:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 9555               		.loc 5 168 0
 9556 24d4 8093 0000 		sts endpoints+20,r24
 9557 24d8 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 9558               		.loc 5 169 0
 9559 24dc 40E4      		ldi r20,lo8(64)
 9560 24de 50E0      		ldi r21,hi8(64)
 9561 24e0 4093 0000 		sts endpoints+18,r20
 9562 24e4 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 9563               		.loc 5 176 0
 9564 24e8 E0E0      		ldi r30,lo8(endpoints+24)
 9565 24ea F0E0      		ldi r31,hi8(endpoints+24)
 9566               	/* #APP */
 9567               	 ;  176 "usb/usb.h" 1
 9568 24ec 04E1      		ldi r16, 20
 9569 24ee 0693      		.dc.w 0x9306
 9570               		
 9571               	 ;  0 "" 2
 9572               	.LVL554:
 9573               	/* #NOAPP */
 9574 24f0 00C0      		rjmp .L361
 9575               	.LVL555:
 9576               	.L358:
 9577               	.LBE2874:
 9578               	.LBE2873:
 9579               	.LBE2875:
 9580               	.LBE2878:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 9581               		.loc 2 87 0
 9582 24f2 8091 0000 		lds r24,ep_in_data+1
 9583 24f6 8130      		cpi r24,lo8(1)
 9584 24f8 01F0      		breq .L378
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 9585               		.loc 2 91 0
 9586 24fa 8230      		cpi r24,lo8(2)
 9587 24fc 01F0      		breq .+2
 9588 24fe 00C0      		rjmp .L357
 9589               	.LVL556:
 9590               	.LBB2879:
 9591               	.LBB2880:
 9592               	.LBB2881:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 9593               		.loc 5 228 0
 9594 2500 8091 0000 		lds r24,endpoints+24
 9595 2504 8670      		andi r24,lo8(6)
 9596               	.LBE2881:
 9597               	.LBE2880:
 9598               	.LBE2879:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 9599               		.loc 2 91 0
 9600 2506 8630      		cpi r24,lo8(6)
 9601 2508 01F0      		breq .+2
 9602 250a 00C0      		rjmp .L357
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 9603               		.loc 2 92 0
 9604 250c 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 9605               		.loc 2 93 0
 9606 2510 1092 0000 		sts ep_in_data+2,__zero_reg__
 9607 2514 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 9608               	.LBB2882:
 9609               	.LBB2883:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 9610               		.loc 4 90 0
 9611 2518 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 9612               		.loc 4 91 0
 9613 251c 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 9614 251e 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 9615 2520 8093 0000 		sts ep_in_pipe_data+2,r24
 9616 2524 9093 0000 		sts ep_in_pipe_data+2+1,r25
 9617 2528 8093 0000 		sts ep_in_pipe_data,r24
 9618 252c 9093 0000 		sts ep_in_pipe_data+1,r25
 9619               	.LVL557:
 9620 2530 00C0      		rjmp .L357
 9621               	.LVL558:
 9622               	.L378:
 9623               	.LBE2883:
 9624               	.LBE2882:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 9625               		.loc 2 88 0
 9626 2532 82E0      		ldi r24,lo8(2)
 9627 2534 8093 0000 		sts ep_in_data+1,r24
 9628               	.LBB2884:
 9629               	.LBB2885:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 9630               		.loc 4 62 0
 9631 2538 6091 0000 		lds r22,ep_in_pipe_data
 9632 253c 3091 0000 		lds r19,ep_in_pipe_data+1
 9633               	.LBE2885:
 9634               	.LBE2884:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 9635               		.loc 2 90 0
 9636 2540 4091 0000 		lds r20,ep_in_data+2
 9637 2544 5091 0000 		lds r21,ep_in_data+2+1
 9638               	.LVL559:
 9639               	.LBB2886:
 9640               	.LBB2887:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 9641               		.loc 2 68 0
 9642 2548 8091 0000 		lds r24,ep_in_data
 9643               	.LVL560:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 9644               		.loc 2 69 0
 9645 254c 91E0      		ldi r25,lo8(1)
 9646 254e 8130      		cpi r24,lo8(1)
 9647 2550 01F0      		breq .L379
 9648               	.L364:
 9649 2552 9093 0000 		sts ep_in_data,r25
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 9650               		.loc 2 72 0
 9651 2556 8823      		tst r24
 9652 2558 01F4      		brne .L365
 9653               	.LVL561:
 9654               	.LBB2888:
 9655               	.LBB2889:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 9656               		.loc 5 168 0
 9657 255a 862F      		mov r24,r22
 9658 255c 932F      		mov r25,r19
 9659 255e 8093 0000 		sts endpoints+28,r24
 9660 2562 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 9661               		.loc 5 169 0
 9662 2566 4093 0000 		sts endpoints+26,r20
 9663 256a 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 9664               		.loc 5 174 0
 9665 256e E0E0      		ldi r30,lo8(endpoints+24)
 9666 2570 F0E0      		ldi r31,hi8(endpoints+24)
 9667               	.LVL562:
 9668               	/* #APP */
 9669               	 ;  174 "usb/usb.h" 1
 9670 2572 02E2      		ldi r16, 34
 9671 2574 0693      		.dc.w 0x9306
 9672               		
 9673               	 ;  0 "" 2
 9674               	.LVL563:
 9675               	/* #NOAPP */
 9676 2576 00C0      		rjmp .L357
 9677               	.LVL564:
 9678               	.L365:
 9679               	.LBE2889:
 9680               	.LBE2888:
 9681               	.LBB2890:
 9682               	.LBB2891:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 9683               		.loc 5 168 0
 9684 2578 862F      		mov r24,r22
 9685 257a 932F      		mov r25,r19
 9686 257c 8093 0000 		sts endpoints+20,r24
 9687 2580 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 9688               		.loc 5 169 0
 9689 2584 4093 0000 		sts endpoints+18,r20
 9690 2588 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 9691               		.loc 5 176 0
 9692 258c E0E0      		ldi r30,lo8(endpoints+24)
 9693 258e F0E0      		ldi r31,hi8(endpoints+24)
 9694               	/* #APP */
 9695               	 ;  176 "usb/usb.h" 1
 9696 2590 04E1      		ldi r16, 20
 9697 2592 0693      		.dc.w 0x9306
 9698               		
 9699               	 ;  0 "" 2
 9700               	.LVL565:
 9701               	/* #NOAPP */
 9702 2594 00C0      		rjmp .L357
 9703               	.LVL566:
 9704               	.L379:
 9705               	.LBE2891:
 9706               	.LBE2890:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 9707               		.loc 2 69 0
 9708 2596 90E0      		ldi r25,lo8(0)
 9709 2598 00C0      		rjmp .L364
 9710               	.LBE2887:
 9711               	.LBE2886:
 9712               	.LBE2892:
 9713               	.LBE2893:
 9714               	.LBE2894:
 9715               	.LBE2895:
 9716               	.LBE2921:
 9717               	.LBE2922:
 9718               	.LBE2923:
 9719               		.cfi_endproc
 9720               	.LFE75:
 9722               	.global	GprsTextModeSMS
 9724               	GprsTextModeSMS:
 9725               	.LFB76:
  38:sms/sms.h     **** void GprsTextModeSMS(USART_t* USART) {
 9726               		.loc 13 38 0
 9727               		.cfi_startproc
 9728               	.LVL567:
 9729               	/* prologue: function */
 9730               	/* frame size = 0 */
 9731               	/* stack size = 0 */
 9732               	.L__stack_usage = 0
 9733 259a BC01      		movw r22,r24
 9734               		.loc 13 39 0
 9735 259c 80E0      		ldi r24,lo8(.LC9)
 9736 259e 90E0      		ldi r25,hi8(.LC9)
 9737               	.LVL568:
 9738 25a0 0E94 0000 		call send_uart
 9739               	.LVL569:
 9740               	/* epilogue start */
  40:sms/sms.h     **** }
 9741               		.loc 13 40 0
 9742 25a4 0895      		ret
 9743               		.cfi_endproc
 9744               	.LFE76:
 9746               		.data
 9747               	.LC11:
 9748 00d1 4154 2B43 		.string	"AT+CPOWD=1"
 9748      504F 5744 
 9748      3D31 00
 9749               		.text
 9750               	.global	PowerDownModem
 9752               	PowerDownModem:
 9753               	.LFB77:
  41:sms/sms.h     **** 
  42:sms/sms.h     **** void PowerDownModem(USART_t* USART) {
 9754               		.loc 13 42 0
 9755               		.cfi_startproc
 9756               	.LVL570:
 9757               	/* prologue: function */
 9758               	/* frame size = 0 */
 9759               	/* stack size = 0 */
 9760               	.L__stack_usage = 0
 9761 25a6 BC01      		movw r22,r24
  43:sms/sms.h     ****   send_uart("AT+CPOWD=1", USART);
 9762               		.loc 13 43 0
 9763 25a8 80E0      		ldi r24,lo8(.LC11)
 9764 25aa 90E0      		ldi r25,hi8(.LC11)
 9765               	.LVL571:
 9766 25ac 0E94 0000 		call send_uart
 9767               	.LVL572:
 9768               	/* epilogue start */
  44:sms/sms.h     **** }
 9769               		.loc 13 44 0
 9770 25b0 0895      		ret
 9771               		.cfi_endproc
 9772               	.LFE77:
 9774               		.data
 9775               	.LC12:
 9776 00dc 4154 2B43 		.string	"AT+CFUN=0"
 9776      4655 4E3D 
 9776      3000 
 9777               		.text
 9778               	.global	SleepModem
 9780               	SleepModem:
 9781               	.LFB78:
  45:sms/sms.h     **** 
  46:sms/sms.h     **** void SleepModem(USART_t* USART) {
 9782               		.loc 13 46 0
 9783               		.cfi_startproc
 9784               	.LVL573:
 9785               	/* prologue: function */
 9786               	/* frame size = 0 */
 9787               	/* stack size = 0 */
 9788               	.L__stack_usage = 0
 9789 25b2 BC01      		movw r22,r24
  47:sms/sms.h     ****   send_uart("AT+CFUN=0", USART);
 9790               		.loc 13 47 0
 9791 25b4 80E0      		ldi r24,lo8(.LC12)
 9792 25b6 90E0      		ldi r25,hi8(.LC12)
 9793               	.LVL574:
 9794 25b8 0E94 0000 		call send_uart
 9795               	.LVL575:
 9796               	/* epilogue start */
  48:sms/sms.h     **** }
 9797               		.loc 13 48 0
 9798 25bc 0895      		ret
 9799               		.cfi_endproc
 9800               	.LFE78:
 9802               		.data
 9803               	.LC13:
 9804 00e6 4154 2B43 		.string	"AT+CFUN=1"
 9804      4655 4E3D 
 9804      3100 
 9805               		.text
 9806               	.global	WakeUpModem
 9808               	WakeUpModem:
 9809               	.LFB79:
  49:sms/sms.h     **** 
  50:sms/sms.h     **** void WakeUpModem(USART_t* USART) {
 9810               		.loc 13 50 0
 9811               		.cfi_startproc
 9812               	.LVL576:
 9813               	/* prologue: function */
 9814               	/* frame size = 0 */
 9815               	/* stack size = 0 */
 9816               	.L__stack_usage = 0
 9817 25be BC01      		movw r22,r24
  51:sms/sms.h     ****   send_uart("AT+CFUN=1", USART);
 9818               		.loc 13 51 0
 9819 25c0 80E0      		ldi r24,lo8(.LC13)
 9820 25c2 90E0      		ldi r25,hi8(.LC13)
 9821               	.LVL577:
 9822 25c4 0E94 0000 		call send_uart
 9823               	.LVL578:
 9824               	/* epilogue start */
  52:sms/sms.h     **** }
 9825               		.loc 13 52 0
 9826 25c8 0895      		ret
 9827               		.cfi_endproc
 9828               	.LFE79:
 9830               		.data
 9831               	.LC14:
 9832 00f0 5379 6E63 		.string	"Sync"
 9832      00
 9833               	.LC15:
 9834 00f5 4154 00   		.string	"AT"
 9835               	.LC16:
 9836 00f8 5049 4E47 		.string	"PING"
 9836      00
 9837               	.LC17:
 9838 00fd 5465 7874 		.string	"Text Mode"
 9838      204D 6F64 
 9838      6500 
 9839               	.LC18:
 9840 0107 4154 2B43 		.string	"AT+CMGF=?"
 9840      4D47 463D 
 9840      3F00 
 9841               	.LC19:
 9842 0111 4368 6563 		.string	"Check Mode"
 9842      6B20 4D6F 
 9842      6465 00
 9843               		.text
 9844               	.global	SimpleReceive
 9846               	SimpleReceive:
 9847               	.LFB80:
  53:sms/sms.h     **** 
  54:sms/sms.h     **** void SimpleReceive(USART_t* USART) {
 9848               		.loc 13 54 0
 9849               		.cfi_startproc
 9850               	.LVL579:
 9851 25ca CF92      		push r12
 9852               	.LCFI132:
 9853               		.cfi_def_cfa_offset 3
 9854               		.cfi_offset 12, -2
 9855 25cc DF92      		push r13
 9856               	.LCFI133:
 9857               		.cfi_def_cfa_offset 4
 9858               		.cfi_offset 13, -3
 9859 25ce EF92      		push r14
 9860               	.LCFI134:
 9861               		.cfi_def_cfa_offset 5
 9862               		.cfi_offset 14, -4
 9863 25d0 FF92      		push r15
 9864               	.LCFI135:
 9865               		.cfi_def_cfa_offset 6
 9866               		.cfi_offset 15, -5
 9867 25d2 0F93      		push r16
 9868               	.LCFI136:
 9869               		.cfi_def_cfa_offset 7
 9870               		.cfi_offset 16, -6
 9871 25d4 1F93      		push r17
 9872               	.LCFI137:
 9873               		.cfi_def_cfa_offset 8
 9874               		.cfi_offset 17, -7
 9875 25d6 CF93      		push r28
 9876               	.LCFI138:
 9877               		.cfi_def_cfa_offset 9
 9878               		.cfi_offset 28, -8
 9879 25d8 DF93      		push r29
 9880               	.LCFI139:
 9881               		.cfi_def_cfa_offset 10
 9882               		.cfi_offset 29, -9
 9883 25da CDB7      		in r28,__SP_L__
 9884 25dc DEB7      		in r29,__SP_H__
 9885               	.LCFI140:
 9886               		.cfi_def_cfa_register 28
 9887               	/* prologue: function */
 9888               	/* frame size = 0 */
 9889               	/* stack size = 8 */
 9890               	.L__stack_usage = 8
 9891 25de 8C01      		movw r16,r24
  55:sms/sms.h     ****   char c;
  56:sms/sms.h     ****   int n = 1;
  57:sms/sms.h     ****   char s[n+1];
  58:sms/sms.h     **** 
  59:sms/sms.h     ****   uart_putchar('A', USART);
  60:sms/sms.h     ****   send_string("Sync");
  61:sms/sms.h     ****   _delay_ms(3000);
  62:sms/sms.h     **** 
  63:sms/sms.h     ****   send_uart("AT", USART);
  64:sms/sms.h     ****   send_string("PING");
  65:sms/sms.h     ****   _delay_ms(100);
  66:sms/sms.h     ****   for (int i=0; i<n; i++) {
  67:sms/sms.h     ****     c = uart_getchar(USART);
  68:sms/sms.h     ****     s[i] = c;
  69:sms/sms.h     ****   }
  70:sms/sms.h     ****   s[n] = '\0';
  71:sms/sms.h     **** 
  72:sms/sms.h     ****   send_string(s);
  73:sms/sms.h     **** 
  74:sms/sms.h     **** 
  75:sms/sms.h     **** 
  76:sms/sms.h     ****   GprsTextModeSMS(USART);
  77:sms/sms.h     ****   send_string("Text Mode");
  78:sms/sms.h     ****   _delay_ms(800);
  79:sms/sms.h     **** 
  80:sms/sms.h     ****   // send_uart("AT+CMGL=\"REC UNREAD\"", USART); // Read Message 
  81:sms/sms.h     ****   // send_string("Read Messages");
  82:sms/sms.h     ****   // _delay_ms(1000);
  83:sms/sms.h     **** 
  84:sms/sms.h     ****   send_uart("AT+CMGF=?", USART); // Read Message 
  85:sms/sms.h     ****   send_string("Check Mode");
  86:sms/sms.h     ****   _delay_ms(1000);
  87:sms/sms.h     **** }...
 9892               		.loc 13 87 0
 9893 25e0 CDB6      		in r12,__SP_L__
 9894 25e2 DEB6      		in r13,__SP_H__
 9895               	.LVL580:
  57:sms/sms.h     ****   char s[n+1];
 9896               		.loc 13 57 0
 9897 25e4 00D0      		rcall .
 9898 25e6 EDB6      		in r14,__SP_L__
 9899 25e8 FEB6      		in r15,__SP_H__
 9900 25ea 0894      		sec
 9901 25ec E11C      		adc r14,__zero_reg__
 9902 25ee F11C      		adc r15,__zero_reg__
 9903               	.LVL581:
 9904               	.L385:
 9905               	.LBB2939:
 9906               	.LBB2940:
  18:uart/uart.h   ****     while ( !( USART->STATUS & USART_DREIF_bm) ); 
 9907               		.loc 9 18 0
 9908 25f0 D801      		movw r26,r16
 9909 25f2 1196      		adiw r26,1
 9910 25f4 8C91      		ld r24,X
 9911 25f6 1197      		sbiw r26,1
 9912 25f8 85FF      		sbrs r24,5
 9913 25fa 00C0      		rjmp .L385
  21:uart/uart.h   ****     USART->DATA = c; 
 9914               		.loc 9 21 0
 9915 25fc 81E4      		ldi r24,lo8(65)
 9916 25fe 8C93      		st X,r24
 9917               	.LBE2940:
 9918               	.LBE2939:
  60:sms/sms.h     ****   send_string("Sync");
 9919               		.loc 13 60 0
 9920 2600 80E0      		ldi r24,lo8(.LC14)
 9921 2602 90E0      		ldi r25,hi8(.LC14)
 9922 2604 0E94 0000 		call send_string
 9923               	.LVL582:
 9924               	.LBB2941:
 9925               	.LBB2942:
 9926               		.loc 11 164 0
 9927 2608 8FEF      		 ldi r24,lo8(15999999)
 9928 260a 93E2      	    ldi r25,hi8(15999999)
 9929 260c A4EF      	    ldi r26,hlo8(15999999)
 9930 260e B0E0      	    ldi r27,hhi8(15999999)
 9931 2610 8150      	    1:subi r24,1
 9932 2612 9040      	    sbci r25,0
 9933 2614 A040      	    sbci r26,0
 9934 2616 B040      	    sbci r27,0
 9935 2618 01F4      	    brne 1b
 9936 261a 00C0      		rjmp .
 9937 261c 0000      		nop
 9938               	.LBE2942:
 9939               	.LBE2941:
  63:sms/sms.h     ****   send_uart("AT", USART);
 9940               		.loc 13 63 0
 9941 261e 80E0      		ldi r24,lo8(.LC15)
 9942 2620 90E0      		ldi r25,hi8(.LC15)
 9943 2622 B801      		movw r22,r16
 9944 2624 0E94 0000 		call send_uart
  64:sms/sms.h     ****   send_string("PING");
 9945               		.loc 13 64 0
 9946 2628 80E0      		ldi r24,lo8(.LC16)
 9947 262a 90E0      		ldi r25,hi8(.LC16)
 9948 262c 0E94 0000 		call send_string
 9949               	.LVL583:
 9950               	.LBB2943:
 9951               	.LBB2944:
 9952               		.loc 11 164 0
 9953 2630 8FEF      		 ldi r24,lo8(639999)
 9954 2632 93EC      	    ldi r25,hi8(639999)
 9955 2634 A9E0      	    ldi r26,hlo8(639999)
 9956 2636 8150      	    1:subi r24,1
 9957 2638 9040      	    sbci r25,0
 9958 263a A040      	    sbci r26,0
 9959 263c 01F4      	    brne 1b
 9960 263e 00C0      		rjmp .
 9961 2640 0000      		nop
 9962               	.LVL584:
 9963               	.L386:
 9964               	.LBE2944:
 9965               	.LBE2943:
 9966               	.LBB2945:
 9967               	.LBB2946:
 9968               	.LBB2947:
  30:uart/uart.h   ****     while ( !( USART->STATUS & USART_RXCIF_bm) ); 
 9969               		.loc 9 30 0
 9970 2642 D801      		movw r26,r16
 9971 2644 1196      		adiw r26,1
 9972 2646 8C91      		ld r24,X
 9973 2648 1197      		sbiw r26,1
 9974 264a 87FF      		sbrs r24,7
 9975 264c 00C0      		rjmp .L386
  33:uart/uart.h   ****     return USART->DATA; 
 9976               		.loc 9 33 0
 9977 264e 8C91      		ld r24,X
 9978               	.LBE2947:
 9979               	.LBE2946:
  68:sms/sms.h     ****     s[i] = c;
 9980               		.loc 13 68 0
 9981 2650 F701      		movw r30,r14
 9982 2652 8083      		st Z,r24
 9983               	.LVL585:
 9984               	.LBE2945:
  70:sms/sms.h     ****   s[n] = '\0';
 9985               		.loc 13 70 0
 9986 2654 1182      		std Z+1,__zero_reg__
  72:sms/sms.h     ****   send_string(s);
 9987               		.loc 13 72 0
 9988 2656 C701      		movw r24,r14
 9989 2658 0E94 0000 		call send_string
 9990               	.LVL586:
 9991               	.LBB2948:
 9992               	.LBB2949:
  39:sms/sms.h     ****   send_uart("AT+CMGF=1", USART);
 9993               		.loc 13 39 0
 9994 265c 80E0      		ldi r24,lo8(.LC9)
 9995 265e 90E0      		ldi r25,hi8(.LC9)
 9996 2660 B801      		movw r22,r16
 9997 2662 0E94 0000 		call send_uart
 9998               	.LBE2949:
 9999               	.LBE2948:
  77:sms/sms.h     ****   send_string("Text Mode");
 10000               		.loc 13 77 0
 10001 2666 80E0      		ldi r24,lo8(.LC17)
 10002 2668 90E0      		ldi r25,hi8(.LC17)
 10003 266a 0E94 0000 		call send_string
 10004               	.LVL587:
 10005               	.LBB2950:
 10006               	.LBB2951:
 10007               		.loc 11 164 0
 10008 266e 8FEF      		 ldi r24,lo8(5119999)
 10009 2670 9FE1      	    ldi r25,hi8(5119999)
 10010 2672 AEE4      	    ldi r26,hlo8(5119999)
 10011 2674 8150      	    1:subi r24,1
 10012 2676 9040      	    sbci r25,0
 10013 2678 A040      	    sbci r26,0
 10014 267a 01F4      	    brne 1b
 10015 267c 00C0      		rjmp .
 10016 267e 0000      		nop
 10017               	.LBE2951:
 10018               	.LBE2950:
  84:sms/sms.h     ****   send_uart("AT+CMGF=?", USART); // Read Message 
 10019               		.loc 13 84 0
 10020 2680 80E0      		ldi r24,lo8(.LC18)
 10021 2682 90E0      		ldi r25,hi8(.LC18)
 10022 2684 B801      		movw r22,r16
 10023 2686 0E94 0000 		call send_uart
  85:sms/sms.h     ****   send_string("Check Mode");
 10024               		.loc 13 85 0
 10025 268a 80E0      		ldi r24,lo8(.LC19)
 10026 268c 90E0      		ldi r25,hi8(.LC19)
 10027 268e 0E94 0000 		call send_string
 10028               	.LVL588:
 10029               	.LBB2952:
 10030               	.LBB2953:
 10031               		.loc 11 164 0
 10032 2692 8FEF      		 ldi r24,lo8(6399999)
 10033 2694 97EA      	    ldi r25,hi8(6399999)
 10034 2696 A1E6      	    ldi r26,hlo8(6399999)
 10035 2698 8150      	    1:subi r24,1
 10036 269a 9040      	    sbci r25,0
 10037 269c A040      	    sbci r26,0
 10038 269e 01F4      	    brne 1b
 10039 26a0 00C0      		rjmp .
 10040 26a2 0000      		nop
 10041               	.LBE2953:
 10042               	.LBE2952:
 10043               		.loc 13 87 0
 10044 26a4 CDBE      		out __SP_L__,r12
 10045 26a6 DEBE      		out __SP_H__,r13
 10046               	/* epilogue start */
 10047 26a8 DF91      		pop r29
 10048 26aa CF91      		pop r28
 10049 26ac 1F91      		pop r17
 10050 26ae 0F91      		pop r16
 10051               	.LVL589:
 10052 26b0 FF90      		pop r15
 10053 26b2 EF90      		pop r14
 10054               	.LVL590:
 10055 26b4 DF90      		pop r13
 10056 26b6 CF90      		pop r12
 10057               	.LVL591:
 10058 26b8 0895      		ret
 10059               		.cfi_endproc
 10060               	.LFE80:
 10062               		.section	.text.startup,"ax",@progbits
 10063               	.global	main
 10065               	main:
 10066               	.LFB81:
  21:main.c        **** int main(void){
 10067               		.loc 6 21 0
 10068               		.cfi_startproc
 10069               	/* prologue: function */
 10070               	/* frame size = 0 */
 10071               	/* stack size = 0 */
 10072               	.L__stack_usage = 0
  24:main.c        **** 	USB_ConfigureClock();
 10073               		.loc 6 24 0
 10074 0000 0E94 0000 		call USB_ConfigureClock
  25:main.c        **** 	USB_Init();
 10075               		.loc 6 25 0
 10076 0004 0E94 0000 		call USB_Init
  26:main.c        **** 	USB.INTCTRLA = USB_BUSEVIE_bm | USB_INTLVL_MED_gc;
 10077               		.loc 6 26 0
 10078 0008 E0EC      		ldi r30,lo8(1216)
 10079 000a F4E0      		ldi r31,hi8(1216)
 10080 000c 82E4      		ldi r24,lo8(66)
 10081 000e 8087      		std Z+8,r24
  27:main.c        **** 	USB.INTCTRLB = USB_TRNIE_bm | USB_SETUPIE_bm;
 10082               		.loc 6 27 0
 10083 0010 83E0      		ldi r24,lo8(3)
 10084 0012 8187      		std Z+9,r24
  28:main.c        **** 	PMIC.CTRL = PMIC_LOLVLEN_bm | PMIC_MEDLVLEN_bm;
 10085               		.loc 6 28 0
 10086 0014 E0EA      		ldi r30,lo8(160)
 10087 0016 F0E0      		ldi r31,hi8(160)
 10088 0018 8283      		std Z+2,r24
  29:main.c        **** 	sei();
 10089               		.loc 6 29 0
 10090               	/* #APP */
 10091               	 ;  29 "main.c" 1
 10092 001a 7894      		sei
 10093               	 ;  0 "" 2
  33:main.c        **** 		gps_init();
 10094               		.loc 6 33 0
 10095               	/* #NOAPP */
 10096 001c 0E94 0000 		call gps_init
 10097               	.LVL592:
 10098               	.LBB3042:
 10099               	.LBB3043:
 10100               	.LBB3044:
 10101               	.LBB3045:
 110:usb/usb_pipe.h **** 	p->data->flush = 1;
 10102               		.loc 2 110 0
 10103 0020 81E0      		ldi r24,lo8(1)
 10104 0022 8093 0000 		sts ep_in_data+1,r24
 10105               	.LVL593:
 10106               	.LBB3046:
 10107               	.LBB3047:
 10108               	.LBB3048:
  80:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 10109               		.loc 2 80 0
 10110 0026 2FB7      		in r18,__SREG__
 10111               	.LVL594:
 10112               	.LBB3049:
 10113               	.LBB3050:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 10114               		.loc 3 50 0
 10115               	/* #APP */
 10116               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 10117 0028 F894      		cli
 10118               	 ;  0 "" 2
 10119               	.LVL595:
 10120               	/* #NOAPP */
 10121               	.LBE3050:
 10122               	.LBE3049:
 10123               	.LBB3051:
 10124               	.LBB3052:
 220:usb/usb.h     **** 	return e->STATUS & (USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 10125               		.loc 5 220 0
 10126 002a 8091 0000 		lds r24,endpoints+24
 10127 002e 8670      		andi r24,lo8(6)
 10128               	.LBE3052:
 10129               	.LBE3051:
  82:usb/usb_pipe.h **** 			if (USB_ep_ready(p->ep)){
 10130               		.loc 2 82 0
 10131 0030 01F4      		brne .+2
 10132 0032 00C0      		rjmp .L415
 10133               	.LBB3053:
 10134               	.LBB3054:
  51:usb/pipe.h    **** 	return pipe->data->count - pipe->reserve_read;
 10135               		.loc 4 51 0
 10136 0034 3091 0000 		lds r19,ep_in_pipe_data+4
 10137               	.LBE3054:
 10138               	.LBE3053:
  83:usb/usb_pipe.h **** 				if (pipe_can_read(p->pipe) >= 1){
 10139               		.loc 2 83 0
 10140 0038 1316      		cp __zero_reg__,r19
 10141 003a 04F0      		brlt .+2
 10142 003c 00C0      		rjmp .L391
 10143               	.LBB3055:
 10144               	.LBB3056:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 10145               		.loc 4 62 0
 10146 003e 8091 0000 		lds r24,ep_in_pipe_data
 10147 0042 9091 0000 		lds r25,ep_in_pipe_data+1
 10148               	.LVL596:
 10149               	.LBE3056:
 10150               	.LBE3055:
 10151               	.LBB3057:
 10152               	.LBB3058:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 10153               		.loc 2 68 0
 10154 0046 4091 0000 		lds r20,ep_in_data
 10155               	.LVL597:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 10156               		.loc 2 69 0
 10157 004a 51E0      		ldi r21,lo8(1)
 10158 004c 4130      		cpi r20,lo8(1)
 10159 004e 01F4      		brne .L392
 10160 0050 50E0      		ldi r21,lo8(0)
 10161               	.L392:
 10162 0052 5093 0000 		sts ep_in_data,r21
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 10163               		.loc 2 72 0
 10164 0056 4423      		tst r20
 10165 0058 01F0      		breq .+2
 10166 005a 00C0      		rjmp .L393
 10167               	.LVL598:
 10168               	.LBB3059:
 10169               	.LBB3060:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10170               		.loc 5 168 0
 10171 005c 8093 0000 		sts endpoints+28,r24
 10172 0060 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10173               		.loc 5 169 0
 10174 0064 40E4      		ldi r20,lo8(64)
 10175 0066 50E0      		ldi r21,hi8(64)
 10176 0068 4093 0000 		sts endpoints+26,r20
 10177 006c 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 10178               		.loc 5 174 0
 10179 0070 E0E0      		ldi r30,lo8(endpoints+24)
 10180 0072 F0E0      		ldi r31,hi8(endpoints+24)
 10181               	/* #APP */
 10182               	 ;  174 "usb/usb.h" 1
 10183 0074 02E2      		ldi r16, 34
 10184 0076 0693      		.dc.w 0x9306
 10185               		
 10186               	 ;  0 "" 2
 10187               	.LVL599:
 10188               	/* #NOAPP */
 10189               	.L394:
 10190               	.LBE3060:
 10191               	.LBE3059:
 10192               	.LBE3058:
 10193               	.LBE3057:
 10194               	.LBB3064:
 10195               	.LBB3065:
  72:usb/pipe.h    **** 	pipe->data->count -= 1;
 10196               		.loc 4 72 0
 10197 0078 3150      		subi r19,lo8(-(-1))
 10198 007a 3093 0000 		sts ep_in_pipe_data+4,r19
  73:usb/pipe.h    **** 	pipe->data->read_ptr += pipe->size;
 10199               		.loc 4 73 0
 10200 007e 805C      		subi r24,lo8(-(64))
 10201 0080 9F4F      		sbci r25,hi8(-(64))
 10202 0082 8093 0000 		sts ep_in_pipe_data,r24
 10203 0086 9093 0000 		sts ep_in_pipe_data+1,r25
  75:usb/pipe.h    **** 	if (pipe->data->read_ptr == &pipe->buffer[pipe->slots*pipe->size])
 10204               		.loc 4 75 0
 10205 008a 30E0      		ldi r19,hi8(ep_in_pipe_buffer+512)
 10206 008c 8030      		cpi r24,lo8(ep_in_pipe_buffer+512)
 10207 008e 9307      		cpc r25,r19
 10208 0090 01F4      		brne .+2
 10209 0092 00C0      		rjmp .L412
 10210               	.LVL600:
 10211               	.L416:
 10212 0094 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 10213 0096 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 10214               	.LVL601:
 10215               	.L390:
 10216               	.LBE3065:
 10217               	.LBE3064:
 10218               	.LBB3067:
 10219               	.LBB3068:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 10220               		.loc 3 70 0
 10221 0098 2FBF      		out __SREG__,r18
 10222               		.loc 3 71 0
 10223               	.LBE3068:
 10224               	.LBE3067:
 10225               	.LBE3048:
 10226               	.LBE3047:
 10227               	.LBE3046:
 10228               	.LBE3045:
 10229               	.LBE3044:
  27:Framework.h   ****     USB.INTFLAGSBSET = USB_TRNIF_bm;
 10230               		.loc 1 27 0
 10231 009a 22E0      		ldi r18,lo8(2)
 10232               	.LVL602:
 10233 009c A0EC      		ldi r26,lo8(1216)
 10234 009e B4E0      		ldi r27,hi8(1216)
 10235 00a0 1D96      		adiw r26,13
 10236 00a2 2C93      		st X,r18
 10237 00a4 1D97      		sbiw r26,13
 10238               	.LBB3090:
 10239               	.LBB3091:
 10240               	.LBB3092:
 10241               	.LBB3093:
 10242               	.LBB3094:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 10243               		.loc 4 57 0
 10244 00a6 36E0      		ldi r19,lo8(6)
 10245               	.L399:
 10246               	.LVL603:
 10247               	.LBE3094:
 10248               	.LBE3093:
 123:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 10249               		.loc 2 123 0
 10250 00a8 4FB7      		in r20,__SREG__
 10251               	.LVL604:
 10252               	.LBB3096:
 10253               	.LBB3097:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 10254               		.loc 3 50 0
 10255               	/* #APP */
 10256               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 10257 00aa F894      		cli
 10258               	 ;  0 "" 2
 10259               	.LVL605:
 10260               	/* #NOAPP */
 10261               	.LBE3097:
 10262               	.LBE3096:
 124:usb/usb_pipe.h **** 		if (p->features&PIPE_ENABLE_FLUSH && p->data->flush){
 10263               		.loc 2 124 0
 10264 00ac 2091 0000 		lds r18,ep_in_data+1
 10265 00b0 2223      		tst r18
 10266 00b2 01F4      		brne .+2
 10267 00b4 00C0      		rjmp .L417
 10268               	.L405:
 125:usb/usb_pipe.h **** 			r = false;
 10269               		.loc 2 125 0
 10270 00b6 20E0      		ldi r18,lo8(0)
 10271               	.L401:
 10272               	.LBB3098:
 10273               	.LBB3099:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 10274               		.loc 3 70 0
 10275 00b8 4FBF      		out __SREG__,r20
 10276               		.loc 3 71 0
 10277               	.LBE3099:
 10278               	.LBE3098:
 10279               	.LBE3092:
 10280               	.LBE3091:
 10281               	.LBE3090:
  28:Framework.h   ****     while (!usb_pipe_can_write(&ep_in)){
 10282               		.loc 1 28 0
 10283 00ba 2223      		tst r18
 10284 00bc 01F4      		brne .L400
  29:Framework.h   ****         if (timeout_or_sampling_no_longer_enabled){
 10285               		.loc 1 29 0
 10286 00be 2091 0000 		lds r18,timeout_or_sampling_no_longer_enabled
 10287 00c2 2223      		tst r18
 10288 00c4 01F0      		breq .L399
 10289               	.LVL606:
 10290               	.LBB3103:
 10291               	.LBB3104:
 10292               	.LBB3105:
  54:usb/usb_pipe.h **** 	ATOMIC_BLOCK(PIPE_ATOMIC){
 10293               		.loc 2 54 0
 10294 00c6 2FB7      		in r18,__SREG__
 10295               	.LVL607:
 10296               	.LBB3106:
 10297               	.LBB3107:
  50:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     cli();
 10298               		.loc 3 50 0
 10299               	/* #APP */
 10300               	 ;  50 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h" 1
 10301 00c8 F894      		cli
 10302               	 ;  0 "" 2
 10303               	.LVL608:
 10304               	/* #NOAPP */
 10305               	.LBE3107:
 10306               	.LBE3106:
 10307               	.LBB3108:
 10308               	.LBB3109:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 10309               		.loc 4 90 0
 10310 00ca 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 10311               		.loc 4 91 0
 10312 00ce 8093 0000 		sts ep_in_pipe_data+2,r24
 10313 00d2 9093 0000 		sts ep_in_pipe_data+2+1,r25
 10314 00d6 8093 0000 		sts ep_in_pipe_data,r24
 10315 00da 9093 0000 		sts ep_in_pipe_data+1,r25
 10316               	.LVL609:
 10317               	.LBE3109:
 10318               	.LBE3108:
 10319               	.LBB3110:
 10320               	.LBB3111:
 158:usb/usb.h     **** 		LASR16(&e->STATUS, USB_EP_BUSNACK0_bm | USB_EP_BUSNACK1_bm);
 10321               		.loc 5 158 0
 10322               	/* #APP */
 10323               	 ;  158 "usb/usb.h" 1
 10324 00de 06E0      		ldi r16, 6
 10325 00e0 0593      		.dc.w 0x9305
 10326               		
 10327               	 ;  0 "" 2
 159:usb/usb.h     **** 		LACR16(&e->STATUS, USB_EP_BANK_bm);
 10328               		.loc 5 159 0
 10329               	 ;  159 "usb/usb.h" 1
 10330 00e2 08E0      		ldi r16, 8
 10331 00e4 0693      		.dc.w 0x9306
 10332               		
 10333               	 ;  0 "" 2
 10334               	/* #NOAPP */
 10335               	.LBE3111:
 10336               	.LBE3110:
  57:usb/usb_pipe.h **** 		p->data->flush = 0;
 10337               		.loc 2 57 0
 10338 00e6 1092 0000 		sts ep_in_data+1,__zero_reg__
  58:usb/usb_pipe.h **** 		p->data->packet_offset = 0;
 10339               		.loc 2 58 0
 10340 00ea 1092 0000 		sts ep_in_data+2,__zero_reg__
 10341 00ee 1092 0000 		sts ep_in_data+2+1,__zero_reg__
  59:usb/usb_pipe.h **** 		p->data->bank = 0;
 10342               		.loc 2 59 0
 10343 00f2 1092 0000 		sts ep_in_data,__zero_reg__
 10344               	.LVL610:
 10345               	.LBB3112:
 10346               	.LBB3113:
  70:/usr/lib/gcc/avr/4.6.2/../../../avr/include/util/atomic.h ****     SREG = *__s;
 10347               		.loc 3 70 0
 10348 00f6 2FBF      		out __SREG__,r18
 10349               		.loc 3 71 0
 10350               	.LVL611:
 10351               	.L400:
 10352               	.LBE3113:
 10353               	.LBE3112:
 10354               	.LBE3105:
 10355               	.LBE3104:
 10356               	.LBE3103:
 10357               	.LBE3043:
 10358               	.LBE3042:
  49:main.c        ****   gps_receive();
 10359               		.loc 6 49 0
 10360 00f8 0E94 0000 		call gps_receive
 10361               	.LVL612:
 10362               	.LBB3117:
 10363               	.LBB3118:
  54:gps/gps.h     ****   PORTD.DIRSET |= PIN5_bm;
 10364               		.loc 10 54 0
 10365 00fc E0E6      		ldi r30,lo8(1632)
 10366 00fe F6E0      		ldi r31,hi8(1632)
 10367 0100 8091 6106 		lds r24,1633
 10368 0104 8062      		ori r24,lo8(32)
 10369 0106 8183      		std Z+1,r24
  57:gps/gps.h     ****   PORTD.OUTTGL |= PIN5_bm;
 10370               		.loc 10 57 0
 10371 0108 8091 6706 		lds r24,1639
 10372 010c 8062      		ori r24,lo8(32)
 10373 010e 8783      		std Z+7,r24
 10374               	.LVL613:
 10375               	.LBB3119:
 10376               	.LBB3120:
 10377               		.loc 11 164 0
 10378 0110 8FEF      		 ldi r24,lo8(6399999)
 10379 0112 97EA      	    ldi r25,hi8(6399999)
 10380 0114 A1E6      	    ldi r26,hlo8(6399999)
 10381 0116 8150      	    1:subi r24,1
 10382 0118 9040      	    sbci r25,0
 10383 011a A040      	    sbci r26,0
 10384 011c 01F4      	    brne 1b
 10385 011e 00C0      		rjmp .
 10386 0120 0000      		nop
 10387               	.L404:
 10388 0122 00C0      		rjmp .L404
 10389               	.LVL614:
 10390               	.L417:
 10391               	.LBE3120:
 10392               	.LBE3119:
 10393               	.LBE3118:
 10394               	.LBE3117:
 10395               	.LBB3121:
 10396               	.LBB3116:
 10397               	.LBB3114:
 10398               	.LBB3102:
 10399               	.LBB3101:
 10400               	.LBB3100:
 10401               	.LBB3095:
  57:usb/pipe.h    **** 	return (int8_t)pipe->slots - pipe->data->count - pipe->reserve_write;
 10402               		.loc 4 57 0
 10403 0124 2091 0000 		lds r18,ep_in_pipe_data+4
 10404 0128 532F      		mov r21,r19
 10405 012a 521B      		sub r21,r18
 10406               	.LBE3095:
 10407               	.LBE3100:
 127:usb/usb_pipe.h **** 			r = pipe_can_write(p->pipe) > 0;
 10408               		.loc 2 127 0
 10409 012c 21E0      		ldi r18,lo8(1)
 10410 012e 1516      		cp __zero_reg__,r21
 10411 0130 04F4      		brge .+2
 10412 0132 00C0      		rjmp .L401
 10413 0134 00C0      		rjmp .L405
 10414               	.LVL615:
 10415               	.L391:
 10416               	.LBE3101:
 10417               	.LBE3102:
 10418               	.LBE3114:
 10419               	.LBB3115:
 10420               	.LBB3089:
 10421               	.LBB3088:
 10422               	.LBB3087:
 10423               	.LBB3086:
  87:usb/usb_pipe.h **** 					if (p->data->flush == 1){
 10424               		.loc 2 87 0
 10425 0136 8091 0000 		lds r24,ep_in_data+1
 10426 013a 8130      		cpi r24,lo8(1)
 10427 013c 01F0      		breq .L418
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 10428               		.loc 2 91 0
 10429 013e 8230      		cpi r24,lo8(2)
 10430 0140 01F0      		breq .L413
 10431               	.L415:
 10432 0142 E0E0      		ldi r30,lo8(endpoints+24)
 10433 0144 F0E0      		ldi r31,hi8(endpoints+24)
 10434 0146 00C0      		rjmp .L416
 10435               	.L413:
 10436               	.LVL616:
 10437               	.LBB3069:
 10438               	.LBB3070:
 10439               	.LBB3071:
 228:usb/usb.h     **** 		return (e->STATUS & mask) == mask;
 10440               		.loc 5 228 0
 10441 0148 8091 0000 		lds r24,endpoints+24
 10442 014c 8670      		andi r24,lo8(6)
 10443               	.LBE3071:
 10444               	.LBE3070:
 10445               	.LBE3069:
  91:usb/usb_pipe.h **** 					}else if (p->data->flush == 2 && USB_ep_empty(p->ep)){
 10446               		.loc 2 91 0
 10447 014e 8630      		cpi r24,lo8(6)
 10448 0150 01F4      		brne .L415
  92:usb/usb_pipe.h **** 						p->data->flush = 0;
 10449               		.loc 2 92 0
 10450 0152 1092 0000 		sts ep_in_data+1,__zero_reg__
  93:usb/usb_pipe.h **** 						p->data->packet_offset = 0;
 10451               		.loc 2 93 0
 10452 0156 1092 0000 		sts ep_in_data+2,__zero_reg__
 10453 015a 1092 0000 		sts ep_in_data+2+1,__zero_reg__
 10454               	.LBB3072:
 10455               	.LBB3073:
  90:usb/pipe.h    **** 	pipe->data->count = 0;
 10456               		.loc 4 90 0
 10457 015e 1092 0000 		sts ep_in_pipe_data+4,__zero_reg__
 10458               		.loc 4 91 0
 10459 0162 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 10460 0164 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 10461 0166 8093 0000 		sts ep_in_pipe_data+2,r24
 10462 016a 9093 0000 		sts ep_in_pipe_data+2+1,r25
 10463 016e 8093 0000 		sts ep_in_pipe_data,r24
 10464 0172 9093 0000 		sts ep_in_pipe_data+1,r25
 10465               	.LVL617:
 10466 0176 E0E0      		ldi r30,lo8(endpoints+24)
 10467 0178 F0E0      		ldi r31,hi8(endpoints+24)
 10468 017a 00C0      		rjmp .L390
 10469               	.LVL618:
 10470               	.L418:
 10471               	.LBE3073:
 10472               	.LBE3072:
  88:usb/usb_pipe.h **** 						p->data->flush = 2;
 10473               		.loc 2 88 0
 10474 017c 82E0      		ldi r24,lo8(2)
 10475 017e 8093 0000 		sts ep_in_data+1,r24
 10476               	.LBB3074:
 10477               	.LBB3075:
  62:usb/pipe.h    **** 	return pipe->data->read_ptr;
 10478               		.loc 4 62 0
 10479 0182 6091 0000 		lds r22,ep_in_pipe_data
 10480 0186 3091 0000 		lds r19,ep_in_pipe_data+1
 10481               	.LBE3075:
 10482               	.LBE3074:
  90:usb/usb_pipe.h **** 						_usb_pipe_ep_start(p, pipe_read_ptr(p->pipe), p->data->packet_offset);
 10483               		.loc 2 90 0
 10484 018a 4091 0000 		lds r20,ep_in_data+2
 10485 018e 5091 0000 		lds r21,ep_in_data+2+1
 10486               	.LVL619:
 10487               	.LBB3076:
 10488               	.LBB3077:
  68:usb/usb_pipe.h **** 		bank = p->data->bank;
 10489               		.loc 2 68 0
 10490 0192 8091 0000 		lds r24,ep_in_data
 10491               	.LVL620:
  69:usb/usb_pipe.h **** 		p->data->bank ^= 1;
 10492               		.loc 2 69 0
 10493 0196 91E0      		ldi r25,lo8(1)
 10494 0198 8130      		cpi r24,lo8(1)
 10495 019a 01F4      		brne .L397
 10496 019c 90E0      		ldi r25,lo8(0)
 10497               	.L397:
 10498 019e 9093 0000 		sts ep_in_data,r25
  72:usb/usb_pipe.h **** 	if (bank == 0){ // Helps the optimzer constant-fold, since the multiply is expensive
 10499               		.loc 2 72 0
 10500 01a2 8823      		tst r24
 10501 01a4 01F4      		brne .L398
 10502               	.LVL621:
 10503               	.LBB3078:
 10504               	.LBB3079:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10505               		.loc 5 168 0
 10506 01a6 862F      		mov r24,r22
 10507 01a8 932F      		mov r25,r19
 10508 01aa 8093 0000 		sts endpoints+28,r24
 10509 01ae 9093 0000 		sts endpoints+28+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10510               		.loc 5 169 0
 10511 01b2 4093 0000 		sts endpoints+26,r20
 10512 01b6 5093 0000 		sts endpoints+26+1,r21
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 10513               		.loc 5 174 0
 10514 01ba E0E0      		ldi r30,lo8(endpoints+24)
 10515 01bc F0E0      		ldi r31,hi8(endpoints+24)
 10516               	.LVL622:
 10517               	/* #APP */
 10518               	 ;  174 "usb/usb.h" 1
 10519 01be 02E2      		ldi r16, 34
 10520 01c0 0693      		.dc.w 0x9306
 10521               		
 10522               	 ;  0 "" 2
 10523               	/* #NOAPP */
 10524 01c2 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 10525 01c4 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 10526 01c6 00C0      		rjmp .L390
 10527               	.LVL623:
 10528               	.L412:
 10529               	.LBE3079:
 10530               	.LBE3078:
 10531               	.LBE3077:
 10532               	.LBE3076:
 10533               	.LBB3083:
 10534               	.LBB3066:
  76:usb/pipe.h    **** 		pipe->data->read_ptr = &pipe->buffer[0];
 10535               		.loc 4 76 0
 10536 01c8 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 10537 01ca 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 10538 01cc 8093 0000 		sts ep_in_pipe_data,r24
 10539 01d0 9093 0000 		sts ep_in_pipe_data+1,r25
 10540 01d4 00C0      		rjmp .L390
 10541               	.LVL624:
 10542               	.L393:
 10543               	.LBE3066:
 10544               	.LBE3083:
 10545               	.LBB3084:
 10546               	.LBB3063:
 10547               	.LBB3061:
 10548               	.LBB3062:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10549               		.loc 5 168 0
 10550 01d6 8093 0000 		sts endpoints+20,r24
 10551 01da 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10552               		.loc 5 169 0
 10553 01de 40E4      		ldi r20,lo8(64)
 10554 01e0 50E0      		ldi r21,hi8(64)
 10555 01e2 4093 0000 		sts endpoints+18,r20
 10556 01e6 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 10557               		.loc 5 176 0
 10558 01ea E0E0      		ldi r30,lo8(endpoints+24)
 10559 01ec F0E0      		ldi r31,hi8(endpoints+24)
 10560               	/* #APP */
 10561               	 ;  176 "usb/usb.h" 1
 10562 01ee 04E1      		ldi r16, 20
 10563 01f0 0693      		.dc.w 0x9306
 10564               		
 10565               	 ;  0 "" 2
 10566               	/* #NOAPP */
 10567 01f2 00C0      		rjmp .L394
 10568               	.LVL625:
 10569               	.L398:
 10570               	.LBE3062:
 10571               	.LBE3061:
 10572               	.LBE3063:
 10573               	.LBE3084:
 10574               	.LBB3085:
 10575               	.LBB3082:
 10576               	.LBB3080:
 10577               	.LBB3081:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10578               		.loc 5 168 0
 10579 01f4 862F      		mov r24,r22
 10580               	.LVL626:
 10581 01f6 932F      		mov r25,r19
 10582 01f8 8093 0000 		sts endpoints+20,r24
 10583 01fc 9093 0000 		sts endpoints+20+1,r25
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10584               		.loc 5 169 0
 10585 0200 4093 0000 		sts endpoints+18,r20
 10586 0204 5093 0000 		sts endpoints+18+1,r21
 176:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK1_bm | USB_EP_TRNCOMPL1_bm);
 10587               		.loc 5 176 0
 10588 0208 E0E0      		ldi r30,lo8(endpoints+24)
 10589 020a F0E0      		ldi r31,hi8(endpoints+24)
 10590               	/* #APP */
 10591               	 ;  176 "usb/usb.h" 1
 10592 020c 04E1      		ldi r16, 20
 10593 020e 0693      		.dc.w 0x9306
 10594               		
 10595               	 ;  0 "" 2
 10596               	/* #NOAPP */
 10597 0210 80E0      		ldi r24,lo8(ep_in_pipe_buffer)
 10598 0212 90E0      		ldi r25,hi8(ep_in_pipe_buffer)
 10599 0214 00C0      		rjmp .L390
 10600               	.LBE3081:
 10601               	.LBE3080:
 10602               	.LBE3082:
 10603               	.LBE3085:
 10604               	.LBE3086:
 10605               	.LBE3087:
 10606               	.LBE3088:
 10607               	.LBE3089:
 10608               	.LBE3115:
 10609               	.LBE3116:
 10610               	.LBE3121:
 10611               		.cfi_endproc
 10612               	.LFE81:
 10614               		.text
 10615               	.global	EVENT_USB_Device_ControlRequest
 10617               	EVENT_USB_Device_ControlRequest:
 10618               	.LFB82:
  75:main.c        **** bool EVENT_USB_Device_ControlRequest(USB_Request_Header_t* req){
 10619               		.loc 6 75 0
 10620               		.cfi_startproc
 10621               	.LVL627:
 10622 26ba 0F93      		push r16
 10623               	.LCFI141:
 10624               		.cfi_def_cfa_offset 3
 10625               		.cfi_offset 16, -2
 10626 26bc 1F93      		push r17
 10627               	.LCFI142:
 10628               		.cfi_def_cfa_offset 4
 10629               		.cfi_offset 17, -3
 10630 26be CF93      		push r28
 10631               	.LCFI143:
 10632               		.cfi_def_cfa_offset 5
 10633               		.cfi_offset 28, -4
 10634 26c0 DF93      		push r29
 10635               	.LCFI144:
 10636               		.cfi_def_cfa_offset 6
 10637               		.cfi_offset 29, -5
 10638               	/* prologue: function */
 10639               	/* frame size = 0 */
 10640               	/* stack size = 4 */
 10641               	.L__stack_usage = 4
 10642 26c2 9C01      		movw r18,r24
 10643               	.LVL628:
 135:main.c        **** 	return false;
 10644               		.loc 6 135 0
 10645 26c4 A0E0      		ldi r26,lo8(ep0_buf_in)
 10646 26c6 B0E0      		ldi r27,hi8(ep0_buf_in)
  75:main.c        **** bool EVENT_USB_Device_ControlRequest(USB_Request_Header_t* req){
 10647               		.loc 6 75 0
 10648 26c8 8D01      		movw r16,r26
 10649 26ca 80E0      		ldi r24,lo8(ep0_buf_in+64)
 10650 26cc 90E0      		ldi r25,hi8(ep0_buf_in+64)
 10651               	.LVL629:
 10652 26ce FD01      		movw r30,r26
 10653               	.LVL630:
 10654               	.L420:
 10655               	.LBB3122:
  77:main.c        **** 	for (uint8_t i = 0; i < 64; i++) ep0_buf_in[i] = 0;
 10656               		.loc 6 77 0 discriminator 2
 10657 26d0 1192      		st Z+,__zero_reg__
 10658 26d2 40E0      		ldi r20,hi8(ep0_buf_in+64)
 10659 26d4 E030      		cpi r30,lo8(ep0_buf_in+64)
 10660 26d6 F407      		cpc r31,r20
 10661 26d8 01F4      		brne .L420
 10662               	.LBE3122:
  78:main.c        **** 	usb_cmd = 0;
 10663               		.loc 6 78 0
 10664 26da 1092 0000 		sts usb_cmd,__zero_reg__
  79:main.c        **** 	if ((req->bmRequestType & CONTROL_REQTYPE_TYPE) == REQTYPE_VENDOR){
 10665               		.loc 6 79 0
 10666 26de F901      		movw r30,r18
 10667 26e0 C081      		ld r28,Z
 10668 26e2 D0E0      		ldi r29,lo8(0)
 10669 26e4 C076      		andi r28,lo8(96)
 10670 26e6 D070      		andi r29,hi8(96)
 10671 26e8 C034      		cpi r28,64
 10672 26ea D105      		cpc r29,__zero_reg__
 10673 26ec 01F0      		breq .L444
 10674               	.L438:
 135:main.c        **** 	return false;
 10675               		.loc 6 135 0
 10676 26ee 80E0      		ldi r24,lo8(0)
 10677               	.LVL631:
 10678               	.L421:
 10679               	/* epilogue start */
 136:main.c        **** }
 10680               		.loc 6 136 0
 10681 26f0 DF91      		pop r29
 10682 26f2 CF91      		pop r28
 10683 26f4 1F91      		pop r17
 10684 26f6 0F91      		pop r16
 10685 26f8 0895      		ret
 10686               	.LVL632:
 10687               	.L444:
  80:main.c        **** 		switch(req->bRequest){
 10688               		.loc 6 80 0
 10689 26fa 4181      		ldd r20,Z+1
 10690 26fc 4631      		cpi r20,lo8(22)
 10691 26fe 01F4      		brne .+2
 10692 2700 00C0      		rjmp .L426
 10693 2702 4731      		cpi r20,lo8(23)
 10694 2704 00F0      		brlo .L445
 10695 2706 4B3B      		cpi r20,lo8(-69)
 10696 2708 01F4      		brne .+2
 10697 270a 00C0      		rjmp .L428
 10698 270c 4C3B      		cpi r20,lo8(-68)
 10699 270e 00F0      		brlo .+2
 10700 2710 00C0      		rjmp .L433
 10701 2712 4731      		cpi r20,lo8(23)
 10702 2714 01F4      		brne .L438
 10703               	.LBB3123:
 111:main.c        **** 				addr = (uint16_t *) req->wIndex;
 10704               		.loc 6 111 0
 10705 2716 0480      		ldd __tmp_reg__,Z+4
 10706 2718 F581      		ldd r31,Z+5
 10707 271a E02D      		mov r30,__tmp_reg__
 10708               	.LVL633:
 112:main.c        **** 				ep0_buf_in[0] = *addr & 0xFF;
 10709               		.loc 6 112 0
 10710 271c 8081      		ld r24,Z
 10711 271e 8093 0000 		sts ep0_buf_in,r24
 113:main.c        **** 				ep0_buf_in[1] = *addr >> 8;
 10712               		.loc 6 113 0
 10713 2722 8181      		ldd r24,Z+1
 10714 2724 8093 0000 		sts ep0_buf_in+1,r24
 10715               	.LVL634:
 10716               	.LBB3124:
 10717               	.LBB3125:
 10718               	.LBB3126:
 10719               	.LBB3127:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10720               		.loc 5 168 0
 10721 2728 0093 0000 		sts endpoints+12,r16
 10722 272c 1093 0000 		sts endpoints+12+1,r17
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10723               		.loc 5 169 0
 10724 2730 82E0      		ldi r24,lo8(2)
 10725 2732 90E0      		ldi r25,hi8(2)
 10726 2734 8093 0000 		sts endpoints+10,r24
 10727 2738 9093 0000 		sts endpoints+10+1,r25
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 10728               		.loc 5 174 0
 10729 273c E0E0      		ldi r30,lo8(endpoints+8)
 10730 273e F0E0      		ldi r31,hi8(endpoints+8)
 10731               	/* #APP */
 10732               	 ;  174 "usb/usb.h" 1
 10733 2740 02E2      		ldi r16, 34
 10734 2742 0693      		.dc.w 0x9306
 10735               		
 10736               	 ;  0 "" 2
 10737               	/* #NOAPP */
 10738               	.LBE3127:
 10739               	.LBE3126:
 10740               	.LBE3125:
 10741               	.LBE3124:
 10742               	.LBE3123:
 115:main.c        **** 				return true;
 10743               		.loc 6 115 0
 10744 2744 81E0      		ldi r24,lo8(1)
 10745 2746 00C0      		rjmp .L421
 10746               	.LVL635:
 10747               	.L445:
  80:main.c        **** 		switch(req->bRequest){
 10748               		.loc 6 80 0
 10749 2748 4230      		cpi r20,lo8(2)
 10750 274a 01F4      		brne .+2
 10751 274c 00C0      		rjmp .L423
 10752 274e 4330      		cpi r20,lo8(3)
 10753 2750 00F4      		brsh .L432
 10754 2752 4423      		tst r20
 10755 2754 01F4      		brne .L438
  82:main.c        **** 				if (req->wIndex == 0){
 10756               		.loc 6 82 0
 10757 2756 8481      		ldd r24,Z+4
 10758 2758 9581      		ldd r25,Z+5
 10759 275a 0097      		sbiw r24,0
 10760 275c 01F4      		brne .+2
 10761 275e 00C0      		rjmp .L446
  84:main.c        **** 				}else if (req->wIndex == 1){
 10762               		.loc 6 84 0
 10763 2760 8130      		cpi r24,1
 10764 2762 9105      		cpc r25,__zero_reg__
 10765 2764 01F4      		brne .+2
 10766 2766 00C0      		rjmp .L447
  87:main.c        **** 				return true;
 10767               		.loc 6 87 0
 10768 2768 81E0      		ldi r24,lo8(1)
 10769 276a 00C0      		rjmp .L421
 10770               	.L432:
  80:main.c        **** 		switch(req->bRequest){
 10771               		.loc 6 80 0
 10772 276c 4830      		cpi r20,lo8(8)
 10773 276e 01F0      		breq .L424
 10774 2770 4930      		cpi r20,lo8(9)
 10775 2772 01F0      		breq .+2
 10776 2774 00C0      		rjmp .L438
 102:main.c        **** 				ep0_buf_in[0] = * ((uint8_t *) req->wIndex);
 10777               		.loc 6 102 0
 10778 2776 0480      		ldd __tmp_reg__,Z+4
 10779 2778 F581      		ldd r31,Z+5
 10780 277a E02D      		mov r30,__tmp_reg__
 10781 277c 8081      		ld r24,Z
 10782 277e 8093 0000 		sts ep0_buf_in,r24
 10783               	.LVL636:
 10784               	.LBB3128:
 10785               	.LBB3129:
 10786               	.LBB3130:
 10787               	.LBB3131:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10788               		.loc 5 168 0
 10789 2782 0093 0000 		sts endpoints+12,r16
 10790 2786 1093 0000 		sts endpoints+12+1,r17
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10791               		.loc 5 169 0
 10792 278a 81E0      		ldi r24,lo8(1)
 10793 278c 90E0      		ldi r25,hi8(1)
 10794 278e 8093 0000 		sts endpoints+10,r24
 10795 2792 9093 0000 		sts endpoints+10+1,r25
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 10796               		.loc 5 174 0
 10797 2796 E0E0      		ldi r30,lo8(endpoints+8)
 10798 2798 F0E0      		ldi r31,hi8(endpoints+8)
 10799               	.LVL637:
 10800               	/* #APP */
 10801               	 ;  174 "usb/usb.h" 1
 10802 279a 02E2      		ldi r16, 34
 10803 279c 0693      		.dc.w 0x9306
 10804               		
 10805               	 ;  0 "" 2
 10806               	/* #NOAPP */
 10807               	.LBE3131:
 10808               	.LBE3130:
 10809               	.LBE3129:
 10810               	.LBE3128:
 104:main.c        **** 				return true;
 10811               		.loc 6 104 0
 10812 279e 81E0      		ldi r24,lo8(1)
 10813 27a0 00C0      		rjmp .L421
 10814               	.LVL638:
 10815               	.L433:
  80:main.c        **** 		switch(req->bRequest){
 10816               		.loc 6 80 0
 10817 27a2 403E      		cpi r20,lo8(-32)
 10818 27a4 01F0      		breq .L429
 10819 27a6 413E      		cpi r20,lo8(-31)
 10820 27a8 01F0      		breq .+2
 10821 27aa 00C0      		rjmp .L438
 124:main.c        **** 				usb_cmd = req->bRequest;
 10822               		.loc 6 124 0
 10823 27ac 4093 0000 		sts usb_cmd,r20
 125:main.c        **** 				cmd_data = req->wIndex;
 10824               		.loc 6 125 0
 10825 27b0 8481      		ldd r24,Z+4
 10826 27b2 8093 0000 		sts cmd_data,r24
 10827               	.LVL639:
 10828               	.L443:
 10829               	.LBB3132:
 10830               	.LBB3133:
 10831               	.LBB3134:
 10832               	.LBB3135:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10833               		.loc 5 168 0
 10834 27b6 0093 0000 		sts endpoints+12,r16
 10835 27ba 1093 0000 		sts endpoints+12+1,r17
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10836               		.loc 5 169 0
 10837 27be 1092 0000 		sts endpoints+10,__zero_reg__
 10838 27c2 1092 0000 		sts endpoints+10+1,__zero_reg__
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 10839               		.loc 5 174 0
 10840 27c6 E0E0      		ldi r30,lo8(endpoints+8)
 10841 27c8 F0E0      		ldi r31,hi8(endpoints+8)
 10842               	.LVL640:
 10843               	/* #APP */
 10844               	 ;  174 "usb/usb.h" 1
 10845 27ca 02E2      		ldi r16, 34
 10846 27cc 0693      		.dc.w 0x9306
 10847               		
 10848               	 ;  0 "" 2
 10849               	/* #NOAPP */
 10850               	.LBE3135:
 10851               	.LBE3134:
 10852               	.LBE3133:
 10853               	.LBE3132:
 108:main.c        **** 				return true;
 10854               		.loc 6 108 0
 10855 27ce 81E0      		ldi r24,lo8(1)
 10856               	/* epilogue start */
 136:main.c        **** }
 10857               		.loc 6 136 0
 10858 27d0 DF91      		pop r29
 10859 27d2 CF91      		pop r28
 10860 27d4 1F91      		pop r17
 10861 27d6 0F91      		pop r16
 10862 27d8 0895      		ret
 10863               	.LVL641:
 10864               	.L424:
  98:main.c        **** 				* ((uint8_t *) req->wIndex) = req->wValue;
 10865               		.loc 6 98 0
 10866 27da D901      		movw r26,r18
 10867 27dc 0480      		ldd __tmp_reg__,Z+4
 10868 27de F581      		ldd r31,Z+5
 10869 27e0 E02D      		mov r30,__tmp_reg__
 10870 27e2 1296      		adiw r26,2
 10871 27e4 8C91      		ld r24,X
 10872 27e6 1297      		sbiw r26,2
 10873 27e8 8083      		st Z,r24
 10874               	.LVL642:
 10875 27ea 00C0      		rjmp .L443
 10876               	.LVL643:
 10877               	.L429:
 118:main.c        **** 				eeprom_read_block(ep0_buf_in, (void*)(req->wIndex*64), 64);
 10878               		.loc 6 118 0
 10879 27ec F901      		movw r30,r18
 10880 27ee 6481      		ldd r22,Z+4
 10881 27f0 7581      		ldd r23,Z+5
 10882 27f2 0024      		clr __tmp_reg__
 10883 27f4 7695      		lsr r23
 10884 27f6 6795      		ror r22
 10885 27f8 0794      		ror __tmp_reg__
 10886 27fa 7695      		lsr r23
 10887 27fc 6795      		ror r22
 10888 27fe 0794      		ror __tmp_reg__
 10889 2800 762F      		mov r23,r22
 10890 2802 602D      		mov r22,__tmp_reg__
 10891 2804 80E0      		ldi r24,lo8(ep0_buf_in)
 10892 2806 90E0      		ldi r25,hi8(ep0_buf_in)
 10893 2808 40E4      		ldi r20,lo8(64)
 10894 280a 50E0      		ldi r21,hi8(64)
 10895 280c 0E94 0000 		call __eerd_block_x32a4u
 10896               	.LVL644:
 10897               	.LBB3136:
 10898               	.LBB3137:
 10899               	.LBB3138:
 10900               	.LBB3139:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10901               		.loc 5 168 0
 10902 2810 0093 0000 		sts endpoints+12,r16
 10903 2814 1093 0000 		sts endpoints+12+1,r17
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10904               		.loc 5 169 0
 10905 2818 C093 0000 		sts endpoints+10,r28
 10906 281c D093 0000 		sts endpoints+10+1,r29
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 10907               		.loc 5 174 0
 10908 2820 E0E0      		ldi r30,lo8(endpoints+8)
 10909 2822 F0E0      		ldi r31,hi8(endpoints+8)
 10910               	.LVL645:
 10911               	/* #APP */
 10912               	 ;  174 "usb/usb.h" 1
 10913 2824 02E2      		ldi r16, 34
 10914 2826 0693      		.dc.w 0x9306
 10915               		
 10916               	 ;  0 "" 2
 10917               	/* #NOAPP */
 10918               	.LBE3139:
 10919               	.LBE3138:
 10920               	.LBE3137:
 10921               	.LBE3136:
 120:main.c        **** 				return true;
 10922               		.loc 6 120 0
 10923 2828 81E0      		ldi r24,lo8(1)
 10924 282a 00C0      		rjmp .L421
 10925               	.LVL646:
 10926               	.L428:
 10927               	.LBB3140:
 10928               	.LBB3141:
 330:usb/usb.h     **** 		USB_ep0_enableOut();
 331:usb/usb.h     **** 	}
 332:usb/usb.h     **** }
 333:usb/usb.h     **** 
 334:usb/usb.h     **** static inline void USB_enter_bootloader(void){
 335:usb/usb.h     **** 	cli();
 10929               		.loc 5 335 0
 10930               	/* #APP */
 10931               	 ;  335 "usb/usb.h" 1
 10932 282c F894      		cli
 10933               	 ;  0 "" 2
 10934               	.LVL647:
 10935               	/* #NOAPP */
 10936               	.LBB3142:
 10937               	.LBB3143:
 10938               	.LBB3144:
 10939               	.LBB3145:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 10940               		.loc 5 168 0
 10941 282e 0093 0000 		sts endpoints+12,r16
 10942 2832 1093 0000 		sts endpoints+12+1,r17
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 10943               		.loc 5 169 0
 10944 2836 1092 0000 		sts endpoints+10,__zero_reg__
 10945 283a 1092 0000 		sts endpoints+10+1,__zero_reg__
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 10946               		.loc 5 174 0
 10947 283e E0E0      		ldi r30,lo8(endpoints+8)
 10948 2840 F0E0      		ldi r31,hi8(endpoints+8)
 10949               	.LVL648:
 10950               	/* #APP */
 10951               	 ;  174 "usb/usb.h" 1
 10952 2842 02E2      		ldi r16, 34
 10953 2844 0693      		.dc.w 0x9306
 10954               		
 10955               	 ;  0 "" 2
 10956               	/* #NOAPP */
 10957               	.LBE3145:
 10958               	.LBE3144:
 10959               	.LBE3143:
 10960               	.LBE3142:
 10961               	.LBB3146:
 10962               	.LBB3147:
 280:usb/usb.h     **** 	LACR16(&endpoints[0].out.STATUS, USB_EP_SETUP_bm | USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm | USB_
 10963               		.loc 5 280 0
 10964 2846 3897      		sbiw r30,8
 10965               	.LVL649:
 10966               	/* #APP */
 10967               	 ;  280 "usb/usb.h" 1
 10968 2848 02E7      		ldi r16, 114
 10969 284a 0693      		.dc.w 0x9306
 10970               		
 10971               	 ;  0 "" 2
 10972               	.LVL650:
 10973               	/* #NOAPP */
 10974               	.L436:
 10975               	.LBE3147:
 10976               	.LBE3146:
 10977               	.LBB3148:
 10978               	.LBB3149:
 10979               	.LBB3150:
 10980               	.LBB3151:
 202:usb/usb.h     **** 		return e->STATUS & USB_EP_TRNCOMPL0_bm;
 10981               		.loc 5 202 0
 10982 284c 8091 0000 		lds r24,endpoints
 10983               	.LBE3151:
 10984               	.LBE3150:
 253:usb/usb.h     **** 	while (!USB_ep_done(ep)){};
 10985               		.loc 5 253 0
 10986 2850 85FF      		sbrs r24,5
 10987 2852 00C0      		rjmp .L436
 10988               	.LVL651:
 10989               	.LBE3149:
 10990               	.LBE3148:
 10991               	.LBB3152:
 10992               	.LBB3153:
 10993               		.loc 11 164 0
 10994 2854 8FEF      		 ldi r24,lo8(63999)
 10995 2856 99EF      	    ldi r25,hi8(63999)
 10996 2858 A0E0      	    ldi r26,hlo8(63999)
 10997 285a 8150      	    1:subi r24,1
 10998 285c 9040      	    sbci r25,0
 10999 285e A040      	    sbci r26,0
 11000 2860 01F4      	    brne 1b
 11001 2862 00C0      		rjmp .
 11002 2864 0000      		nop
 11003               	.LBE3153:
 11004               	.LBE3152:
 11005               	.LBB3154:
 11006               	.LBB3155:
 296:usb/usb.h     **** 	USB.CTRLB &= ~USB_ATTACH_bm;
 11007               		.loc 5 296 0
 11008 2866 8091 C104 		lds r24,1217
 11009 286a 8E7F      		andi r24,lo8(-2)
 11010 286c E0EC      		ldi r30,lo8(1216)
 11011 286e F4E0      		ldi r31,hi8(1216)
 11012               	.LVL652:
 11013 2870 8183      		std Z+1,r24
 11014               	.LVL653:
 11015               	.LBE3155:
 11016               	.LBE3154:
 11017               	.LBB3156:
 11018               	.LBB3157:
 11019               		.loc 11 164 0
 11020 2872 8FEF      		 ldi r24,lo8(639999)
 11021 2874 93EC      	    ldi r25,hi8(639999)
 11022 2876 A9E0      	    ldi r26,hlo8(639999)
 11023 2878 8150      	    1:subi r24,1
 11024 287a 9040      	    sbci r25,0
 11025 287c A040      	    sbci r26,0
 11026 287e 01F4      	    brne 1b
 11027 2880 00C0      		rjmp .
 11028 2882 0000      		nop
 11029               	.LVL654:
 11030               	.LBE3157:
 11031               	.LBE3156:
 336:usb/usb.h     **** 	USB_ep0_send(0);
 337:usb/usb.h     **** 	USB_ep0_enableOut();
 338:usb/usb.h     **** 	USB_ep_wait(0x00); // Wait for the status stage to complete
 339:usb/usb.h     **** 	_delay_ms(10);
 340:usb/usb.h     **** 	USB_Detach();
 341:usb/usb.h     **** 	_delay_ms(100);
 342:usb/usb.h     **** 	void (*enter_bootloader)(void) = (void*) 0x47fc /*0x8ff8/2*/;
 343:usb/usb.h     **** 	enter_bootloader();
 11032               		.loc 5 343 0
 11033 2884 ECEF      		ldi r30,lo8(18428)
 11034 2886 F7E4      		ldi r31,hi8(18428)
 11035 2888 0995      		icall
 11036               	.LVL655:
 11037               	.LBE3141:
 11038               	.LBE3140:
 132:main.c        **** 				return true;
 11039               		.loc 6 132 0
 11040 288a 81E0      		ldi r24,lo8(1)
 11041 288c 00C0      		rjmp .L421
 11042               	.LVL656:
 11043               	.L423:
 11044               	.LBB3158:
  90:main.c        **** 					int l = strlen(message);
 11045               		.loc 6 90 0
 11046 288e 3091 0000 		lds r19,message
 11047 2892 2091 0000 		lds r18,message+1
 11048               	.LVL657:
 11049 2896 C32F      		mov r28,r19
 11050 2898 D22F      		mov r29,r18
 11051 289a FE01      		movw r30,r28
 11052               	.LVL658:
 11053 289c 0190      		ld __tmp_reg__,Z+
 11054 289e 0020      		tst __tmp_reg__
 11055 28a0 01F4      		brne .-6
 11056 28a2 3197      		sbiw r30,1
 11057 28a4 E31B      		sub r30,r19
 11058               	.LVL659:
 11059               	.L435:
 11060               	.LBB3159:
  92:main.c        **** 						ep0_buf_in[i] = message[i];
 11061               		.loc 6 92 0 discriminator 2
 11062 28a6 2991      		ld r18,Y+
 11063 28a8 2D93      		st X+,r18
  91:main.c        **** 					for (uint8_t i=0; i<64; i++) {
 11064               		.loc 6 91 0 discriminator 2
 11065 28aa 8A17      		cp r24,r26
 11066 28ac 9B07      		cpc r25,r27
 11067 28ae 01F4      		brne .L435
 11068               	.LVL660:
 11069               	.LBE3159:
 11070               	.LBB3160:
 11071               	.LBB3161:
 247:usb/usb.h     **** 	USB_ep_in_start(0x80, ep0_buf_in, size);
 11072               		.loc 5 247 0
 11073 28b0 8E2F      		mov r24,r30
 11074 28b2 90E0      		ldi r25,lo8(0)
 11075               	.LVL661:
 11076               	.LBB3162:
 11077               	.LBB3163:
 11078               	.LBB3164:
 168:usb/usb.h     **** 	b->DATAPTR = (unsigned) addr;
 11079               		.loc 5 168 0
 11080 28b4 0093 0000 		sts endpoints+12,r16
 11081 28b8 1093 0000 		sts endpoints+12+1,r17
 169:usb/usb.h     **** 	if (ep & USB_EP_IN) b->CNT = size;
 11082               		.loc 5 169 0
 11083 28bc 8093 0000 		sts endpoints+10,r24
 11084 28c0 9093 0000 		sts endpoints+10+1,r25
 174:usb/usb.h     **** 		LACR16(&(e->STATUS), USB_EP_BUSNACK0_bm | USB_EP_TRNCOMPL0_bm);
 11085               		.loc 5 174 0
 11086 28c4 E0E0      		ldi r30,lo8(endpoints+8)
 11087 28c6 F0E0      		ldi r31,hi8(endpoints+8)
 11088               	.LVL662:
 11089               	/* #APP */
 11090               	 ;  174 "usb/usb.h" 1
 11091 28c8 02E2      		ldi r16, 34
 11092 28ca 0693      		.dc.w 0x9306
 11093               		
 11094               	 ;  0 "" 2
 11095               	/* #NOAPP */
 11096               	.LBE3164:
 11097               	.LBE3163:
 11098               	.LBE3162:
 11099               	.LBE3161:
 11100               	.LBE3160:
  95:main.c        **** 					return true;
 11101               		.loc 6 95 0
 11102 28cc 81E0      		ldi r24,lo8(1)
 11103               	.LVL663:
 11104 28ce 00C0      		rjmp .L421
 11105               	.LVL664:
 11106               	.L426:
 11107               	.LBE3158:
 106:main.c        **** 				* ((uint16_t *) req->wIndex) = req->wValue;
 11108               		.loc 6 106 0
 11109 28d0 F901      		movw r30,r18
 11110 28d2 8281      		ldd r24,Z+2
 11111 28d4 9381      		ldd r25,Z+3
 11112 28d6 0480      		ldd __tmp_reg__,Z+4
 11113 28d8 F581      		ldd r31,Z+5
 11114 28da E02D      		mov r30,__tmp_reg__
 11115 28dc 8083      		st Z,r24
 11116 28de 9183      		std Z+1,r25
 11117 28e0 00C0      		rjmp .L443
 11118               	.L447:
  85:main.c        **** 					USB_ep0_send_progmem((uint8_t*)fwversion, sizeof(fwversion));
 11119               		.loc 6 85 0
 11120 28e2 80E0      		ldi r24,lo8(fwversion)
 11121 28e4 90E0      		ldi r25,hi8(fwversion)
 11122 28e6 6BE0      		ldi r22,lo8(11)
 11123 28e8 70E0      		ldi r23,hi8(11)
 11124 28ea 0E94 0000 		call USB_ep0_send_progmem
 11125               	.LVL665:
  87:main.c        **** 				return true;
 11126               		.loc 6 87 0
 11127 28ee 81E0      		ldi r24,lo8(1)
 11128 28f0 00C0      		rjmp .L421
 11129               	.LVL666:
 11130               	.L446:
  83:main.c        **** 					USB_ep0_send_progmem((uint8_t*)hwversion, sizeof(hwversion));
 11131               		.loc 6 83 0
 11132 28f2 80E0      		ldi r24,lo8(hwversion)
 11133 28f4 90E0      		ldi r25,hi8(hwversion)
 11134 28f6 6BE0      		ldi r22,lo8(11)
 11135 28f8 70E0      		ldi r23,hi8(11)
 11136 28fa 0E94 0000 		call USB_ep0_send_progmem
 11137               	.LVL667:
  87:main.c        **** 				return true;
 11138               		.loc 6 87 0
 11139 28fe 81E0      		ldi r24,lo8(1)
 11140 2900 00C0      		rjmp .L421
 11141               		.cfi_endproc
 11142               	.LFE82:
 11144               	.global	EVENT_USB_Device_ControlOUT
 11146               	EVENT_USB_Device_ControlOUT:
 11147               	.LFB83:
 138:main.c        **** void EVENT_USB_Device_ControlOUT(uint8_t* buf, uint8_t count){
 11148               		.loc 6 138 0
 11149               		.cfi_startproc
 11150               	.LVL668:
 11151               	/* prologue: function */
 11152               	/* frame size = 0 */
 11153               	/* stack size = 0 */
 11154               	.L__stack_usage = 0
 11155 2902 462F      		mov r20,r22
 139:main.c        **** 	switch (usb_cmd){
 11156               		.loc 6 139 0
 11157 2904 2091 0000 		lds r18,usb_cmd
 11158 2908 213E      		cpi r18,lo8(-31)
 11159 290a 01F0      		breq .L451
 11160               	.LVL669:
 11161 290c 0895      		ret
 11162               	.L451:
 11163               		.loc 6 141 0
 11164 290e 2091 0000 		lds r18,cmd_data
 11165 2912 30E0      		ldi r19,lo8(0)
 11166 2914 0024      		clr __tmp_reg__
 11167 2916 3695      		lsr r19
 11168 2918 2795      		ror r18
 11169 291a 0794      		ror __tmp_reg__
 11170 291c 3695      		lsr r19
 11171 291e 2795      		ror r18
 11172 2920 0794      		ror __tmp_reg__
 11173 2922 322F      		mov r19,r18
 11174 2924 202D      		mov r18,__tmp_reg__
 11175 2926 B901      		movw r22,r18
 11176 2928 50E0      		ldi r21,lo8(0)
 11177 292a 0E94 0000 		call __eeupd_block_x32a4u
 11178               	.LVL670:
 11179 292e 0895      		ret
 11180               		.cfi_endproc
 11181               	.LFE83:
 11183               	.global	cmd_data
 11184               	.global	cmd_data
 11185               		.section .bss
 11188               	cmd_data:
 11189 0000 00        		.skip 1,0
 11190               	.global	usb_cmd
 11191               	.global	usb_cmd
 11194               	usb_cmd:
 11195 0001 00        		.skip 1,0
 11196               	.global	fwversion
 11197               		.section	.progmem.data,"a",@progbits
 11200               	fwversion:
 11201 0000 4657 5F56 		.string	"FW_VERSION"
 11201      4552 5349 
 11201      4F4E 00
 11202               	.global	hwversion
 11205               	hwversion:
 11206 000b 4857 5F56 		.string	"HW_VERSION"
 11206      4552 5349 
 11206      4F4E 00
 11207               	.global	updating
 11208               	.global	updating
 11209               		.section .bss
 11212               	updating:
 11213 0002 00        		.skip 1,0
 11214               		.comm message,2,1
 11215               	.global	twilio_number
 11216               		.data
 11217               	.LC20:
 11218 011c 2B31 3330 		.string	"+13042493059"
 11218      3432 3439 
 11218      3330 3539 
 11218      00
 11221               	twilio_number:
 11222 0129 0000      		.word	.LC20
 11223               	.global	debug
 11224               	.global	debug
 11225               		.section .bss
 11228               	debug:
 11229 0003 00        		.skip 1,0
 11230               	.global	max_dist
 11231               		.data
 11234               	max_dist:
 11235 012b CD        		.byte	-51
 11236 012c CC        		.byte	-52
 11237 012d 4C        		.byte	76
 11238 012e 3E        		.byte	62
 11239               	.global	lng
 11242               	lng:
 11243 012f 7D        		.byte	125
 11244 0130 87        		.byte	-121
 11245 0131 8E        		.byte	-114
 11246 0132 C2        		.byte	-62
 11247               	.global	lat
 11250               	lat:
 11251 0133 C6        		.byte	-58
 11252 0134 2B        		.byte	43
 11253 0135 29        		.byte	41
 11254 0136 42        		.byte	66
 11255               	.global	timeout_or_sampling_no_longer_enabled
 11256               	.global	timeout_or_sampling_no_longer_enabled
 11257               		.section .bss
 11260               	timeout_or_sampling_no_longer_enabled:
 11261 0004 00        		.skip 1,0
 11262               	.global	ep_in_data
 11263               	.global	ep_in_data
 11266               	ep_in_data:
 11267 0005 0000 0000 		.skip 4,0
 11268               	.global	ep_in_pipe_data
 11269               		.data
 11272               	ep_in_pipe_data:
 11273 0137 0000      		.word	ep_in_pipe_buffer
 11274 0139 0000      		.word	ep_in_pipe_buffer
 11275 013b 00        		.byte	0
 11276               		.comm ep_in_pipe_buffer,512,1
 11277               		.text
 11278               	.Letext0:
 11279               		.file 14 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/stdint.h"
 11280               		.file 15 "/usr/lib/gcc/avr/4.6.2/../../../avr/include/avr/iox32a4u.h"
 11281               		.file 16 "usb/StdRequestType.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/ccXy1Gb4.s:2      *ABS*:000000000000003f __SREG__
     /tmp/ccXy1Gb4.s:3      *ABS*:000000000000003e __SP_H__
     /tmp/ccXy1Gb4.s:4      *ABS*:000000000000003d __SP_L__
     /tmp/ccXy1Gb4.s:5      *ABS*:0000000000000034 __CCP__
     /tmp/ccXy1Gb4.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccXy1Gb4.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccXy1Gb4.s:15     .text:0000000000000000 EVENT_USB_Device_ConfigurationChanged
     /tmp/ccXy1Gb4.s:11272  .data:0000000000000137 ep_in_pipe_data
                            *COM*:0000000000000200 ep_in_pipe_buffer
     /tmp/ccXy1Gb4.s:11266  .bss:0000000000000005 ep_in_data
     /tmp/ccXy1Gb4.s:108    .text:000000000000004e __vector_125
     /tmp/ccXy1Gb4.s:246    .text:00000000000000d8 __vector_126
     /tmp/ccXy1Gb4.s:11194  .bss:0000000000000001 usb_cmd
     /tmp/ccXy1Gb4.s:11188  .bss:0000000000000000 cmd_data
     /tmp/ccXy1Gb4.s:782    .text:00000000000002ea send_string
     /tmp/ccXy1Gb4.s:11260  .bss:0000000000000004 timeout_or_sampling_no_longer_enabled
     /tmp/ccXy1Gb4.s:1916   .text:00000000000006e2 concat
     /tmp/ccXy1Gb4.s:2010   .text:000000000000074e distance
     /tmp/ccXy1Gb4.s:11250  .data:0000000000000133 lat
     /tmp/ccXy1Gb4.s:11242  .data:000000000000012f lng
     /tmp/ccXy1Gb4.s:2303   .text:000000000000090e parse_nmea_string
     /tmp/ccXy1Gb4.s:2435   .text:00000000000009aa parse_nmea
     /tmp/ccXy1Gb4.s:11234  .data:000000000000012b max_dist
     /tmp/ccXy1Gb4.s:6052   .text:000000000000182e uart_putchar
     /tmp/ccXy1Gb4.s:6098   .text:000000000000184e uart_getchar
     /tmp/ccXy1Gb4.s:6124   .text:000000000000185a send_uart
     /tmp/ccXy1Gb4.s:11228  .bss:0000000000000003 debug
     /tmp/ccXy1Gb4.s:7350   .text:0000000000001cd0 turn_on_gps
     /tmp/ccXy1Gb4.s:7466   .text:0000000000001d58 power_off_gps
     /tmp/ccXy1Gb4.s:7544   .text:0000000000001d7c gps_init
     /tmp/ccXy1Gb4.s:7764   .text:0000000000001ea4 gps_receive
     /tmp/ccXy1Gb4.s:8927   .text:0000000000002286 wake_up_gprs
     /tmp/ccXy1Gb4.s:8944   .text:0000000000002288 gprs_init
     /tmp/ccXy1Gb4.s:8989   .text:00000000000022ac send_message
     /tmp/ccXy1Gb4.s:9724   .text:000000000000259a GprsTextModeSMS
     /tmp/ccXy1Gb4.s:9752   .text:00000000000025a6 PowerDownModem
     /tmp/ccXy1Gb4.s:9780   .text:00000000000025b2 SleepModem
     /tmp/ccXy1Gb4.s:9808   .text:00000000000025be WakeUpModem
     /tmp/ccXy1Gb4.s:9846   .text:00000000000025ca SimpleReceive
     /tmp/ccXy1Gb4.s:10065  .text.startup:0000000000000000 main
     /tmp/ccXy1Gb4.s:10617  .text:00000000000026ba EVENT_USB_Device_ControlRequest
                            *COM*:0000000000000002 message
     /tmp/ccXy1Gb4.s:11200  .progmem.data:0000000000000000 fwversion
     /tmp/ccXy1Gb4.s:11205  .progmem.data:000000000000000b hwversion
     /tmp/ccXy1Gb4.s:11146  .text:0000000000002902 EVENT_USB_Device_ControlOUT
     /tmp/ccXy1Gb4.s:11212  .bss:0000000000000002 updating
     /tmp/ccXy1Gb4.s:11221  .data:0000000000000129 twilio_number

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
endpoints
USB_Init
USB_HandleSetup
ep0_buf_out
__eeupd_block_x32a4u
malloc
strcpy
strcat
__subsf3
__mulsf3
sin
cos
__addsf3
sqrt
atan2
strtok
atof
__divsf3
__gtsf2
sprintf
USB_ConfigureClock
ep0_buf_in
__eerd_block_x32a4u
USB_ep0_send_progmem
